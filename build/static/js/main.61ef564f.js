/*! For license information please see main.61ef564f.js.LICENSE.txt */
!function(){var e={142:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.isForwardRef=function(e){return w(e)===h}},33:function(e,t,n){"use strict";e.exports=n(142)},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(618);n(7);var i=n(791);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var p=function(){function e(t){o(this,e),c(this,"handlers",void 0),this.handlers=t.slice(0)}return s(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var a=this.handlers[i];-1===t.indexOf(a)&&n.push(a)}return new e(n)}}]),e}();function v(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function m(e){return Array.isArray(e)?e:[e]}function y(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===a(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var g=function(){function e(t,n){o(this,e),c(this,"handlerSets",void 0),c(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return s(e,[{key:"addHandlers",value:function(t,n){var r=v(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new p(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=v(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();c(g,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new p(n)),new g(e,r)}));var k=function(){function e(t){var n=this;o(this,e),c(this,"handlers",new Map),c(this,"pools",new Map),c(this,"target",void 0),c(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return s(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,g.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),b=function(){function e(){var t=this;o(this,e),c(this,"targets",new Map),c(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=y(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new k(r);return t.targets.set(r,i),i})),c(this,"removeTarget",(function(e){t.targets.delete(y(e))}))}return s(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,a=void 0===i?document:i,o=n.pool,u=void 0===o?"default":o;this.getTarget(a).addHandlers(u,e,m(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,a=void 0===i?document:i,o=n.pool,u=void 0===o?"default":o,s=this.getTarget(a,!1);s&&(s.removeHandlers(u,e,m(t)),s.hasHandlers()||this.removeTarget(a))}}}]),e}(),w=new b,_=function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return l(t,i.PureComponent),s(t,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),t}();c(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={},t.instance=w,t.default=_},775:function(e,t,n){"use strict";var r;r=n(630),e.exports=r.default,e.exports.instance=r.instance},880:function(e){e.exports=function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){var t,n="algoliasearch-client-js-".concat(e.key),r=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(r().getItem(n)||"{}")},o=function(e){r().setItem(n,JSON.stringify(e))},u=function(){var t=e.timeToLive?1e3*e.timeToLive:null,n=a(),r=Object.fromEntries(Object.entries(n).filter((function(e){return void 0!==i(e,2)[1].timestamp})));if(o(r),t){var u=Object.fromEntries(Object.entries(r).filter((function(e){var n=i(e,2)[1],r=(new Date).getTime();return!(n.timestamp+t<r)})));o(u)}};return{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){u();var t=JSON.stringify(e);return a()[t]})).then((function(e){return Promise.all([e?e.value:t(),void 0!==e])})).then((function(e){var t=i(e,2),r=t[0],a=t[1];return Promise.all([r,a||n.miss(r)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var i=a();return i[JSON.stringify(e)]={timestamp:(new Date).getTime(),value:t},r().setItem(n,JSON.stringify(i)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],r().setItem(n,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){r().removeItem(n)}))}}}function u(e){var t=a(e.caches),n=t.shift();return void 0===n?{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return t().then((function(e){return Promise.all([e,n.miss(e)])})).then((function(e){return i(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return n.get(e,r,i).catch((function(){return u({caches:t}).get(e,r,i)}))},set:function(e,r){return n.set(e,r).catch((function(){return u({caches:t}).set(e,r)}))},delete:function(e){return n.delete(e).catch((function(){return u({caches:t}).delete(e)}))},clear:function(){return n.clear().catch((function(){return u({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(n);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var o=r(),u=i&&i.miss||function(){return Promise.resolve()};return o.then((function(e){return u(e)})).then((function(){return o}))},set:function(n,r){return t[JSON.stringify(n)]=e.serializable?JSON.stringify(r):r,Promise.resolve(r)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e,t,n){var r={"x-algolia-api-key":n,"x-algolia-application-id":t};return{headers:function(){return e===v.WithinHeaders?r:{}},queryParameters:function(){return e===v.WithinQueryParameters?r:{}}}}function l(e){var t=0;return e((function n(){return t++,new Promise((function(r){setTimeout((function(){r(e(n))}),Math.min(100*t,1e3))}))}))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return Promise.resolve()};return Object.assign(e,{wait:function(n){return f(e.then((function(e){return Promise.all([t(e,n),e])})).then((function(e){return e[1]})))}})}function h(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function d(e,t){return t?(Object.keys(t).forEach((function(n){e[n]=t[n](e)})),e):e}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,(function(){return encodeURIComponent(n[i++])}))}var v={WithinQueryParameters:0,WithinHeaders:1};function m(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach((function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(r[e]=n[e])})),{data:Object.entries(r).length>0?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var y={Read:1,Write:2,Any:3},g=1,k=2,b=3;function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return n(n({},e),{},{status:t,lastUpdate:Date.now()})}function _(e){return"string"==typeof e?{protocol:"https",url:e,accept:y.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||y.Any}}var x="DELETE",E="GET",I="POST",S="PUT";function T(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(w(t))}))}))).then((function(e){var n=e.filter((function(e){return function(e){return e.status===g||Date.now()-e.lastUpdate>12e4}(e)})),r=e.filter((function(e){return function(e){return e.status===b&&Date.now()-e.lastUpdate<=12e4}(e)})),i=[].concat(a(n),a(r));return{getTimeout:function(e,t){return(0===r.length&&0===e?1:r.length+3+e)*t},statelessHosts:i.length>0?i.map((function(e){return _(e)})):t}}))}function C(e,t,r,i){var o=[],u=function(e,t){if(e.method!==E&&(void 0!==e.data||void 0!==t.data)){var r=Array.isArray(e.data)?e.data:n(n({},e.data),t.data);return JSON.stringify(r)}}(r,i),s=function(e,t){var r=n(n({},e.headers),t.headers),i={};return Object.keys(r).forEach((function(e){var t=r[e];i[e.toLowerCase()]=t})),i}(e,i),c=r.method,l=r.method!==E?{}:n(n({},r.data),i.data),f=n(n(n({"x-algolia-agent":e.userAgent.value},e.queryParameters),l),i.queryParameters),h=0,d=function t(n,a){var l=n.pop();if(void 0===l)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:O(o)};var d={data:u,headers:s,method:c,url:P(l,r.path,f),connectTimeout:a(h,e.timeouts.connect),responseTimeout:a(h,i.timeout)},p=function(e){var t={request:d,response:e,host:l,triesLeft:n.length};return o.push(t),t},v={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(r){var i=p(r);return r.isTimedOut&&h++,Promise.all([e.logger.info("Retryable failure",D(i)),e.hostsCache.set(l,w(l,r.isTimedOut?b:k))]).then((function(){return t(n,a)}))},onFail:function(e){throw p(e),function(e,t){var n=e.content,r=e.status,i=n;try{i=JSON.parse(n).message}catch(e){}return function(e,t,n){return{name:"ApiError",message:e,status:t,transporterStackTrace:n}}(i,r,t)}(e,O(o))}};return e.requester.send(d).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,n=e.status;return!t&&0==~~n}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,v)}))};return T(e.hostsCache,t).then((function(e){return d(a(e.statelessHosts).reverse(),e.getTimeout)}))}function N(e){var t=e.hostsCache,n=e.logger,r=e.requester,a=e.requestsCache,o=e.responsesCache,u=e.timeouts,s=e.userAgent,c=e.hosts,l=e.queryParameters,f={hostsCache:t,logger:n,requester:r,requestsCache:a,responsesCache:o,timeouts:u,userAgent:s,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return _(e)})),read:function(e,t){var n=m(t,f.timeouts.read),r=function(){return C(f,f.hosts.filter((function(e){return 0!=(e.accept&y.Read)})),e,n)};if(!0!==(void 0!==n.cacheable?n.cacheable:e.cacheable))return r();var a={request:e,mappedRequestOptions:n,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(a,(function(){return f.requestsCache.get(a,(function(){return f.requestsCache.set(a,r()).then((function(e){return Promise.all([f.requestsCache.delete(a),e])}),(function(e){return Promise.all([f.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=i(e,2);return t[0],t[1]}))}))}),{miss:function(e){return f.responsesCache.set(a,e)}})},write:function(e,t){return C(f,f.hosts.filter((function(e){return 0!=(e.accept&y.Write)})),e,m(t,f.timeouts.write))}};return f}function A(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var n="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(n)&&(t.value="".concat(t.value).concat(n)),t}};return t}function P(e,t,n){var r=R(n),i="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return r.length&&(i+="?".concat(r)),i}function R(e){return Object.keys(e).map((function(t){return p("%s=%s",t,(n=e[t],"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?JSON.stringify(e[t]):e[t]));var n})).join("&")}function O(e){return e.map((function(e){return D(e)}))}function D(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return n(n({},e),{},{request:n(n({},e.request),{},{headers:n(n({},e.request.headers),t)})})}var L=function(e){return function(t,n){return e.transporter.write({method:I,path:"2/abtests",data:t},n)}},M=function(e){return function(t,n){return e.transporter.write({method:x,path:p("2/abtests/%s",t)},n)}},U=function(e){return function(t,n){return e.transporter.read({method:E,path:p("2/abtests/%s",t)},n)}},F=function(e){return function(t){return e.transporter.read({method:E,path:"2/abtests"},t)}},j=function(e){return function(t,n){return e.transporter.write({method:I,path:p("2/abtests/%s/stop",t)},n)}},V=function(e){return function(t){return e.transporter.read({method:E,path:"1/strategies/personalization"},t)}},z=function(e){return function(t,n){return e.transporter.write({method:I,path:"1/strategies/personalization",data:t},n)}};function B(e){return function t(n){return e.request(n).then((function(r){if(void 0!==e.batch&&e.batch(r.hits),!e.shouldStop(r))return r.cursor?t({cursor:r.cursor}):t({page:(n.page||0)+1})}))}({})}var q=function(e){return function(t,i){var a=i||{},o=a.queryParameters,u=r(a,["queryParameters"]),s=n({acl:t},void 0!==o?{queryParameters:o}:{});return f(e.transporter.write({method:I,path:"1/keys",data:s},u),(function(t,n){return l((function(r){return ee(e)(t.key,n).catch((function(e){if(404!==e.status)throw e;return r()}))}))}))}},K=function(e){return function(t,n,r){var i=m(r);return i.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:I,path:"1/clusters/mapping",data:{cluster:n}},i)}},G=function(e){return function(t,n,r){return e.transporter.write({method:I,path:"1/clusters/mapping/batch",data:{users:t,cluster:n}},r)}},H=function(e){return function(t,n){return f(e.transporter.write({method:I,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},n),(function(t,n){return Ie(e)(t.taskID,n)}))}},W=function(e){return function(t,n,r){return f(e.transporter.write({method:I,path:p("1/indexes/%s/operation",t),data:{operation:"copy",destination:n}},r),(function(n,r){return ue(e)(t,{methods:{waitTask:ft}}).waitTask(n.taskID,r)}))}},Q=function(e){return function(t,r,i){return W(e)(t,r,n(n({},i),{},{scope:[dt.Rules]}))}},Y=function(e){return function(t,r,i){return W(e)(t,r,n(n({},i),{},{scope:[dt.Settings]}))}},$=function(e){return function(t,r,i){return W(e)(t,r,n(n({},i),{},{scope:[dt.Synonyms]}))}},X=function(e){return function(t,n){return t.method===E?e.transporter.read(t,n):e.transporter.write(t,n)}},J=function(e){return function(t,n){return f(e.transporter.write({method:x,path:p("1/keys/%s",t)},n),(function(n,r){return l((function(n){return ee(e)(t,r).then(n).catch((function(e){if(404!==e.status)throw e}))}))}))}},Z=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"deleteEntry",body:{objectID:e}}}));return f(e.transporter.write({method:I,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:i}},r),(function(t,n){return Ie(e)(t.taskID,n)}))}},ee=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/keys/%s",t)},n)}},te=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/task/%s",t.toString())},n)}},ne=function(e){return function(t){return e.transporter.read({method:E,path:"/1/dictionaries/*/settings"},t)}},re=function(e){return function(t){return e.transporter.read({method:E,path:"1/logs"},t)}},ie=function(e){return function(t){return e.transporter.read({method:E,path:"1/clusters/mapping/top"},t)}},ae=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/clusters/mapping/%s",t)},n)}},oe=function(e){return function(t){var n=t||{},i=n.retrieveMappings,a=r(n,["retrieveMappings"]);return!0===i&&(a.getClusters=!0),e.transporter.read({method:E,path:"1/clusters/mapping/pending"},a)}},ue=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d({transporter:e.transporter,appId:e.appId,indexName:t},n.methods)}},se=function(e){return function(t){return e.transporter.read({method:E,path:"1/keys"},t)}},ce=function(e){return function(t){return e.transporter.read({method:E,path:"1/clusters"},t)}},le=function(e){return function(t){return e.transporter.read({method:E,path:"1/indexes"},t)}},fe=function(e){return function(t){return e.transporter.read({method:E,path:"1/clusters/mapping"},t)}},he=function(e){return function(t,n,r){return f(e.transporter.write({method:I,path:p("1/indexes/%s/operation",t),data:{operation:"move",destination:n}},r),(function(n,r){return ue(e)(t,{methods:{waitTask:ft}}).waitTask(n.taskID,r)}))}},de=function(e){return function(t,n){return f(e.transporter.write({method:I,path:"1/indexes/*/batch",data:{requests:t}},n),(function(t,n){return Promise.all(Object.keys(t.taskID).map((function(r){return ue(e)(r,{methods:{waitTask:ft}}).waitTask(t.taskID[r],n)})))}))}},pe=function(e){return function(t,n){return e.transporter.read({method:I,path:"1/indexes/*/objects",data:{requests:t}},n)}},ve=function(e){return function(t,r){var i=t.map((function(e){return n(n({},e),{},{params:R(e.params||{})})}));return e.transporter.read({method:I,path:"1/indexes/*/queries",data:{requests:i},cacheable:!0},r)}},me=function(e){return function(t,i){return Promise.all(t.map((function(t){var a=t.params,o=a.facetName,u=a.facetQuery,s=r(a,["facetName","facetQuery"]);return ue(e)(t.indexName,{methods:{searchForFacetValues:ut}}).searchForFacetValues(o,u,n(n({},i),s))})))}},ye=function(e){return function(t,n){var r=m(n);return r.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:x,path:"1/clusters/mapping"},r)}},ge=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"addEntry",body:e}}));return f(e.transporter.write({method:I,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:i}},r),(function(t,n){return Ie(e)(t.taskID,n)}))}},ke=function(e){return function(t,n){return f(e.transporter.write({method:I,path:p("1/keys/%s/restore",t)},n),(function(n,r){return l((function(n){return ee(e)(t,r).catch((function(e){if(404!==e.status)throw e;return n()}))}))}))}},be=function(e){return function(t,n,r){var i=n.map((function(e){return{action:"addEntry",body:e}}));return f(e.transporter.write({method:I,path:p("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:i}},r),(function(t,n){return Ie(e)(t.taskID,n)}))}},we=function(e){return function(t,n,r){return e.transporter.read({method:I,path:p("/1/dictionaries/%s/search",t),data:{query:n},cacheable:!0},r)}},_e=function(e){return function(t,n){return e.transporter.read({method:I,path:"1/clusters/mapping/search",data:{query:t}},n)}},xe=function(e){return function(t,n){return f(e.transporter.write({method:S,path:"/1/dictionaries/*/settings",data:t},n),(function(t,n){return Ie(e)(t.taskID,n)}))}},Ee=function(e){return function(t,n){var i=Object.assign({},n),a=n||{},o=a.queryParameters,u=r(a,["queryParameters"]),s=o?{queryParameters:o}:{},c=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return f(e.transporter.write({method:S,path:p("1/keys/%s",t),data:s},u),(function(n,r){return l((function(n){return ee(e)(t,r).then((function(e){return function(e){return Object.keys(i).filter((function(e){return-1!==c.indexOf(e)})).every((function(t){if(Array.isArray(e[t])&&Array.isArray(i[t])){var n=e[t];return n.length===i[t].length&&n.every((function(e,n){return e===i[t][n]}))}return e[t]===i[t]}))}(e)?Promise.resolve():n()}))}))}))}},Ie=function(e){return function(t,n){return l((function(r){return te(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},Se=function(e){return function(t,n){return f(e.transporter.write({method:I,path:p("1/indexes/%s/batch",e.indexName),data:{requests:t}},n),(function(t,n){return ft(e)(t.taskID,n)}))}},Te=function(e){return function(t){return B(n(n({shouldStop:function(e){return void 0===e.cursor}},t),{},{request:function(n){return e.transporter.read({method:I,path:p("1/indexes/%s/browse",e.indexName),data:n},t)}}))}},Ce=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return B(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return st(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Ne=function(e){return function(t){var r=n({hitsPerPage:1e3},t);return B(n(n({shouldStop:function(e){return e.hits.length<r.hitsPerPage}},r),{},{request:function(t){return ct(e)("",n(n({},r),t)).then((function(e){return n(n({},e),{},{hits:e.hits.map((function(e){return delete e._highlightResult,e}))})}))}}))}},Ae=function(e){return function(t,n,i){var a=i||{},o=a.batchSize,u=r(a,["batchSize"]),s={taskIDs:[],objectIDs:[]};return f(function r(){var i,a=[];for(i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i<t.length&&(a.push(t[i]),a.length!==(o||1e3));i++);return 0===a.length?Promise.resolve(s):Se(e)(a.map((function(e){return{action:n,body:e}})),u).then((function(e){return s.objectIDs=s.objectIDs.concat(e.objectIDs),s.taskIDs.push(e.taskID),i++,r(i)}))}(),(function(t,n){return Promise.all(t.taskIDs.map((function(t){return ft(e)(t,n)})))}))}},Pe=function(e){return function(t){return f(e.transporter.write({method:I,path:p("1/indexes/%s/clear",e.indexName)},t),(function(t,n){return ft(e)(t.taskID,n)}))}},Re=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,a=m(r(n,["forwardToReplicas"]));return i&&(a.queryParameters.forwardToReplicas=1),f(e.transporter.write({method:I,path:p("1/indexes/%s/rules/clear",e.indexName)},a),(function(t,n){return ft(e)(t.taskID,n)}))}},Oe=function(e){return function(t){var n=t||{},i=n.forwardToReplicas,a=m(r(n,["forwardToReplicas"]));return i&&(a.queryParameters.forwardToReplicas=1),f(e.transporter.write({method:I,path:p("1/indexes/%s/synonyms/clear",e.indexName)},a),(function(t,n){return ft(e)(t.taskID,n)}))}},De=function(e){return function(t,n){return f(e.transporter.write({method:I,path:p("1/indexes/%s/deleteByQuery",e.indexName),data:t},n),(function(t,n){return ft(e)(t.taskID,n)}))}},Le=function(e){return function(t){return f(e.transporter.write({method:x,path:p("1/indexes/%s",e.indexName)},t),(function(t,n){return ft(e)(t.taskID,n)}))}},Me=function(e){return function(t,n){return f(Ue(e)([t],n).then((function(e){return{taskID:e.taskIDs[0]}})),(function(t,n){return ft(e)(t.taskID,n)}))}},Ue=function(e){return function(t,n){var r=t.map((function(e){return{objectID:e}}));return Ae(e)(r,ht.DeleteObject,n)}},Fe=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,o=m(r(i,["forwardToReplicas"]));return a&&(o.queryParameters.forwardToReplicas=1),f(e.transporter.write({method:x,path:p("1/indexes/%s/rules/%s",e.indexName,t)},o),(function(t,n){return ft(e)(t.taskID,n)}))}},je=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,o=m(r(i,["forwardToReplicas"]));return a&&(o.queryParameters.forwardToReplicas=1),f(e.transporter.write({method:x,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},o),(function(t,n){return ft(e)(t.taskID,n)}))}},Ve=function(e){return function(t){return We(e)(t).then((function(){return!0})).catch((function(e){if(404!==e.status)throw e;return!1}))}},ze=function(e){return function(t,n,r){return e.transporter.read({method:I,path:p("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:n},cacheable:!0},r)}},Be=function(e){return function(t,a){var o=a||{},u=o.query,s=o.paginate,c=r(o,["query","paginate"]),l=0;return function r(){return ot(e)(u||"",n(n({},c),{},{page:l})).then((function(e){for(var n=0,a=Object.entries(e.hits);n<a.length;n++){var o=i(a[n],2),u=o[0],c=o[1];if(t(c))return{object:c,position:parseInt(u,10),page:l}}if(l++,!1===s||l>=e.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return r()}))}()}},qe=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/indexes/%s/%s",e.indexName,t)},n)}},Ke=function(){return function(e,t){for(var n=0,r=Object.entries(e.hits);n<r.length;n++){var a=i(r[n],2),o=a[0];if(a[1].objectID===t)return parseInt(o,10)}return-1}},Ge=function(e){return function(t,i){var a=i||{},o=a.attributesToRetrieve,u=r(a,["attributesToRetrieve"]),s=t.map((function(t){return n({indexName:e.indexName,objectID:t},o?{attributesToRetrieve:o}:{})}));return e.transporter.read({method:I,path:"1/indexes/*/objects",data:{requests:s}},u)}},He=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/indexes/%s/rules/%s",e.indexName,t)},n)}},We=function(e){return function(t){return e.transporter.read({method:E,path:p("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},Qe=function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/indexes/%s/synonyms/%s",e.indexName,t)},n)}},Ye=function(e){return function(t,n){return f($e(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return ft(e)(t.taskID,n)}))}},$e=function(e){return function(t,n){var i=n||{},a=i.createIfNotExists,o=r(i,["createIfNotExists"]),u=a?ht.PartialUpdateObject:ht.PartialUpdateObjectNoCreate;return Ae(e)(t,u,o)}},Xe=function(e){return function(t,o){var u=o||{},s=u.safe,c=u.autoGenerateObjectIDIfNotExist,l=u.batchSize,h=r(u,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),d=function(t,n,r,i){return f(e.transporter.write({method:I,path:p("1/indexes/%s/operation",t),data:{operation:r,destination:n}},i),(function(t,n){return ft(e)(t.taskID,n)}))},v=Math.random().toString(36).substring(7),m="".concat(e.indexName,"_tmp_").concat(v),y=tt({appId:e.appId,transporter:e.transporter,indexName:m}),g=[],k=d(e.indexName,m,"copy",n(n({},h),{},{scope:["settings","synonyms","rules"]}));return g.push(k),f((s?k.wait(h):k).then((function(){var e=y(t,n(n({},h),{},{autoGenerateObjectIDIfNotExist:c,batchSize:l}));return g.push(e),s?e.wait(h):e})).then((function(){var t=d(m,e.indexName,"move",h);return g.push(t),s?t.wait(h):t})).then((function(){return Promise.all(g)})).then((function(e){var t=i(e,3),n=t[0],r=t[1],o=t[2];return{objectIDs:r.objectIDs,taskIDs:[n.taskID].concat(a(r.taskIDs),[o.taskID])}})),(function(e,t){return Promise.all(g.map((function(e){return e.wait(t)})))}))}},Je=function(e){return function(t,r){return rt(e)(t,n(n({},r),{},{clearExistingRules:!0}))}},Ze=function(e){return function(t,r){return at(e)(t,n(n({},r),{},{clearExistingSynonyms:!0}))}},et=function(e){return function(t,n){return f(tt(e)([t],n).then((function(e){return{objectID:e.objectIDs[0],taskID:e.taskIDs[0]}})),(function(t,n){return ft(e)(t.taskID,n)}))}},tt=function(e){return function(t,n){var i=n||{},a=i.autoGenerateObjectIDIfNotExist,o=r(i,["autoGenerateObjectIDIfNotExist"]),u=a?ht.AddObject:ht.UpdateObject;if(u===ht.UpdateObject){var s=!0,c=!1,l=void 0;try{for(var h,d=t[Symbol.iterator]();!(s=(h=d.next()).done);s=!0)if(void 0===h.value.objectID)return f(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(e){c=!0,l=e}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}}return Ae(e)(t,u,o)}},nt=function(e){return function(t,n){return rt(e)([t],n)}},rt=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,o=i.clearExistingRules,u=m(r(i,["forwardToReplicas","clearExistingRules"]));return a&&(u.queryParameters.forwardToReplicas=1),o&&(u.queryParameters.clearExistingRules=1),f(e.transporter.write({method:I,path:p("1/indexes/%s/rules/batch",e.indexName),data:t},u),(function(t,n){return ft(e)(t.taskID,n)}))}},it=function(e){return function(t,n){return at(e)([t],n)}},at=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,o=i.clearExistingSynonyms,u=i.replaceExistingSynonyms,s=m(r(i,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return a&&(s.queryParameters.forwardToReplicas=1),(u||o)&&(s.queryParameters.replaceExistingSynonyms=1),f(e.transporter.write({method:I,path:p("1/indexes/%s/synonyms/batch",e.indexName),data:t},s),(function(t,n){return ft(e)(t.taskID,n)}))}},ot=function(e){return function(t,n){return e.transporter.read({method:I,path:p("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},n)}},ut=function(e){return function(t,n,r){return e.transporter.read({method:I,path:p("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:n},cacheable:!0},r)}},st=function(e){return function(t,n){return e.transporter.read({method:I,path:p("1/indexes/%s/rules/search",e.indexName),data:{query:t}},n)}},ct=function(e){return function(t,n){return e.transporter.read({method:I,path:p("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},n)}},lt=function(e){return function(t,n){var i=n||{},a=i.forwardToReplicas,o=m(r(i,["forwardToReplicas"]));return a&&(o.queryParameters.forwardToReplicas=1),f(e.transporter.write({method:S,path:p("1/indexes/%s/settings",e.indexName),data:t},o),(function(t,n){return ft(e)(t.taskID,n)}))}},ft=function(e){return function(t,n){return l((function(r){return function(e){return function(t,n){return e.transporter.read({method:E,path:p("1/indexes/%s/task/%s",e.indexName,t.toString())},n)}}(e)(t,n).then((function(e){return"published"!==e.status?r():void 0}))}))}},ht={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},dt={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},pt=1,vt=2,mt=3;function yt(e,t,r){var i,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var n=new XMLHttpRequest;n.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return n.setRequestHeader(t,e.headers[t])}));var r,i=function(e,r){return setTimeout((function(){n.abort(),t({status:0,content:r,isTimedOut:!0})}),1e3*e)},a=i(e.connectTimeout,"Connection timeout");n.onreadystatechange=function(){n.readyState>n.OPENED&&void 0===r&&(clearTimeout(a),r=i(e.responseTimeout,"Socket timeout"))},n.onerror=function(){0===n.status&&(clearTimeout(a),clearTimeout(r),t({content:n.responseText||"Network request failed",status:n.status,isTimedOut:!1}))},n.onload=function(){clearTimeout(a),clearTimeout(r),t({content:n.responseText,status:n.status,isTimedOut:!1})},n.send(e.data)}))}},logger:(i=mt,{debug:function(e,t){return pt>=i&&console.debug(e,t),Promise.resolve()},info:function(e,t){return vt>=i&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:u({caches:[o({key:"".concat("4.20.0","-").concat(e)}),s()]}),userAgent:A("4.20.0").add({segment:"Browser"})},l=n(n({},a),r),f=function(){return function(e){return function(e){var t=e.region||"us",r=c(v.WithinHeaders,e.appId,e.apiKey),i=N(n(n({hosts:[{url:"personalization.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return d({appId:e.appId,transporter:i},e.methods)}(n(n(n({},a),e),{},{methods:{getPersonalizationStrategy:V,setPersonalizationStrategy:z}}))}};return function(e){var t=e.appId,r=c(void 0!==e.authMode?e.authMode:v.WithinHeaders,t,e.apiKey),i=N(n(n({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:y.Read},{url:"".concat(t,".algolia.net"),accept:y.Write}].concat(h([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return d({transporter:i,appId:t,addAlgoliaAgent:function(e,t){i.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([i.requestsCache.clear(),i.responsesCache.clear()]).then((function(){}))}},e.methods)}(n(n({},l),{},{methods:{search:ve,searchForFacetValues:me,multipleBatch:de,multipleGetObjects:pe,multipleQueries:ve,copyIndex:W,copySettings:Y,copySynonyms:$,copyRules:Q,moveIndex:he,listIndices:le,getLogs:re,listClusters:ce,multipleSearchForFacetValues:me,getApiKey:ee,addApiKey:q,listApiKeys:se,updateApiKey:Ee,deleteApiKey:J,restoreApiKey:ke,assignUserID:K,assignUserIDs:G,getUserID:ae,searchUserIDs:_e,listUserIDs:fe,getTopUserIDs:ie,removeUserID:ye,hasPendingMappings:oe,clearDictionaryEntries:H,deleteDictionaryEntries:Z,getDictionarySettings:ne,getAppTask:te,replaceDictionaryEntries:ge,saveDictionaryEntries:be,searchDictionaryEntries:we,setDictionarySettings:xe,waitAppTask:Ie,customRequest:X,initIndex:function(e){return function(t){return ue(e)(t,{methods:{batch:Se,delete:Le,findAnswers:ze,getObject:qe,getObjects:Ge,saveObject:et,saveObjects:tt,search:ot,searchForFacetValues:ut,waitTask:ft,setSettings:lt,getSettings:We,partialUpdateObject:Ye,partialUpdateObjects:$e,deleteObject:Me,deleteObjects:Ue,deleteBy:De,clearObjects:Pe,browseObjects:Te,getObjectPosition:Ke,findObject:Be,exists:Ve,saveSynonym:it,saveSynonyms:at,getSynonym:Qe,searchSynonyms:ct,browseSynonyms:Ne,deleteSynonym:je,clearSynonyms:Oe,replaceAllObjects:Xe,replaceAllSynonyms:Ze,searchRules:st,getRule:He,deleteRule:Fe,saveRule:nt,saveRules:rt,replaceAllRules:Je,browseRules:Ce,clearRules:Re}})}},initAnalytics:function(){return function(e){return function(e){var t=e.region||"us",r=c(v.WithinHeaders,e.appId,e.apiKey),i=N(n(n({hosts:[{url:"analytics.".concat(t,".algolia.com")}]},e),{},{headers:n(n(n({},r.headers()),{"content-type":"application/json"}),e.headers),queryParameters:n(n({},r.queryParameters()),e.queryParameters)}));return d({appId:e.appId,transporter:i},e.methods)}(n(n(n({},a),e),{},{methods:{addABTest:L,getABTest:U,getABTests:F,stopABTest:j,deleteABTest:M}}))}},initPersonalization:f,initRecommendation:function(){return function(e){return l.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),f()(e)}}}}))}return yt.version="4.20.0",yt}()},618:function(e,t,n){var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},854:function(e){"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var a=i+65;n[a]=[String.fromCharCode(a+32),String.fromCharCode(a)]}var o={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};o.Spacebar=o[" "],o.Digit0=o[0],o.Digit1=o[1],o.Digit2=o[2],o.Digit3=o[3],o.Digit4=o[4],o.Digit5=o[5],o.Digit6=o[6],o.Digit7=o[7],o.Digit8=o[8],o.Digit9=o[9],o.Tilde=o["~"],o.GraveAccent=o["`"],o.ExclamationPoint=o["!"],o.AtSign=o["@"],o.PoundSign=o["#"],o.PercentSign=o["%"],o.Caret=o["^"],o.Ampersand=o["&"],o.PlusSign=o["+"],o.MinusSign=o["-"],o.EqualsSign=o["="],o.DivisionSign=o["/"],o.MultiplicationSign=o["*"],o.Comma=o[","],o.Decimal=o["."],o.Colon=o[":"],o.Semicolon=o[";"],o.Pipe=o["|"],o.BackSlash=o["\\"],o.QuestionMark=o["?"],o.SingleQuote=o["'"],o.DoubleQuote=o['"'],o.LeftCurlyBrace=o["{"],o.RightCurlyBrace=o["}"],o.LeftParenthesis=o["("],o.RightParenthesis=o[")"],o.LeftAngleBracket=o["<"],o.RightAngleBracket=o[">"],o.LeftSquareBracket=o["["],o.RightSquareBracket=o["]"],e.exports=o},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case I:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Ie(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ee)&&(Ne(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Ue=null,Fe=!1,je=null,Ve={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Ue=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,It,St=!1,Tt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Pt.forEach(jt),Rt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=U({},cn,{view:0,detail:0}),hn=an(fn),dn=U({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(U({},dn,{dataTransfer:0})),mn=an(U({},fn,{relatedTarget:0})),yn=an(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(U({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function In(){return En}var Sn=U({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(U({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),An=an(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Un=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Fr(e,0)}function Yn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Ir(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Ir("animationend"),Tr=Ir("animationiteration"),Cr=Ir("animationstart"),Nr=Ir("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),s(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Ue;Me=!1,Ue=null,Fe||(Fe=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Ur(i,u,c),a=s}}}if(Fe)throw e=je,Fe=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Kn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Ii(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Ai=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ii(Ni),Ii(Ci)}function Di(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(Ci),Si(Ci,e)):Ii(Ni),Si(Ni,n)}var Fi=null,ji=!1,Vi=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,ji=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),We(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Ii(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ua(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=U({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Us|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Ri(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Ri(t)?Ai:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Ua(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=jc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(Za),Si(Za,t)}function io(){Ii(Za),Ii(eo),Ii(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ii(Za),Ii(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function Io(){var e=0!==bo;return bo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Us|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Us|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Uo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Uo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Uo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function zo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Us|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ia,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ia,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ia,useCallback:$o,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ia,useCallback:$o,useContext:Ia,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=Io(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Iu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ds,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ds,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ds,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ds,Os),Os|=r;return wu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ai:Ci.current;return a=Pi(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=Io(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Ua(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ia(s):s=Pi(t,s=Ri(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Ua(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Du,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Uu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Uc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Uu(n),t.memoizedState=Mu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Uu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),Vu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=ju(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Uu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Wu(t),null;case 3:return r=t.stateNode,io(),Ii(Ni),Ii(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ii(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ou(e,t),null===e&&Br(t.stateNode.containerInfo),Wu(t),null;case 10:return _a(t.type._context),Wu(t),null;case 19:if(Ii(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ii(Ni),Ii(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ii(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ic(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ms(t,e),Xu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,Zu=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var c=Xu;if($u=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Is=Math.ceil,Ss=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ns=0,As=null,Ps=null,Rs=0,Os=0,Ds=Ei(0),Ls=0,Ms=null,Us=0,Fs=0,js=0,Vs=null,zs=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===As||(e===As&&(0===(2&Ns)&&(Fs|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Xe()+500,ji&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(As===e&&Rs===t||(Ks=null,qs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}wa(),Ss.current=o,Ns=i,null!==Ps?t=0:(As=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),t);break}_c(e,zs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),r);break}_c(e,zs,Ks);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~js,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zs,Ks),ic(e,Xe()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Xe()+500,ji&&Bi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ns)&&xc();var t=Ns;Ns|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Os=Ds.current,Ii(Ds)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ii(Ni),Ii(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ii(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ps=e=Dc(e.current,null),Rs=Os=t,Ls=0,Ms=null,js=Fs=Us=0,zs=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Us)&&0===(268435455&Fs)||sc(As,Rs)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(As===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Ss.current=r,null!==Ps)throw Error(a(261));return As=null,Rs=0,Ls}function gc(){for(;null!==Ps;)bc(Ps)}function kc(){for(;null!==Ps&&!Ye();)bc(Ps)}function bc(e){var t=Es(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):Ps=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(Ps=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ps=As=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ns=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=bt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Da(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Da(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Xe()-Bs?dc(e,0):js|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return We(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case I:return(e=Rc(12,n,t,2|i)).elementType=I,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Uc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Iu(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=Io();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ua(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Ia(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Iu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ns)&&(qs=Xe()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},Et=function(){return kt},It=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Se,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,m=60117,y=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),m=k("react.fundamental"),y=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case h:case u:return e;default:return t}}case r:return t}}}t.isForwardRef=function(e){return b(e)===c}},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,O(_);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(S),S=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,I=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?x():(E=!1,I=null)}}else E=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){y(A,0)};function O(e){I=e,E||(E=!0,x())}function D(e,n){S=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(S),S=-1):m=!0,D(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ua},SDK_VERSION:function(){return Xo},_DEFAULT_ENTRY_NAME:function(){return Fo},_addComponent:function(){return Bo},_addOrOverwriteComponent:function(){return qo},_apps:function(){return Vo},_clearComponents:function(){return Wo},_components:function(){return zo},_getProvider:function(){return Go},_registerComponent:function(){return Ko},_removeServiceInstance:function(){return Ho},deleteApp:function(){return tu},getApp:function(){return Zo},getApps:function(){return eu},initializeApp:function(){return Jo},onLog:function(){return iu},registerVersion:function(){return ru},setLogLevel:function(){return au}});var t=n(164);function r(e){if(Array.isArray(e))return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return r(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||a(e,t)||o()}var s,c=n(791),l=n.t(c,2);function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return i(e)}(e)||f(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){var t=w();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function E(e,t,n){return E=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},E.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return E(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)},I(e)}function S(e){return r(e)||f(e)||a(e)||o()}function T(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));var N,A="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function R(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function O(e,t){return{usr:e.state,key:e.key,idx:t}}function D(e,t,n,r){return void 0===n&&(n=null),C({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function U(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,c=void 0!==u&&u,l=o.history,f=s.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=s.Pop;var e=p(),t=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:L(e);return P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(C({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(o,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(A,v),h=e,function(){o.removeEventListener(A,v),h=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=s.Push;var r=D(y.location,e,t);n&&n(r,e);var i=O(r,d=p()+1),a=y.createHref(r);try{l.pushState(i,"",a)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;o.location.assign(a)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,t){f=s.Replace;var r=D(y.location,e,t);n&&n(r,e);var i=O(r,d=p()),a=y.createHref(r);l.replaceState(i,"",a),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(N||(N={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function F(e,t,n){void 0===n&&(n="/");var r=J(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=j(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Y(i[o],X(r));return a}function j(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(P(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=ne([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),j(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:Q(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=T(V(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function V(e){var t=e.split("/");if(0===t.length)return[];var n=S(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=V(i.join("/")),s=[];return s.push.apply(s,h(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,h(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var z=/^:\w+$/,B=3,q=2,K=1,G=10,H=-2,W=function(e){return"*"===e};function Q(e,t){var n=e.split("/"),r=n.length;return n.some(W)&&(r+=H),t&&(r+=q),n.filter((function(e){return!W(e)})).reduce((function(e,t){return e+(z.test(t)?B:""===t?K:G)}),r)}function Y(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=$({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ne([i,l.pathname]),pathnameBase:re(ne([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ne([i,l.pathnameBase]))}return a}function $(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);R("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],c=s.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return R(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function X(e){try{return decodeURI(e)}catch(t){return R(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function J(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ee(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function te(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(P(!(i=C({},e)).pathname||!i.pathname.includes("?"),Z("?","pathname","search",i)),P(!i.pathname||!i.pathname.includes("#"),Z("#","pathname","hash",i)),P(!i.search||!i.search.includes("#"),Z("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ie(a),hash:ae(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ne=function(e){return e.join("/").replace(/\/\/+/g,"/")},re=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ie=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ae=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},oe=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(I(Error));function ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var se=["post","put","patch","delete"],ce=(new Set(se),["get"].concat(se));new Set(ce),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}var fe=c.createContext(null);var he=c.createContext(null);var de=c.createContext(null);var pe=c.createContext(null);var ve=c.createContext(null);var me=c.createContext({outlet:null,matches:[],isDataRoute:!1});var ye=c.createContext(null);function ge(){return null!=c.useContext(ve)}function ke(){return ge()||P(!1),c.useContext(ve).location}function be(e){c.useContext(pe).static||c.useLayoutEffect(e)}function we(){return c.useContext(me).isDataRoute?function(){var e=Re(Ae.UseNavigateStable).router,t=De(Pe.UseNavigateStable),n=c.useRef(!1);be((function(){n.current=!0}));var r=c.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,le({fromRouteId:t},i)))}),[e,t]);return r}():function(){ge()||P(!1);var e=c.useContext(fe),t=c.useContext(pe),n=t.basename,r=t.navigator,i=c.useContext(me).matches,a=ke().pathname,o=JSON.stringify(ee(i).map((function(e){return e.pathnameBase}))),u=c.useRef(!1);return be((function(){u.current=!0})),c.useCallback((function(t,i){if(void 0===i&&(i={}),u.current)if("number"!==typeof t){var s=te(t,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:ne([n,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}else r.go(t)}),[n,r,o,a,e])}()}var _e=c.createContext(null);function xe(e,t){var n=(void 0===t?{}:t).relative,r=c.useContext(me).matches,i=ke().pathname,a=JSON.stringify(ee(r).map((function(e){return e.pathnameBase})));return c.useMemo((function(){return te(e,JSON.parse(a),i,"path"===n)}),[e,a,i,n])}function Ee(e,t,n){ge()||P(!1);var r,i=c.useContext(pe).navigator,a=c.useContext(me).matches,o=a[a.length-1],u=o?o.params:{},l=(o&&o.pathname,o?o.pathnameBase:"/"),f=(o&&o.route,ke());if(t){var h,d="string"===typeof t?M(t):t;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||P(!1),r=d}else r=f;var p=r.pathname||"/",v=F(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=Ne(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:ne([l,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:ne([l,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),a,n);return t&&m?c.createElement(ve.Provider,{value:{location:le({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:s.Pop}},m):m}function Ie(){var e=function(){var e,t=c.useContext(ye),n=Oe(Pe.UseRouteError),r=De(Pe.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=ue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),n?c.createElement("pre",{style:i},n):null,null)}var Se=c.createElement(Ie,null),Te=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?c.createElement(me.Provider,{value:this.props.routeContext},c.createElement(ye.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(c.Component);function Ce(e){var t=e.routeContext,n=e.match,r=e.children,i=c.useContext(fe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(me.Provider,{value:t},r)}function Ne(e,t,n){var r;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var i;if(null==(i=n)||!i.errors)return null;e=n.matches}var a=e,o=null==(r=n)?void 0:r.errors;if(null!=o){var u=a.findIndex((function(e){return e.route.id&&(null==o?void 0:o[e.route.id])}));u>=0||P(!1),a=a.slice(0,Math.min(a.length,u+1))}return a.reduceRight((function(e,r,i){var u=r.route.id?null==o?void 0:o[r.route.id]:null,s=null;n&&(s=r.route.errorElement||Se);var l=t.concat(a.slice(0,i+1)),f=function(){var t;return t=u?s:r.route.Component?c.createElement(r.route.Component,null):r.route.element?r.route.element:e,c.createElement(Ce,{match:r,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?c.createElement(Te,{location:n.location,revalidation:n.revalidation,component:s,error:u,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}var Ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ae||{}),Pe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Pe||{});function Re(e){var t=c.useContext(fe);return t||P(!1),t}function Oe(e){var t=c.useContext(he);return t||P(!1),t}function De(e){var t=function(e){var t=c.useContext(me);return t||P(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}l.startTransition;function Le(e){var t=e.to,n=e.replace,r=e.state,i=e.relative;ge()||P(!1);var a=c.useContext(me).matches,o=ke().pathname,u=we(),s=te(t,ee(a).map((function(e){return e.pathnameBase})),o,"path"===i),l=JSON.stringify(s);return c.useEffect((function(){return u(JSON.parse(l),{replace:n,state:r,relative:i})}),[u,l,i,n,r]),null}function Me(e){return function(e){var t=c.useContext(me).outlet;return t?c.createElement(_e.Provider,{value:e},t):t}(e.context)}function Ue(e){P(!1)}function Fe(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,i=void 0===r?null:r,a=e.location,o=e.navigationType,u=void 0===o?s.Pop:o,l=e.navigator,f=e.static,h=void 0!==f&&f;ge()&&P(!1);var d=n.replace(/^\/*/,"/"),p=c.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof a&&(a=M(a));var v=a,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,E=v.key,I=void 0===E?"default":E,S=c.useMemo((function(){var e=J(y,d);return null==e?null:{location:{pathname:e,search:k,hash:w,state:x,key:I},navigationType:u}}),[d,y,k,w,x,I,u]);return null==S?null:c.createElement(pe.Provider,{value:p},c.createElement(ve.Provider,{children:i,value:S}))}function je(e){var t=e.children,n=e.location;return Ee(Be(t),n)}var Ve=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(Ve||{}),ze=new Promise((function(){}));c.Component;function Be(e,t){void 0===t&&(t=[]);var n=[];return c.Children.forEach(e,(function(e,r){if(c.isValidElement(e)){var i=[].concat(h(t),[r]);if(e.type!==c.Fragment){e.type!==Ue&&P(!1),e.props.index&&e.props.children&&P(!1);var a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Be(e.props.children,i)),n.push(a)}else n.push.apply(n,Be(e.props.children,i))}})),n}function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}function Ke(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Ge=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var He=l.startTransition;function We(e){var t,n=e.basename,r=e.children,i=e.future,a=e.window,o=c.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),U((function(e,t){var n=e.location;return D("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var s=o.current,l=u(c.useState({action:s.action,location:s.location}),2),f=l[0],h=l[1],d=(i||{}).v7_startTransition,p=c.useCallback((function(e){d&&He?He((function(){return h(e)})):h(e)}),[h,d]);return c.useLayoutEffect((function(){return s.listen(p)}),[s,p]),c.createElement(Fe,{basename:n,children:r,location:f.location,navigationType:f.action,navigator:s})}var Qe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$e=c.forwardRef((function(e,t){var n,r=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,u=e.state,s=e.target,l=e.to,f=e.preventScrollReset,h=Ke(e,Ge),d=c.useContext(pe).basename,p=!1;if("string"===typeof l&&Ye.test(l)&&(n=l,Qe))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=J(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(b){}var g=function(e,t){var n=(void 0===t?{}:t).relative;ge()||P(!1);var r=c.useContext(pe),i=r.basename,a=r.navigator,o=xe(e,{relative:n}),u=o.hash,s=o.pathname,l=o.search,f=s;return"/"!==i&&(f="/"===s?i:ne([i,s])),a.createHref({pathname:f,search:l,hash:u})}(l,{relative:i}),k=function(e,t){var n=void 0===t?{}:t,r=n.target,i=n.replace,a=n.state,o=n.preventScrollReset,u=n.relative,s=we(),l=ke(),f=xe(e,{relative:u});return c.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();var n=void 0!==i?i:L(l)===L(f);s(e,{replace:n,state:a,preventScrollReset:o,relative:u})}}),[l,s,f,i,a,r,e,o,u])}(l,{replace:o,state:u,target:s,preventScrollReset:f,relative:i});return c.createElement("a",qe({},h,{href:n||g,onClick:p||a?r:function(e){r&&r(e),e.defaultPrevented||k(e)},ref:t,target:s}))}));var Xe,Je;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Xe||(Xe={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Je||(Je={}));function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ze.apply(this,arguments)}function et(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=et(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var tt=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=et(e))&&(r&&(r+=" "),r+=t);return r},nt={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function rt(e){var t=typeof e;return"string"===t||"number"===t?nt[e]||e:""}var it=function(e,t){return e&&t},at=function(e,t){return e&&!0!==e&&e+" "+t},ot=function(e,t){return e&&(!0===e?t:e+" "+t)},ut=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},st=function(e){return"justified"===e?"justified":at(e,"aligned")},ct=function(e){return at(e,"aligned")},lt=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var r=typeof e;return"string"!==r&&"number"!==r||!t?rt(e):rt(e)+" "+t},ft=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})};var ht=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var a=n();if(a)return a}return t.href?"a":i.as||"div"};var dt=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var pt=function(){this.__data__=[],this.size=0};var vt=function(e,t){return e===t||e!==e&&t!==t};var mt=function(e,t){for(var n=e.length;n--;)if(vt(e[n][0],t))return n;return-1},yt=Array.prototype.splice;var gt=function(e){var t=this.__data__,n=mt(t,e);return!(n<0)&&(n==t.length-1?t.pop():yt.call(t,n,1),--this.size,!0)};var kt=function(e){var t=this.__data__,n=mt(t,e);return n<0?void 0:t[n][1]};var bt=function(e){return mt(this.__data__,e)>-1};var wt=function(e,t){var n=this.__data__,r=mt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function _t(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_t.prototype.clear=pt,_t.prototype.delete=gt,_t.prototype.get=kt,_t.prototype.has=bt,_t.prototype.set=wt;var xt=_t;var Et=function(){this.__data__=new xt,this.size=0};var It=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var St=function(e){return this.__data__.get(e)};var Tt=function(e){return this.__data__.has(e)},Ct="object"==typeof global&&global&&global.Object===Object&&global,Nt="object"==typeof self&&self&&self.Object===Object&&self,At=Ct||Nt||Function("return this")(),Pt=At.Symbol,Rt=Object.prototype,Ot=Rt.hasOwnProperty,Dt=Rt.toString,Lt=Pt?Pt.toStringTag:void 0;var Mt=function(e){var t=Ot.call(e,Lt),n=e[Lt];try{e[Lt]=void 0;var r=!0}catch(a){}var i=Dt.call(e);return r&&(t?e[Lt]=n:delete e[Lt]),i},Ut=Object.prototype.toString;var Ft=function(e){return Ut.call(e)},jt=Pt?Pt.toStringTag:void 0;var Vt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":jt&&jt in Object(e)?Mt(e):Ft(e)};var zt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var Bt=function(e){if(!zt(e))return!1;var t=Vt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},qt=At["__core-js_shared__"],Kt=function(){var e=/[^.]+$/.exec(qt&&qt.keys&&qt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var Gt=function(e){return!!Kt&&Kt in e},Ht=Function.prototype.toString;var Wt=function(e){if(null!=e){try{return Ht.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Qt=/^\[object .+?Constructor\]$/,Yt=Function.prototype,$t=Object.prototype,Xt=Yt.toString,Jt=$t.hasOwnProperty,Zt=RegExp("^"+Xt.call(Jt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var en=function(e){return!(!zt(e)||Gt(e))&&(Bt(e)?Zt:Qt).test(Wt(e))};var tn=function(e,t){return null==e?void 0:e[t]};var nn=function(e,t){var n=tn(e,t);return en(n)?n:void 0},rn=nn(At,"Map"),an=nn(Object,"create");var on=function(){this.__data__=an?an(null):{},this.size=0};var un=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},sn=Object.prototype.hasOwnProperty;var cn=function(e){var t=this.__data__;if(an){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return sn.call(t,e)?t[e]:void 0},ln=Object.prototype.hasOwnProperty;var fn=function(e){var t=this.__data__;return an?void 0!==t[e]:ln.call(t,e)};var hn=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=an&&void 0===t?"__lodash_hash_undefined__":t,this};function dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dn.prototype.clear=on,dn.prototype.delete=un,dn.prototype.get=cn,dn.prototype.has=fn,dn.prototype.set=hn;var pn=dn;var vn=function(){this.size=0,this.__data__={hash:new pn,map:new(rn||xt),string:new pn}};var mn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var yn=function(e,t){var n=e.__data__;return mn(t)?n["string"==typeof t?"string":"hash"]:n.map};var gn=function(e){var t=yn(this,e).delete(e);return this.size-=t?1:0,t};var kn=function(e){return yn(this,e).get(e)};var bn=function(e){return yn(this,e).has(e)};var wn=function(e,t){var n=yn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function _n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_n.prototype.clear=vn,_n.prototype.delete=gn,_n.prototype.get=kn,_n.prototype.has=bn,_n.prototype.set=wn;var xn=_n;var En=function(e,t){var n=this.__data__;if(n instanceof xt){var r=n.__data__;if(!rn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new xn(r)}return n.set(e,t),this.size=n.size,this};function In(e){var t=this.__data__=new xt(e);this.size=t.size}In.prototype.clear=Et,In.prototype.delete=It,In.prototype.get=St,In.prototype.has=Tt,In.prototype.set=En;var Sn=In;var Tn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Cn=function(e){return this.__data__.has(e)};function Nn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new xn;++t<n;)this.add(e[t])}Nn.prototype.add=Nn.prototype.push=Tn,Nn.prototype.has=Cn;var An=Nn;var Pn=function(e,t){return e.has(t)};var Rn=function(e,t,n,r,i,a){var o=1&n,u=e.length,s=t.length;if(u!=s&&!(o&&s>u))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,d=2&n?new An:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var p=e[f],v=t[f];if(r)var m=o?r(v,p,f,t,e,a):r(p,v,f,e,t,a);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!dt(t,(function(e,t){if(!Pn(d,t)&&(p===e||i(p,e,n,r,a)))return d.push(t)}))){h=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){h=!1;break}}return a.delete(e),a.delete(t),h},On=At.Uint8Array;var Dn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var Ln=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Mn=Pt?Pt.prototype:void 0,Un=Mn?Mn.valueOf:void 0;var Fn=function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new On(e),new On(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return vt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=Dn;case"[object Set]":var s=1&r;if(u||(u=Ln),e.size!=t.size&&!s)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=Rn(u(e),u(t),r,i,a,o);return o.delete(e),l;case"[object Symbol]":if(Un)return Un.call(e)==Un.call(t)}return!1};var jn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},Vn=Array.isArray;var zn=function(e,t,n){var r=t(e);return Vn(e)?r:jn(r,n(e))};var Bn=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var qn=function(){return[]},Kn=Object.prototype.propertyIsEnumerable,Gn=Object.getOwnPropertySymbols,Hn=Gn?function(e){return null==e?[]:(e=Object(e),Bn(Gn(e),(function(t){return Kn.call(e,t)})))}:qn;var Wn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var Qn=function(e){return null!=e&&"object"==typeof e};var Yn=function(e){return Qn(e)&&"[object Arguments]"==Vt(e)},$n=Object.prototype,Xn=$n.hasOwnProperty,Jn=$n.propertyIsEnumerable,Zn=Yn(function(){return arguments}())?Yn:function(e){return Qn(e)&&Xn.call(e,"callee")&&!Jn.call(e,"callee")},er=Zn;var tr=function(){return!1},nr="object"==typeof exports&&exports&&!exports.nodeType&&exports,rr=nr&&"object"==typeof module&&module&&!module.nodeType&&module,ir=rr&&rr.exports===nr?At.Buffer:void 0,ar=(ir?ir.isBuffer:void 0)||tr,or=/^(?:0|[1-9]\d*)$/;var ur=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&or.test(e))&&e>-1&&e%1==0&&e<t};var sr=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},cr={};cr["[object Float32Array]"]=cr["[object Float64Array]"]=cr["[object Int8Array]"]=cr["[object Int16Array]"]=cr["[object Int32Array]"]=cr["[object Uint8Array]"]=cr["[object Uint8ClampedArray]"]=cr["[object Uint16Array]"]=cr["[object Uint32Array]"]=!0,cr["[object Arguments]"]=cr["[object Array]"]=cr["[object ArrayBuffer]"]=cr["[object Boolean]"]=cr["[object DataView]"]=cr["[object Date]"]=cr["[object Error]"]=cr["[object Function]"]=cr["[object Map]"]=cr["[object Number]"]=cr["[object Object]"]=cr["[object RegExp]"]=cr["[object Set]"]=cr["[object String]"]=cr["[object WeakMap]"]=!1;var lr=function(e){return Qn(e)&&sr(e.length)&&!!cr[Vt(e)]};var fr=function(e){return function(t){return e(t)}},hr="object"==typeof exports&&exports&&!exports.nodeType&&exports,dr=hr&&"object"==typeof module&&module&&!module.nodeType&&module,pr=dr&&dr.exports===hr&&Ct.process,vr=function(){try{var e=dr&&dr.require&&dr.require("util").types;return e||pr&&pr.binding&&pr.binding("util")}catch(t){}}(),mr=vr&&vr.isTypedArray,yr=mr?fr(mr):lr,gr=Object.prototype.hasOwnProperty;var kr=function(e,t){var n=Vn(e),r=!n&&er(e),i=!n&&!r&&ar(e),a=!n&&!r&&!i&&yr(e),o=n||r||i||a,u=o?Wn(e.length,String):[],s=u.length;for(var c in e)!t&&!gr.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ur(c,s))||u.push(c);return u},br=Object.prototype;var wr=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||br)};var _r=function(e,t){return function(n){return e(t(n))}},xr=_r(Object.keys,Object),Er=Object.prototype.hasOwnProperty;var Ir=function(e){if(!wr(e))return xr(e);var t=[];for(var n in Object(e))Er.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Sr=function(e){return null!=e&&sr(e.length)&&!Bt(e)};var Tr=function(e){return Sr(e)?kr(e):Ir(e)};var Cr=function(e){return zn(e,Tr,Hn)},Nr=Object.prototype.hasOwnProperty;var Ar=function(e,t,n,r,i,a){var o=1&n,u=Cr(e),s=u.length;if(s!=Cr(t).length&&!o)return!1;for(var c=s;c--;){var l=u[c];if(!(o?l in t:Nr.call(t,l)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var d=!0;a.set(e,t),a.set(t,e);for(var p=o;++c<s;){var v=e[l=u[c]],m=t[l];if(r)var y=o?r(m,v,l,t,e,a):r(v,m,l,e,t,a);if(!(void 0===y?v===m||i(v,m,n,r,a):y)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var g=e.constructor,k=t.constructor;g==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof k&&k instanceof k||(d=!1)}return a.delete(e),a.delete(t),d},Pr=nn(At,"DataView"),Rr=nn(At,"Promise"),Or=nn(At,"Set"),Dr=nn(At,"WeakMap"),Lr="[object Map]",Mr="[object Promise]",Ur="[object Set]",Fr="[object WeakMap]",jr="[object DataView]",Vr=Wt(Pr),zr=Wt(rn),Br=Wt(Rr),qr=Wt(Or),Kr=Wt(Dr),Gr=Vt;(Pr&&Gr(new Pr(new ArrayBuffer(1)))!=jr||rn&&Gr(new rn)!=Lr||Rr&&Gr(Rr.resolve())!=Mr||Or&&Gr(new Or)!=Ur||Dr&&Gr(new Dr)!=Fr)&&(Gr=function(e){var t=Vt(e),n="[object Object]"==t?e.constructor:void 0,r=n?Wt(n):"";if(r)switch(r){case Vr:return jr;case zr:return Lr;case Br:return Mr;case qr:return Ur;case Kr:return Fr}return t});var Hr=Gr,Wr="[object Arguments]",Qr="[object Array]",Yr="[object Object]",$r=Object.prototype.hasOwnProperty;var Xr=function(e,t,n,r,i,a){var o=Vn(e),u=Vn(t),s=o?Qr:Hr(e),c=u?Qr:Hr(t),l=(s=s==Wr?Yr:s)==Yr,f=(c=c==Wr?Yr:c)==Yr,h=s==c;if(h&&ar(e)){if(!ar(t))return!1;o=!0,l=!1}if(h&&!l)return a||(a=new Sn),o||yr(e)?Rn(e,t,n,r,i,a):Fn(e,t,s,n,r,i,a);if(!(1&n)){var d=l&&$r.call(e,"__wrapped__"),p=f&&$r.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,m=p?t.value():t;return a||(a=new Sn),i(v,m,n,r,a)}}return!!h&&(a||(a=new Sn),Ar(e,t,n,r,i,a))};var Jr=function e(t,n,r,i,a){return t===n||(null==t||null==n||!Qn(t)&&!Qn(n)?t!==t&&n!==n:Xr(t,n,r,i,e,a))};var Zr=function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var u=n[i];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var s=(u=n[i])[0],c=e[s],l=u[1];if(o&&u[2]){if(void 0===c&&!(s in e))return!1}else{var f=new Sn;if(r)var h=r(c,l,s,e,t,f);if(!(void 0===h?Jr(l,c,3,r,f):h))return!1}}return!0};var ei=function(e){return e===e&&!zt(e)};var ti=function(e){for(var t=Tr(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ei(i)]}return t};var ni=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var ri=function(e){var t=ti(e);return 1==t.length&&t[0][2]?ni(t[0][0],t[0][1]):function(n){return n===e||Zr(n,e,t)}};var ii=function(e){return"symbol"==typeof e||Qn(e)&&"[object Symbol]"==Vt(e)},ai=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oi=/^\w*$/;var ui=function(e,t){if(Vn(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ii(e))||(oi.test(e)||!ai.test(e)||null!=t&&e in Object(t))};function si(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(si.Cache||xn),n}si.Cache=xn;var ci=si;var li=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fi=/\\(\\)?/g,hi=function(e){var t=ci(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(li,(function(e,n,r,i){t.push(r?i.replace(fi,"$1"):n||e)})),t}));var di=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},pi=Pt?Pt.prototype:void 0,vi=pi?pi.toString:void 0;var mi=function e(t){if("string"==typeof t)return t;if(Vn(t))return di(t,e)+"";if(ii(t))return vi?vi.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var yi=function(e){return null==e?"":mi(e)};var gi=function(e,t){return Vn(e)?e:ui(e,t)?[e]:hi(yi(e))};var ki=function(e){if("string"==typeof e||ii(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var bi=function(e,t){for(var n=0,r=(t=gi(t,e)).length;null!=e&&n<r;)e=e[ki(t[n++])];return n&&n==r?e:void 0};var wi=function(e,t,n){var r=null==e?void 0:bi(e,t);return void 0===r?n:r};var _i=function(e,t){return null!=e&&t in Object(e)};var xi=function(e,t,n){for(var r=-1,i=(t=gi(t,e)).length,a=!1;++r<i;){var o=ki(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&sr(i)&&ur(o,i)&&(Vn(e)||er(e))};var Ei=function(e,t){return null!=e&&xi(e,t,_i)};var Ii=function(e,t){return ui(e)&&ei(t)?ni(ki(e),t):function(n){var r=wi(n,e);return void 0===r&&r===t?Ei(n,e):Jr(t,r,3)}};var Si=function(e){return e};var Ti=function(e){return function(t){return null==t?void 0:t[e]}};var Ci=function(e){return function(t){return bi(t,e)}};var Ni=function(e){return ui(e)?Ti(ki(e)):Ci(e)};var Ai=function(e){return"function"==typeof e?e:null==e?Si:"object"==typeof e?Vn(e)?Ii(e[0],e[1]):ri(e):Ni(e)};var Pi=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),u=o.length;u--;){var s=o[e?u:++i];if(!1===n(a[s],s,a))break}return t}}();var Ri=function(e,t){return function(n,r){if(null==n)return n;if(!Sr(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(e,t){return e&&Pi(e,t,Tr)}));var Oi=function(e,t){var n;return Ri(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};var Di=function(e,t,n){if(!zt(n))return!1;var r=typeof t;return!!("number"==r?Sr(n)&&ur(t,n.length):"string"==r&&t in n)&&vt(n[t],e)};var Li=function(e,t,n){var r=Vn(e)?dt:Oi;return n&&Di(e,t,n)&&(t=void 0),r(e,Ai(t,3))},Mi=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length};function Ui(e){var t=e.children,n=e.className,r=e.content,i=e.fluid,a=e.text,o=e.textAlign,u=tt("ui",it(a,"text"),it(i,"fluid"),st(o),"container",n),s=ft(Ui,e),l=ht(Ui,e);return c.createElement(l,Ze({},s,{className:u}),Mi(t)?r:t)}Ui.handledProps=["as","children","className","content","fluid","text","textAlign"],Ui.propTypes={};var Fi=Ui;var ji=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1};var Vi=function(e){return e!==e};var zi=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var Bi=function(e,t,n){return t===t?zi(e,t,n):ji(e,Vi,n)};var qi=function(e,t){return!!(null==e?0:e.length)&&Bi(e,t,0)>-1};var Ki=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var Gi=function(){},Hi=Or&&1/Ln(new Or([,-0]))[1]==1/0?function(e){return new Or(e)}:Gi,Wi=Hi;var Qi=function(e,t,n){var r=-1,i=qi,a=e.length,o=!0,u=[],s=u;if(n)o=!1,i=Ki;else if(a>=200){var c=t?null:Wi(e);if(c)return Ln(c);o=!1,i=Pn,s=new An}else s=t?[]:u;e:for(;++r<a;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,o&&f===f){for(var h=s.length;h--;)if(s[h]===f)continue e;t&&s.push(f),u.push(l)}else i(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u};var Yi=function(e){return e&&e.length?Qi(e):[]},$i=_r(Object.getPrototypeOf,Object),Xi=Function.prototype,Ji=Object.prototype,Zi=Xi.toString,ea=Ji.hasOwnProperty,ta=Zi.call(Object);var na=function(e){if(!Qn(e)||"[object Object]"!=Vt(e))return!1;var t=$i(e);if(null===t)return!0;var n=ea.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Zi.call(n)==ta};var ra=function(e){return"number"==typeof e||Qn(e)&&"[object Number]"==Vt(e)};var ia=function(e){return"string"==typeof e||!Vn(e)&&Qn(e)&&"[object String]"==Vt(e)};var aa=function(e){return!0===e||!1===e||Qn(e)&&"[object Boolean]"==Vt(e)};var oa=function(e){return null==e};function ua(e,t,n,r){if(void 0===r&&(r={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if(oa(n)||aa(n))return null;var i=ia(n),a=ra(n),o=Bt(n),u=c.isValidElement(n),s=na(n),l=i||a||Vn(n);if(!o&&!u&&!s&&!l)return null;var f=r.defaultProps,h=void 0===f?{}:f,d=u&&n.props||s&&n||l&&t(n),p=r.overrideProps,v=void 0===p?{}:p;v=Bt(v)?v(Ze({},h,d)):v;var m=Ze({},h,d,v);if(h.className||v.className||d.className){var y=tt(h.className,v.className,d.className);m.className=Yi(y.split(" ")).join(" ")}if((h.style||v.style||d.style)&&(m.style=Ze({},h.style,d.style,v.style)),oa(m.key)){var g=m.childKey,k=r.autoGenerateKey,b=void 0===k||k;oa(g)?b&&(i||a)&&(m.key=n):(m.key="function"===typeof g?g(m):g,delete m.childKey)}return u?c.cloneElement(n,m):"function"===typeof m.children?m.children(e,Ze({},m,{children:void 0})):l||s?c.createElement(e,m):o?n(e,m,m.children):void 0}function sa(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return ua(e,t,n,r)}}var ca=sa("img",(function(e){return{src:e}})),la=sa("input",(function(e){return{type:e}})),fa=sa("label",(function(e){return{children:e}})),ha=sa("p",(function(e){return{children:e}}));function da(e){var t=e.children,n=e.className,r=e.computer,i=e.color,a=e.floated,o=e.largeScreen,u=e.mobile,s=e.only,l=e.stretched,f=e.tablet,h=e.textAlign,d=e.verticalAlign,p=e.widescreen,v=e.width,m=tt(i,it(l,"stretched"),ut(s,"only"),st(h),at(a,"floated"),ct(d),lt(r,"wide computer"),lt(o,"wide large screen"),lt(u,"wide mobile"),lt(f,"wide tablet"),lt(p,"wide widescreen"),lt(v,"wide"),"column",n),y=ft(da,e),g=ht(da,e);return c.createElement(g,Ze({},y,{className:m}),t)}da.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],da.propTypes={},da.create=sa(da,(function(e){return{children:e}}));var pa=da;function va(e){var t=e.centered,n=e.children,r=e.className,i=e.color,a=e.columns,o=e.divided,u=e.only,s=e.reversed,l=e.stretched,f=e.textAlign,h=e.verticalAlign,d=tt(i,it(t,"centered"),it(o,"divided"),it(l,"stretched"),ut(u,"only"),ut(s,"reversed"),st(f),ct(h),lt(a,"column",!0),"row",r),p=ft(va,e),v=ht(va,e);return c.createElement(v,Ze({},p,{className:d}),n)}va.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],va.propTypes={};var ma=va;function ya(e){var t=e.celled,n=e.centered,r=e.children,i=e.className,a=e.columns,o=e.container,u=e.divided,s=e.doubling,l=e.inverted,f=e.padded,h=e.relaxed,d=e.reversed,p=e.stackable,v=e.stretched,m=e.textAlign,y=e.verticalAlign,g=tt("ui",it(n,"centered"),it(o,"container"),it(s,"doubling"),it(l,"inverted"),it(p,"stackable"),it(v,"stretched"),ot(t,"celled"),ot(u,"divided"),ot(f,"padded"),ot(h,"relaxed"),ut(d,"reversed"),st(m),ct(y),lt(a,"column",!0),"grid",i),k=ft(ya,e),b=ht(ya,e);return c.createElement(b,Ze({},k,{className:g}),r)}ya.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],ya.Column=pa,ya.Row=ma,ya.propTypes={};var ga=ya;function ka(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ba=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},wa={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ba(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new _a;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},_a=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(I(Error)),xa=function(e){return function(e){var t=ba(e);return wa.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ea=function(e){try{return wa.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ia(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ia(e[n],t[n]));return e}var Sa=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Ta=function(){try{return Sa()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/socialweb",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Ea(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ca=function(){var e;return null===(e=Ta())||void 0===e?void 0:e.config},Na=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Aa(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xa(JSON.stringify({alg:"none",type:"JWT"})),xa(JSON.stringify(a)),""].join(".")}function Pa(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ra(){var e,t=null===(e=Ta())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function Oa(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Da(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function La(){var e=Pa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ma(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Ua=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),Fa.prototype.create),a}return y(n)}(I(Error)),Fa=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ja,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ua(n,a,t)}}]),e}();var ja=/\{\$([^}]+)}/g;function Va(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function za(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ba(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(qa(u)&&qa(s)){if(!Ba(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function qa(e){return null!==e&&"object"===typeof e}function Ka(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Ga(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=u(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Ha(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Wa(e,t){var n=new Qa(e,t);return n.subscribe.bind(n)}var Qa=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=T(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ya),void 0===r.error&&(r.error=Ya),void 0===r.complete&&(r.complete=Ya);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ya(){}function $a(e){return e&&e._delegate?e._delegate:e}function Xa(){Xa=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,o=Object.create(a.prototype),u=new P(r||[]);return i(o,"_invoke",{value:T(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var h="suspendedStart",d="suspendedYield",v="executing",m="completed",y={};function g(){}function k(){}function b(){}var w={};c(w,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(R([])));x&&x!==n&&r.call(x,o)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function I(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,u){var s=f(e[i],e,a);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==p(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function T(t,n,r){var i=h;return function(a,o){if(i===v)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=C(u,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=f(t,n,r);if("normal"===c.type){if(i=r.done?m:d,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=f(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(p(t)+" is not iterable")}return k.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:k,configurable:!0}),k.displayName=c(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},I(S.prototype),c(S.prototype,u,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new S(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},I(E),c(E,s,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function Ja(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Za(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ja(a,r,i,o,u,"next",e)}function u(e){Ja(a,r,i,o,u,"throw",e)}o(void 0)}))}}var eo=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),to="[DEFAULT]",no=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Na;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch(c){}var t,n=T(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=T(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=u(i.value,2),c=s[0],l=s[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===to?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to;return this.component?this.component.multipleInstances?e:to:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ro,io,ao=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new no(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),oo=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(io||(io={}));var uo={debug:io.DEBUG,verbose:io.VERBOSE,info:io.INFO,warn:io.WARN,error:io.ERROR,silent:io.SILENT},so=io.INFO,co=(ka(ro={},io.DEBUG,"log"),ka(ro,io.VERBOSE,"log"),ka(ro,io.INFO,"info"),ka(ro,io.WARN,"warn"),ka(ro,io.ERROR,"error"),ro),lo=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=co[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},fo=function(){function e(t){d(this,e),this.name=t,this._logLevel=so,this._logHandler=lo,this._userLogHandler=null,oo.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in io))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?uo[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,io.DEBUG].concat(t)),this._logHandler.apply(this,[this,io.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,io.VERBOSE].concat(t)),this._logHandler.apply(this,[this,io.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,io.INFO].concat(t)),this._logHandler.apply(this,[this,io.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,io.WARN].concat(t)),this._logHandler.apply(this,[this,io.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,io.ERROR].concat(t)),this._logHandler.apply(this,[this,io.ERROR].concat(t))}}]),e}();function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){ka(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vo,mo,yo=function(e,t){return t.some((function(t){return e instanceof t}))};var go=new WeakMap,ko=new WeakMap,bo=new WeakMap,wo=new WeakMap,_o=new WeakMap;var xo={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ko.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return So(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Eo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(mo||(mo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(To(this),n),So(go.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return So(e.apply(To(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[To(this),t].concat(r));return bo.set(a,t.sort?t.sort():[t]),So(a)}}function Io(e){return"function"===typeof e?Eo(e):(e instanceof IDBTransaction&&function(e){if(!ko.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ko.set(e,t)}}(e),yo(e,vo||(vo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,xo):e)}function So(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(So(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&go.set(t,e)})).catch((function(){})),_o.set(t,e),t}(e);if(wo.has(e))return wo.get(e);var t=Io(e);return t!==e&&(wo.set(e,t),_o.set(t,e)),t}var To=function(e){return _o.get(e)};var Co,No,Ao=["get","getKey","getAll","getAllKeys","count"],Po=["put","add","delete","clear"],Ro=new Map;function Oo(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ro.get(t))return Ro.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Po.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ao.includes(n))){var a=function(){var e=Za(Xa().mark((function e(t){var a,o,u,s,c,l,f=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ro.set(t,a),a}}}xo=function(e){return po(po({},e),{},{get:function(t,n,r){return Oo(t,n)||e.get(t,n,r)},has:function(t,n){return!!Oo(t,n)||e.has(t,n)}})}(xo);var Do=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Lo="@firebase/app",Mo="0.9.18",Uo=new fo("@firebase/app"),Fo="[DEFAULT]",jo=(ka(Co={},Lo,"fire-core"),ka(Co,"@firebase/app-compat","fire-core-compat"),ka(Co,"@firebase/analytics","fire-analytics"),ka(Co,"@firebase/analytics-compat","fire-analytics-compat"),ka(Co,"@firebase/app-check","fire-app-check"),ka(Co,"@firebase/app-check-compat","fire-app-check-compat"),ka(Co,"@firebase/auth","fire-auth"),ka(Co,"@firebase/auth-compat","fire-auth-compat"),ka(Co,"@firebase/database","fire-rtdb"),ka(Co,"@firebase/database-compat","fire-rtdb-compat"),ka(Co,"@firebase/functions","fire-fn"),ka(Co,"@firebase/functions-compat","fire-fn-compat"),ka(Co,"@firebase/installations","fire-iid"),ka(Co,"@firebase/installations-compat","fire-iid-compat"),ka(Co,"@firebase/messaging","fire-fcm"),ka(Co,"@firebase/messaging-compat","fire-fcm-compat"),ka(Co,"@firebase/performance","fire-perf"),ka(Co,"@firebase/performance-compat","fire-perf-compat"),ka(Co,"@firebase/remote-config","fire-rc"),ka(Co,"@firebase/remote-config-compat","fire-rc-compat"),ka(Co,"@firebase/storage","fire-gcs"),ka(Co,"@firebase/storage-compat","fire-gcs-compat"),ka(Co,"@firebase/firestore","fire-fst"),ka(Co,"@firebase/firestore-compat","fire-fst-compat"),ka(Co,"fire-js","fire-js"),ka(Co,"firebase","fire-js-all"),Co),Vo=new Map,zo=new Map;function Bo(e,t){try{e.container.addComponent(t)}catch(n){Uo.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function qo(e,t){e.container.addOrOverwriteComponent(t)}function Ko(e){var t=e.name;if(zo.has(t))return Uo.debug("There were multiple attempts to register component ".concat(t,".")),!1;zo.set(t,e);var n,r=T(Vo.values());try{for(r.s();!(n=r.n()).done;){Bo(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Go(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ho(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fo;Go(e,t).clearInstance(n)}function Wo(){zo.clear()}var Qo=(ka(No={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),ka(No,"bad-app-name","Illegal App name: '{$appName}"),ka(No,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ka(No,"app-deleted","Firebase App named '{$appName}' already deleted"),ka(No,"no-options","Need to provide options, when not being deployed to hosting via source."),ka(No,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ka(No,"invalid-log-argument","First argument to `onLog` must be null or a function."),ka(No,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ka(No,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ka(No,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ka(No,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),No),Yo=new Fa("app","Firebase",Qo),$o=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eo("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}]),e}(),Xo="10.3.1";function Jo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Fo,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Yo.create("bad-app-name",{appName:String(i)});if(n||(n=Ca()),!n)throw Yo.create("no-options");var a=Vo.get(i);if(a){if(Ba(n,a.options)&&Ba(r,a.config))return a;throw Yo.create("duplicate-app",{appName:i})}var o,u=new ao(i),s=T(zo.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new $o(n,r,u);return Vo.set(i,l),l}function Zo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fo,t=Vo.get(e);if(!t&&e===Fo&&Ca())return Jo();if(!t)throw Yo.create("no-app",{appName:e});return t}function eu(){return Array.from(Vo.values())}function tu(e){return nu.apply(this,arguments)}function nu(){return(nu=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Vo.has(n)){e.next=6;break}return Vo.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ru(e,t,n){var r,i=null!==(r=jo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Uo.warn(u.join(" "))}Ko(new eo("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function iu(e,t){if(null!==e&&"function"!==typeof e)throw Yo.create("invalid-log-argument");!function(e,t){var n,r=T(oo);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=uo[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:io[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function au(e){var t;t=e,oo.forEach((function(e){e.setLogLevel(t)}))}var ou="firebase-heartbeat-database",uu=1,su="firebase-heartbeat-store",cu=null;function lu(){return cu||(cu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=So(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(So(u.result),e.oldVersion,e.newVersion,So(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(ou,uu,{upgrade:function(e,t){if(0===t)e.createObjectStore(su)}}).catch((function(e){throw Yo.create("idb-open",{originalErrorMessage:e.message})}))),cu}function fu(e){return hu.apply(this,arguments)}function hu(){return hu=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lu();case 3:return n=e.sent,e.next=6,n.transaction(su).objectStore(su).get(vu(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Ua?Uo.warn(e.t0.message):(i=Yo.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Uo.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),hu.apply(this,arguments)}function du(e,t){return pu.apply(this,arguments)}function pu(){return pu=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lu();case 3:return r=e.sent,i=r.transaction(su,"readwrite"),a=i.objectStore(su),e.next=8,a.put(n,vu(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Ua?Uo.warn(e.t0.message):(o=Yo.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Uo.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),pu.apply(this,arguments)}function vu(e){return"".concat(e.name,"!").concat(e.options.appId)}var mu=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new wu(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Za(Xa().mark((function e(){var t,n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=yu(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=yu(),n=gu(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=xa(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function yu(){return(new Date).toISOString().substring(0,10)}function gu(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=T(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),_u(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),_u(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var ku,bu,wu=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ma()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,fu(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",du(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",du(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function _u(e){return xa(JSON.stringify({version:2,heartbeats:e})).length}ku="",Ko(new eo("platform-logger",(function(e){return new Do(e)}),"PRIVATE")),Ko(new eo("heartbeat",(function(e){return new mu(e)}),"PRIVATE")),ru(Lo,Mo,ku),ru(Lo,Mo,"esm2017"),ru("fire-js","");var xu=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Bo(t,new eo("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),tu(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fo;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Bo(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){qo(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Eu=(ka(bu={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ka(bu,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),bu),Iu=new Fa("app-compat","Firebase",Eu);var Su=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Jo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Va(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ru,setLogLevel:au,onLog:iu,apps:null,SDK_VERSION:Xo,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ko(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Iu.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ia(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Va(n,e=e||Fo))throw Iu.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(xu);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ia(n,e)},createSubscribe:Wa,ErrorFactory:Fa,deepExtend:Ia}),n}(),Tu=new fo("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Tu.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Cu=self.firebase.SDK_VERSION;Cu&&Cu.indexOf("LITE")>=0&&Tu.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Nu=Su;!function(e){ru("@firebase/app-compat","0.2.18",e)}();Nu.registerVersion("firebase","10.3.1","app-compat");Nu.initializeApp({apiKey:"AIzaSyC6Ys46MMrZDyXR9uCnhoieLz3xItIF6LI",authDomain:"socialweb-a1b24.firebaseapp.com",projectId:"socialweb-a1b24",storageBucket:"socialweb-a1b24.appspot.com",messagingSenderId:"1028694035262",appId:"1:1028694035262:web:405a12ffbae10c89f3ba6f"});var Au=Nu;function Pu(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g(e,t)}var Ru=function(e,t){var n=-1,r=Sr(e)?Array(e.length):[];return Ri(e,(function(e,i,a){r[++n]=t(e,i,a)})),r};var Ou=function(e,t){return(Vn(e)?di:Ru)(e,Ai(t,3))};var Du=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Lu=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var Mu=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var Uu=function(e,t){return t.length<2?e:bi(e,Mu(t,0,-1))};var Fu=function(e,t,n){t=gi(t,e);var r=null==(e=Uu(e,t))?e:e[ki(Lu(t))];return null==r?void 0:Du(r,e,n)},ju=Math.max;var Vu=function(e,t,n){return t=ju(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=ju(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=n(o),Du(e,this,u)}};var zu=function(e){return function(){return e}},Bu=function(){try{var e=nn(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),qu=Bu?function(e,t){return Bu(e,"toString",{configurable:!0,enumerable:!1,value:zu(t),writable:!0})}:Si,Ku=Date.now;var Gu=function(e){var t=0,n=0;return function(){var r=Ku(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Hu=Gu(qu);var Wu=function(e,t){return Hu(Vu(e,t,Si),e+"")},Qu=Wu(Fu);var Yu=function(e){return void 0===e},$u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=(t=e.call.apply(e,[this].concat(r))||this).constructor,o=a.autoControlledProps,u=a.getAutoControlledStateFromProps,s=Qu(_(t),"getInitialAutoControlledState",t.props)||{},c=o.reduce((function(e,n){return e[n]=function(e,t,n,r){void 0===r&&(r=!1);var i,a=t[e];if(void 0!==a)return a;if(r){var o=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==o)return o;if(n){var u=n[e];if(void 0!==u)return u}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)}(n,t.props,s,!0),e}),{});return t.state=Ze({},s,c,{autoControlledProps:o,getAutoControlledStateFromProps:u}),t}return Pu(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,r=t.getAutoControlledStateFromProps,i=n.reduce((function(t,n){return!Yu(e[n])&&(t[n]=e[n]),t}),{});if(r){var a=r(e,Ze({},t,i),t);return Ze({},i,a)}return i},t.getAutoControlledStateFromProps=function(){return null},t}(c.Component);function Xu(e){var t=e.children,n=e.className,r=e.content,i=tt("header",n),a=ft(Xu,e),o=ht(Xu,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Xu.handledProps=["as","children","className","content"],Xu.propTypes={};var Ju=Xu;var Zu=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n};var es=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),ts=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ns=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var rs=function(e){return(e=yi(e))&&e.replace(ts,es).replace(ns,"")},is=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var as=function(e){return e.match(is)||[]},os=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var us=function(e){return os.test(e)},ss="\\ud800-\\udfff",cs="\\u2700-\\u27bf",ls="a-z\\xdf-\\xf6\\xf8-\\xff",fs="A-Z\\xc0-\\xd6\\xd8-\\xde",hs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ds="["+hs+"]",ps="\\d+",vs="["+cs+"]",ms="["+ls+"]",ys="[^"+ss+hs+ps+cs+ls+fs+"]",gs="(?:\\ud83c[\\udde6-\\uddff]){2}",ks="[\\ud800-\\udbff][\\udc00-\\udfff]",bs="["+fs+"]",ws="(?:"+ms+"|"+ys+")",_s="(?:"+bs+"|"+ys+")",xs="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Es="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Is="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Ss="[\\ufe0e\\ufe0f]?",Ts=Ss+Is+("(?:\\u200d(?:"+["[^"+ss+"]",gs,ks].join("|")+")"+Ss+Is+")*"),Cs="(?:"+[vs,gs,ks].join("|")+")"+Ts,Ns=RegExp([bs+"?"+ms+"+"+xs+"(?="+[ds,bs,"$"].join("|")+")",_s+"+"+Es+"(?="+[ds,bs+ws,"$"].join("|")+")",bs+"?"+ws+"+"+xs,bs+"+"+Es,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ps,Cs].join("|"),"g");var As=function(e){return e.match(Ns)||[]};var Ps=function(e,t,n){return e=yi(e),void 0===(t=n?void 0:t)?us(e)?As(e):as(e):e.match(t)||[]},Rs=RegExp("['\u2019]","g");var Os=function(e){return function(t){return Zu(Ps(rs(t).replace(Rs,"")),e,"")}};var Ds=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Mu(e,t,n)},Ls=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Ms=function(e){return Ls.test(e)};var Us=function(e){return e.split("")},Fs="\\ud800-\\udfff",js="["+Fs+"]",Vs="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",zs="\\ud83c[\\udffb-\\udfff]",Bs="[^"+Fs+"]",qs="(?:\\ud83c[\\udde6-\\uddff]){2}",Ks="[\\ud800-\\udbff][\\udc00-\\udfff]",Gs="(?:"+Vs+"|"+zs+")"+"?",Hs="[\\ufe0e\\ufe0f]?",Ws=Hs+Gs+("(?:\\u200d(?:"+[Bs,qs,Ks].join("|")+")"+Hs+Gs+")*"),Qs="(?:"+[Bs+Vs+"?",Vs,qs,Ks,js].join("|")+")",Ys=RegExp(zs+"(?="+zs+")|"+Qs+Ws,"g");var $s=function(e){return e.match(Ys)||[]};var Xs=function(e){return Ms(e)?$s(e):Us(e)};var Js=function(e){return function(t){t=yi(t);var n=Ms(t)?Xs(t):void 0,r=n?n[0]:t.charAt(0),i=n?Ds(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"),Zs=Os((function(e,t,n){return e+(n?" ":"")+Js(t)}));function ec(e){var t=e.children,n=e.className,r=e.content,i=e.size,a=tt(i,"icons",n),o=ft(ec,e),u=ht(ec,e);return c.createElement(u,Ze({},o,{className:a}),Mi(t)?r:t)}ec.handledProps=["as","children","className","content","size"],ec.propTypes={},ec.defaultProps={as:"i"};var tc=ec,nc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():Qu(t.props,"onClick",e,t.props)},t}Pu(t,e);var n=t.prototype;return n.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return oa(n)?e["aria-hidden"]="true":e["aria-label"]=n,oa(r)||(e["aria-hidden"]=r),e},n.render=function(){var e=this.props,n=e.bordered,r=e.circular,i=e.className,a=e.color,o=e.corner,u=e.disabled,s=e.fitted,l=e.flipped,f=e.inverted,h=e.link,d=e.loading,p=e.name,v=e.rotated,m=e.size,y=tt(a,p,m,it(n,"bordered"),it(r,"circular"),it(u,"disabled"),it(s,"fitted"),it(f,"inverted"),it(h,"link"),it(d,"loading"),ot(o,"corner"),at(l,"flipped"),at(v,"rotated"),"icon",i),g=ft(t,this.props),k=ht(t,this.props),b=this.getIconAriaOptions();return c.createElement(k,Ze({},g,b,{className:y,onClick:this.handleClick}))},t}(c.PureComponent);nc.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],nc.propTypes={},nc.defaultProps={as:"i"},nc.Group=tc,nc.create=sa(nc,(function(e){return{name:e}}));var rc=nc,ic=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Qu(t.props,"onClick",e,t.props)},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,a=e.color,o=e.content,u=e.disabled,s=e.fitted,l=e.header,f=e.icon,h=e.link,d=e.name,p=e.onClick,v=e.position,m=tt(a,v,it(n,"active"),it(u,"disabled"),it(!0===f||f&&!(d||o),"icon"),it(l,"header"),it(h,"link"),ot(s,"fitted"),"item",i),y=ht(t,this.props,(function(){if(p)return"a"})),g=ft(t,this.props);return Mi(r)?c.createElement(y,Ze({},g,{className:m,onClick:this.handleClick}),rc.create(f,{autoGenerateKey:!1}),Mi(o)?Zs(d):o):c.createElement(y,Ze({},g,{className:m,onClick:this.handleClick}),r)},t}(c.Component);function ac(e){var t=e.children,n=e.className,r=e.content,i=e.position,a=tt(i,"menu",n),o=ft(ac,e),u=ht(ac,e);return c.createElement(u,Ze({},o,{className:a}),Mi(t)?r:t)}ic.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],ic.propTypes={},ic.create=sa(ic,(function(e){return{content:e,name:e}})),ac.handledProps=["as","children","className","content","position"],ac.propTypes={};var oc=ac,uc=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),Qu(e,"onClick",n,r),Qu(t.props,"onItemClick",n,r)}}},t}Pu(t,e);var n=t.prototype;return n.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return Ou(t,(function(t,r){return ic.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},n.render=function(){var e=this.props,n=e.attached,r=e.borderless,i=e.children,a=e.className,o=e.color,u=e.compact,s=e.fixed,l=e.floated,f=e.fluid,h=e.icon,d=e.inverted,p=e.pagination,v=e.pointing,m=e.secondary,y=e.size,g=e.stackable,k=e.tabular,b=e.text,w=e.vertical,_=e.widths,x=tt("ui",o,y,it(r,"borderless"),it(u,"compact"),it(f,"fluid"),it(d,"inverted"),it(p,"pagination"),it(v,"pointing"),it(m,"secondary"),it(g,"stackable"),it(b,"text"),it(w,"vertical"),ot(n,"attached"),ot(l,"floated"),ot(h,"icon"),ot(k,"tabular"),at(s,"fixed"),lt(_,"item"),a,"menu"),E=ft(t,this.props),I=ht(t,this.props);return c.createElement(I,Ze({},E,{className:x}),Mi(i)?this.renderItems():i)},t}($u);uc.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],uc.propTypes={},uc.autoControlledProps=["activeIndex"],uc.Header=Ju,uc.Item=ic,uc.Menu=oc,uc.create=sa(uc,(function(e){return{items:e}}));var sc=uc;function cc(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var lc=Object.prototype.hasOwnProperty;var fc=function(e){if(null==e)return!0;if(Sr(e)&&(Vn(e)||"string"==typeof e||"function"==typeof e.splice||ar(e)||yr(e)||er(e)))return!e.length;var t=Hr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(wr(e))return!Ir(e).length;for(var n in e)if(lc.call(e,n))return!1;return!0},hc=Dr&&new Dr,dc=hc?function(e,t){return hc.set(e,t),e}:Si,pc=Object.create,vc=function(){function e(){}return function(t){if(!zt(t))return{};if(pc)return pc(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var mc=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=vc(e.prototype),r=e.apply(n,t);return zt(r)?r:n}};var yc=function(e,t,n){var r=1&t,i=mc(e);return function t(){return(this&&this!==At&&this instanceof t?i:e).apply(r?n:this,arguments)}},gc=Math.max;var kc=function(e,t,n,r){for(var i=-1,a=e.length,o=n.length,u=-1,s=t.length,c=gc(a-o,0),l=Array(s+c),f=!r;++u<s;)l[u]=t[u];for(;++i<o;)(f||i<a)&&(l[n[i]]=e[i]);for(;c--;)l[u++]=e[i++];return l},bc=Math.max;var wc=function(e,t,n,r){for(var i=-1,a=e.length,o=-1,u=n.length,s=-1,c=t.length,l=bc(a-u,0),f=Array(l+c),h=!r;++i<l;)f[i]=e[i];for(var d=i;++s<c;)f[d+s]=t[s];for(;++o<u;)(h||i<a)&&(f[d+n[o]]=e[i++]);return f};var _c=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};var xc=function(){};function Ec(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}Ec.prototype=vc(xc.prototype),Ec.prototype.constructor=Ec;var Ic=Ec,Sc=hc?function(e){return hc.get(e)}:Gi,Tc={},Cc=Object.prototype.hasOwnProperty;var Nc=function(e){for(var t=e.name+"",n=Tc[t],r=Cc.call(Tc,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t};function Ac(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Ac.prototype=vc(xc.prototype),Ac.prototype.constructor=Ac;var Pc=Ac;var Rc=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Oc=function(e){if(e instanceof Ic)return e.clone();var t=new Pc(e.__wrapped__,e.__chain__);return t.__actions__=Rc(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Dc=Object.prototype.hasOwnProperty;function Lc(e){if(Qn(e)&&!Vn(e)&&!(e instanceof Ic)){if(e instanceof Pc)return e;if(Dc.call(e,"__wrapped__"))return Oc(e)}return new Pc(e)}Lc.prototype=xc.prototype,Lc.prototype.constructor=Lc;var Mc=Lc;var Uc=function(e){var t=Nc(e),n=Mc[t];if("function"!=typeof n||!(t in Ic.prototype))return!1;if(e===n)return!0;var r=Sc(n);return!!r&&e===r[0]},Fc=Gu(dc),jc=/\{\n\/\* \[wrapped with (.+)\] \*/,Vc=/,? & /;var zc=function(e){var t=e.match(jc);return t?t[1].split(Vc):[]},Bc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var qc=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Bc,"{\n/* [wrapped with "+t+"] */\n")};var Kc=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Gc=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var Hc=function(e,t){return Kc(Gc,(function(n){var r="_."+n[0];t&n[1]&&!qi(e,r)&&e.push(r)})),e.sort()};var Wc=function(e,t,n){var r=t+"";return Hu(e,qc(r,Hc(zc(r),n)))};var Qc=function(e,t,n,r,i,a,o,u,s,c){var l=8&t;t|=l?32:64,4&(t&=~(l?64:32))||(t&=-4);var f=[e,t,i,l?a:void 0,l?o:void 0,l?void 0:a,l?void 0:o,u,s,c],h=n.apply(void 0,f);return Uc(e)&&Fc(h,f),h.placeholder=r,Wc(h,e,t)};var Yc=function(e){return e.placeholder},$c=Math.min;var Xc=function(e,t){for(var n=e.length,r=$c(t.length,n),i=Rc(e);r--;){var a=t[r];e[r]=ur(a,n)?i[a]:void 0}return e},Jc="__lodash_placeholder__";var Zc=function(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==Jc||(e[n]=Jc,a[i++]=n)}return a};var el=function e(t,n,r,i,a,o,u,s,c,l){var f=128&n,h=1&n,d=2&n,p=24&n,v=512&n,m=d?void 0:mc(t);return function y(){for(var g=arguments.length,k=Array(g),b=g;b--;)k[b]=arguments[b];if(p)var w=Yc(y),_=_c(k,w);if(i&&(k=kc(k,i,a,p)),o&&(k=wc(k,o,u,p)),g-=_,p&&g<l){var x=Zc(k,w);return Qc(t,n,e,y.placeholder,r,k,x,s,c,l-g)}var E=h?r:this,I=d?E[t]:t;return g=k.length,s?k=Xc(k,s):v&&g>1&&k.reverse(),f&&c<g&&(k.length=c),this&&this!==At&&this instanceof y&&(I=m||mc(I)),I.apply(E,k)}};var tl=function(e,t,n){var r=mc(e);return function i(){for(var a=arguments.length,o=Array(a),u=a,s=Yc(i);u--;)o[u]=arguments[u];var c=a<3&&o[0]!==s&&o[a-1]!==s?[]:Zc(o,s);return(a-=c.length)<n?Qc(e,t,el,i.placeholder,void 0,o,c,void 0,void 0,n-a):Du(this&&this!==At&&this instanceof i?r:e,this,o)}};var nl=function(e,t,n,r){var i=1&t,a=mc(e);return function t(){for(var o=-1,u=arguments.length,s=-1,c=r.length,l=Array(c+u),f=this&&this!==At&&this instanceof t?a:e;++s<c;)l[s]=r[s];for(;u--;)l[s++]=arguments[++o];return Du(f,i?n:this,l)}},rl="__lodash_placeholder__",il=128,al=Math.min;var ol=function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==il&&8==n||r==il&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var s=e[3];e[3]=s?kc(s,u,t[4]):u,e[4]=s?Zc(e[3],rl):t[4]}return(u=t[5])&&(s=e[5],e[5]=s?wc(s,u,t[6]):u,e[6]=s?Zc(e[5],rl):t[6]),(u=t[7])&&(e[7]=u),r&il&&(e[8]=null==e[8]?t[8]:al(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},ul=/\s/;var sl=function(e){for(var t=e.length;t--&&ul.test(e.charAt(t)););return t},cl=/^\s+/;var ll=function(e){return e?e.slice(0,sl(e)+1).replace(cl,""):e},fl=/^[-+]0x[0-9a-f]+$/i,hl=/^0b[01]+$/i,dl=/^0o[0-7]+$/i,pl=parseInt;var vl=function(e){if("number"==typeof e)return e;if(ii(e))return NaN;if(zt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=zt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ll(e);var n=hl.test(e);return n||dl.test(e)?pl(e.slice(2),n?2:8):fl.test(e)?NaN:+e},ml=1/0;var yl=function(e){return e?(e=vl(e))===ml||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};var gl=function(e){var t=yl(e),n=t%1;return t===t?n?t-n:t:0},kl=Math.max;var bl=function(e,t,n,r,i,a,o,u){var s=2&t;if(!s&&"function"!=typeof e)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(t&=-97,r=i=void 0),o=void 0===o?o:kl(gl(o),0),u=void 0===u?u:gl(u),c-=i?i.length:0,64&t){var l=r,f=i;r=i=void 0}var h=s?void 0:Sc(e),d=[e,t,n,r,i,l,f,a,o,u];if(h&&ol(d,h),e=d[0],t=d[1],n=d[2],r=d[3],i=d[4],!(u=d[9]=void 0===d[9]?s?0:e.length:kl(d[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)p=8==t||16==t?tl(e,t,u):32!=t&&33!=t||i.length?el.apply(void 0,d):nl(e,t,n,r);else var p=yc(e,t,n);return Wc((h?dc:Fc)(p,d),e,t)},wl=Wu((function(e,t){var n=Zc(t,Yc(wl));return bl(e,64,void 0,t,n)}));wl.placeholder={};var _l=wl,xl=Math.max,El=Math.min;var Il=function(e,t,n){return e>=El(t,n)&&e<xl(t,n)};var Sl=function(e,t,n){return t=yl(t),void 0===n?(n=t,t=0):n=yl(n),e=vl(e),Il(e,t,n)};var Tl=function(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n};var Cl=function(e,t,n){var r=Vn(e)?Zu:Tl,i=arguments.length<3;return r(e,Ai(t,4),n,i,Ri)},Nl=n(854),Al=n.n(Nl),Pl=n(613),Rl=n.n(Pl),Ol=n(775),Dl=n.n(Ol),Ll=Ol.instance,Ml="object"===typeof document&&null!==document,Ul="object"===typeof window&&null!==window&&window.self===window,Fl=function e(){return oa(e.override)?Ml&&Ul:e.override};var jl=function(e,t){return di(t,(function(t){return e[t]}))};var Vl=function(e){return null==e?[]:jl(e,Tr(e))},zl=Math.max;var Bl=function(e,t,n,r){e=Sr(e)?e:Vl(e),n=n&&!r?gl(n):0;var i=e.length;return n<0&&(n=zl(i+n,0)),ia(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Bi(e,t,n)>-1};var ql=function(e){return"function"==typeof e?e:Si};var Kl=function(e,t){return(Vn(e)?Kc:Ri)(e,ql(t))},Gl=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],Hl=[].concat(Gl,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),Wl=["alt","height","src","srcSet","width","loading"],Ql=function(e,t){void 0===t&&(t={});var n=t,r=n.htmlProps,i=void 0===r?Hl:r,a=n.includeAria,o=void 0===a||a,u={},s={};return Kl(e,(function(e,t){var n=o&&(/^aria-.*$/.test(t)||"role"===t);(Bl(i,t)||n?u:s)[t]=e})),[u,s]},Yl=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)},$l=function(e){return null!==e&&"object"===typeof e&&e.hasOwnProperty("current")},Xl=n(33);var Jl=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}Pu(n,e);var r=n.prototype;return r.componentDidMount=function(){var e=t.findDOMNode(this);this.prevNode=e,Yl(this.props.innerRef,e)},r.componentDidUpdate=function(e){var n=t.findDOMNode(this);this.prevNode!==n&&(this.prevNode=n,Yl(this.props.innerRef,n)),e.innerRef!==this.props.innerRef&&Yl(this.props.innerRef,n)},r.componentWillUnmount=function(){Yl(this.props.innerRef,null),delete this.prevNode},r.render=function(){return this.props.children},n}(c.Component),Zl=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;Yl(r.ref,e),Yl(i,e),t.currentNode=e},t}Pu(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&Yl(this.props.innerRef,this.currentNode)},n.componentWillUnmount=function(){delete this.currentNode},n.render=function(){var e=this.props.children;return c.cloneElement(e,{ref:this.handleRefOverride})},t}(c.Component),ef=["children","innerRef"],tf=function(e){var t=e.children,n=e.innerRef,r=cc(e,ef),i=c.Children.only(t),a=Xl.isForwardRef(i)?Zl:Jl,o=i&&r&&Object.keys(r).length>0?c.cloneElement(i,r):i;return c.createElement(a,{innerRef:n},o)};var nf=function(e){return e&&e.length?e[0]:void 0},rf=function(e,t){if(Li([t,e],oa))return!1;if(t.target&&(Qu(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return Qu(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,r=t.clientY;if(Li([n,r],oa))return!1;var i=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!i||!i.length)return!1;var a=nf(i),o=a.top,u=a.bottom,s=a.left,c=a.right;return!Li([o,u,s,c],oa)&&(Sl(r,o,u+.001)&&Sl(n,s,c+.001))},af=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){Yl(t.props.innerRef,e)},t}Pu(n,e);var r=n.prototype;return r.componentDidMount=function(){Qu(this.props,"onMount",null,this.props)},r.componentWillUnmount=function(){Qu(this.props,"onUnmount",null,this.props)},r.render=function(){if(!Fl())return null;var e=this.props,n=e.children,r=e.mountNode,i=void 0===r?document.body:r;return(0,t.createPortal)(c.createElement(tf,{innerRef:this.handleRef},n),i)},n}(c.Component);af.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],af.propTypes={};var of=af,uf=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).contentRef=c.createRef(),t.triggerRef=c.createRef(),t.latestDocumentMouseDownEvent=null,t.handleDocumentMouseDown=function(e){t.latestDocumentMouseDownEvent=e},t.handleDocumentClick=function(e){var n=t.props.closeOnDocumentClick,r=t.latestDocumentMouseDownEvent;t.latestDocumentMouseDownEvent=null,!t.contentRef.current||rf(t.triggerRef.current,e)||r&&rf(t.contentRef.current,r)||rf(t.contentRef.current,e)||n&&t.close(e)},t.handleEscape=function(e){t.props.closeOnEscape&&Al().getCode(e)===Al().Escape&&t.close(e)},t.handlePortalMouseLeave=function(e){var n=t.props,r=n.closeOnPortalMouseLeave,i=n.mouseLeaveDelay;r&&e.target===t.contentRef.current&&(t.mouseLeaveTimer=t.closeWithTimeout(e,i))},t.handlePortalMouseEnter=function(){t.props.closeOnPortalMouseLeave&&clearTimeout(t.mouseLeaveTimer)},t.handleTriggerBlur=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerBlur,a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];Qu.apply(void 0,[r,"props.onBlur",e].concat(o));var s=e.relatedTarget||document.activeElement,c=Qu(t.contentRef.current,"contains",s);i&&!c&&t.close(e)},t.handleTriggerClick=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerClick,a=n.openOnTriggerClick,o=t.state.open,u=arguments.length,s=new Array(u>1?u-1:0),c=1;c<u;c++)s[c-1]=arguments[c];Qu.apply(void 0,[r,"props.onClick",e].concat(s)),o&&i?t.close(e):!o&&a&&t.open(e)},t.handleTriggerFocus=function(e){for(var n=t.props,r=n.trigger,i=n.openOnTriggerFocus,a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];Qu.apply(void 0,[r,"props.onFocus",e].concat(o)),i&&t.open(e)},t.handleTriggerMouseLeave=function(e){clearTimeout(t.mouseEnterTimer);for(var n=t.props,r=n.trigger,i=n.closeOnTriggerMouseLeave,a=n.mouseLeaveDelay,o=arguments.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=arguments[s];Qu.apply(void 0,[r,"props.onMouseLeave",e].concat(u)),i&&(t.mouseLeaveTimer=t.closeWithTimeout(e,a))},t.handleTriggerMouseEnter=function(e){clearTimeout(t.mouseLeaveTimer);for(var n=t.props,r=n.trigger,i=n.mouseEnterDelay,a=n.openOnTriggerMouseEnter,o=arguments.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=arguments[s];Qu.apply(void 0,[r,"props.onMouseEnter",e].concat(u)),a&&(t.mouseEnterTimer=t.openWithTimeout(e,i))},t.open=function(e){Qu(t.props,"onOpen",e,Ze({},t.props,{open:!0})),t.setState({open:!0})},t.openWithTimeout=function(e,n){var r=Ze({},e);return setTimeout((function(){return t.open(r)}),n||0)},t.close=function(e){t.setState({open:!1}),Qu(t.props,"onClose",e,Ze({},t.props,{open:!1}))},t.closeWithTimeout=function(e,n){var r=Ze({},e);return setTimeout((function(){return t.close(r)}),n||0)},t.handleMount=function(){Qu(t.props,"onMount",null,t.props)},t.handleUnmount=function(){Qu(t.props,"onUnmount",null,t.props)},t.handleTriggerRef=function(e){t.triggerRef.current=e,Yl(t.props.triggerRef,e)},t}Pu(t,e);var n=t.prototype;return n.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},n.render=function(){var e=this.props,t=e.children,n=e.eventPool,r=e.mountNode,i=e.trigger,a=this.state.open;return c.createElement(c.Fragment,null,a&&c.createElement(c.Fragment,null,c.createElement(of,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},t),c.createElement(Dl(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),c.createElement(Dl(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),c.createElement(Dl(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),c.createElement(Dl(),{name:"click",on:this.handleDocumentClick,pool:n}),c.createElement(Dl(),{name:"keydown",on:this.handleEscape,pool:n})),i&&c.createElement(tf,{innerRef:this.handleTriggerRef},c.cloneElement(i,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},t}($u);uf.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],uf.propTypes={},uf.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},uf.autoControlledProps=["open"],uf.Inner=of;var sf=uf;function cf(e){var t=e.blurring,n=e.className,r=e.children,i=e.content,a=e.dimmed,o=tt(it(t,"blurring"),it(a,"dimmed"),"dimmable",n),u=ft(cf,e),s=ht(cf,e);return c.createElement(s,Ze({},u,{className:o}),Mi(r)?i:r)}cf.handledProps=["as","blurring","children","className","content","dimmed"],cf.propTypes={};var lf=cf,ff=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).containerRef=(0,c.createRef)(),t.contentRef=(0,c.createRef)(),t.handleClick=function(e){var n=t.contentRef.current;Qu(t.props,"onClick",e,t.props),n&&n!==e.target&&rf(n,e)||Qu(t.props,"onClickOutside",e,t.props)},t}Pu(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},n.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},n.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},n.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,a=e.content,o=e.disabled,u=e.inverted,s=e.page,l=e.simple,f=e.verticalAlign,h=tt("ui",it(n,"active transition visible"),it(o,"disabled"),it(u,"inverted"),it(s,"page"),it(l,"simple"),ct(f),"dimmer",i),d=ft(t,this.props),p=ht(t,this.props),v=Mi(r)?a:r;return c.createElement(tf,{innerRef:this.containerRef},c.createElement(p,Ze({},d,{className:h,onClick:this.handleClick}),v&&c.createElement("div",{className:"content",ref:this.contentRef},v)))},t}(c.Component);ff.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],ff.propTypes={};var hf=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){Fl()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){Fl()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.page,i=ft(t,this.props);return r?c.createElement(sf,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:n,openOnTriggerClick:!1},c.createElement(ff,Ze({},i,{active:n,page:r}))):c.createElement(ff,Ze({},i,{active:n,page:r}))},t}(c.Component);function df(e){var t=e.children,n=e.className,r=e.content,i=e.size,a=tt("ui",i,n,"images"),o=ft(df,e),u=ht(df,e);return c.createElement(u,Ze({},o,{className:a}),Mi(t)?r:t)}hf.handledProps=["active","page"],hf.propTypes={},hf.Dimmable=lf,hf.Inner=ff,hf.create=sa(hf,(function(e){return{content:e}})),df.handledProps=["as","children","className","content","size"],df.propTypes={};var pf=df;function vf(e){var t=e.avatar,n=e.bordered,r=e.centered,i=e.children,a=e.circular,o=e.className,u=e.content,s=e.dimmer,l=e.disabled,f=e.floated,h=e.fluid,d=e.hidden,p=e.href,v=e.inline,m=e.label,y=e.rounded,g=e.size,k=e.spaced,b=e.verticalAlign,w=e.wrapped,_=e.ui,x=tt(it(_,"ui"),g,it(t,"avatar"),it(n,"bordered"),it(a,"circular"),it(r,"centered"),it(l,"disabled"),it(h,"fluid"),it(d,"hidden"),it(v,"inline"),it(y,"rounded"),ot(k,"spaced"),at(f,"floated"),ct(b),"image",o),E=ft(vf,e),I=Ql(E,{htmlProps:Wl}),S=I[0],T=I[1],C=ht(vf,e,(function(){if(!oa(s)||!oa(m)||!oa(w)||!Mi(i))return"div"}));return Mi(i)?Mi(u)?"img"===C?c.createElement(C,Ze({},T,S,{className:x})):c.createElement(C,Ze({},T,{className:x,href:p}),hf.create(s,{autoGenerateKey:!1}),wf.create(m,{autoGenerateKey:!1}),c.createElement("img",S)):c.createElement(C,Ze({},E,{className:x}),u):c.createElement(C,Ze({},E,{className:x}),i)}vf.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],vf.Group=pf,vf.propTypes={},vf.defaultProps={as:"img",ui:!0},vf.create=sa(vf,(function(e){return{src:e}}));var mf=vf;function yf(e){var t=e.children,n=e.className,r=e.content,i=tt("detail",n),a=ft(yf,e),o=ht(yf,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}yf.handledProps=["as","children","className","content"],yf.propTypes={},yf.create=sa(yf,(function(e){return{content:e}}));var gf=yf;function kf(e){var t=e.children,n=e.circular,r=e.className,i=e.color,a=e.content,o=e.size,u=e.tag,s=tt("ui",i,o,it(n,"circular"),it(u,"tag"),"labels",r),l=ft(kf,e),f=ht(kf,e);return c.createElement(f,Ze({},l,{className:s}),Mi(t)?a:t)}kf.handledProps=["as","children","circular","className","color","content","size","tag"],kf.propTypes={};var bf=kf,wf=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){Qu(e,"onClick",n),Qu(t.props,"onRemove",n,t.props)}}},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.attached,i=e.basic,a=e.children,o=e.circular,u=e.className,s=e.color,l=e.content,f=e.corner,h=e.detail,d=e.empty,p=e.floating,v=e.horizontal,m=e.icon,y=e.image,g=e.onRemove,k=e.pointing,b=e.prompt,w=e.removeIcon,_=e.ribbon,x=e.size,E=e.tag,I=tt("ui",s,(!0===k?"pointing":("left"===k||"right"===k)&&k+" pointing")||("above"===k||"below"===k)&&"pointing "+k,x,it(n,"active"),it(i,"basic"),it(o,"circular"),it(d,"empty"),it(p,"floating"),it(v,"horizontal"),it(!0===y,"image"),it(b,"prompt"),it(E,"tag"),ot(f,"corner"),ot(_,"ribbon"),at(r,"attached"),"label",u),S=ft(t,this.props),T=ht(t,this.props);if(!Mi(a))return c.createElement(T,Ze({},S,{className:I,onClick:this.handleClick}),a);var C=Yu(w)?"delete":w;return c.createElement(T,Ze({className:I,onClick:this.handleClick},S),rc.create(m,{autoGenerateKey:!1}),"boolean"!==typeof y&&mf.create(y,{autoGenerateKey:!1}),l,gf.create(h,{autoGenerateKey:!1}),g&&rc.create(C,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},t}(c.Component);function _f(e){var t=e.children,n=e.className,r=e.content,i=e.hidden,a=e.visible,o=tt(it(a,"visible"),it(i,"hidden"),"content",n),u=ft(_f,e),s=ht(_f,e);return c.createElement(s,Ze({},u,{className:o}),Mi(t)?r:t)}wf.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],wf.propTypes={},wf.Detail=gf,wf.Group=bf,wf.create=sa(wf,(function(e){return{content:e}})),_f.handledProps=["as","children","className","content","hidden","visible"],_f.propTypes={};var xf=_f;function Ef(e){var t=e.attached,n=e.basic,r=e.buttons,i=e.children,a=e.className,o=e.color,u=e.compact,s=e.content,l=e.floated,f=e.fluid,h=e.icon,d=e.inverted,p=e.labeled,v=e.negative,m=e.positive,y=e.primary,g=e.secondary,k=e.size,b=e.toggle,w=e.vertical,_=e.widths,x=tt("ui",o,k,it(n,"basic"),it(u,"compact"),it(f,"fluid"),it(h,"icon"),it(d,"inverted"),it(p,"labeled"),it(v,"negative"),it(m,"positive"),it(y,"primary"),it(g,"secondary"),it(b,"toggle"),it(w,"vertical"),ot(t,"attached"),at(l,"floated"),lt(_),"buttons",a),E=ft(Ef,e),I=ht(Ef,e);return oa(r)?c.createElement(I,Ze({},E,{className:x}),Mi(i)?s:i):c.createElement(I,Ze({},E,{className:x}),Ou(r,(function(e){return Nf.create(e)})))}Ef.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],Ef.propTypes={};var If=Ef;function Sf(e){var t=e.className,n=e.text,r=tt("or",t),i=ft(Sf,e),a=ht(Sf,e);return c.createElement(a,Ze({},i,{className:r,"data-text":n}))}Sf.handledProps=["as","className","text"],Sf.propTypes={};var Tf=Sf,Cf=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,c.createRef)(),t.computeElementType=function(){var e=t.props,n=e.attached,r=e.label;if(!oa(n)||!oa(r))return"div"},t.computeTabIndex=function(e){var n=t.props,r=n.disabled,i=n.tabIndex;return oa(i)?r?-1:"div"===e?0:void 0:i},t.focus=function(e){return Qu(t.ref.current,"focus",e)},t.handleClick=function(e){t.props.disabled?e.preventDefault():Qu(t.props,"onClick",e,t.props)},t.hasIconClass=function(){var e=t.props,n=e.labelPosition,r=e.children,i=e.content,a=e.icon;return!0===a||a&&(n||Mi(r)&&oa(i))},t}Pu(t,e);var n=t.prototype;return n.computeButtonAriaRole=function(e){var t=this.props.role;return oa(t)?"button"!==e?"button":void 0:t},n.render=function(){var e=this.props,n=e.active,r=e.animated,i=e.attached,a=e.basic,o=e.children,u=e.circular,s=e.className,l=e.color,f=e.compact,h=e.content,d=e.disabled,p=e.floated,v=e.fluid,m=e.icon,y=e.inverted,g=e.label,k=e.labelPosition,b=e.loading,w=e.negative,_=e.positive,x=e.primary,E=e.secondary,I=e.size,S=e.toggle,T=e.type,C=tt(l,I,it(n,"active"),it(a,"basic"),it(u,"circular"),it(f,"compact"),it(v,"fluid"),it(this.hasIconClass(),"icon"),it(y,"inverted"),it(b,"loading"),it(w,"negative"),it(_,"positive"),it(x,"primary"),it(E,"secondary"),it(S,"toggle"),ot(r,"animated"),ot(i,"attached")),N=tt(ot(k||!!g,"labeled")),A=tt(it(d,"disabled"),at(p,"floated")),P=ft(t,this.props),R=ht(t,this.props,this.computeElementType),O=this.computeTabIndex(R);if(!oa(g)){var D=tt("ui",C,"button",s),L=tt("ui",N,"button",s,A),M=wf.create(g,{defaultProps:{basic:!0,pointing:"left"===k?"right":"left"},autoGenerateKey:!1});return c.createElement(R,Ze({},P,{className:L,onClick:this.handleClick}),"left"===k&&M,c.createElement(tf,{innerRef:this.ref},c.createElement("button",{className:D,"aria-pressed":S?!!n:void 0,disabled:d,type:T,tabIndex:O},rc.create(m,{autoGenerateKey:!1})," ",h)),("right"===k||!k)&&M)}var U=tt("ui",C,A,N,"button",s),F=!Mi(o),j=this.computeButtonAriaRole(R);return c.createElement(tf,{innerRef:this.ref},c.createElement(R,Ze({},P,{className:U,"aria-pressed":S?!!n:void 0,disabled:d&&"button"===R||void 0,onClick:this.handleClick,role:j,type:T,tabIndex:O}),F&&o,!F&&rc.create(m,{autoGenerateKey:!1}),!F&&h))},t}(c.Component);Cf.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],Cf.propTypes={},Cf.defaultProps={as:"button"},Cf.Content=xf,Cf.Group=If,Cf.Or=Tf,Cf.create=sa(Cf,(function(e){return{content:e}}));var Nf=Cf,Af=function(e){function t(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).inputRef=(0,c.createRef)(),n.computeIcon=function(){var e=n.props,t=e.loading,r=e.icon;return oa(r)?t?"spinner":void 0:r},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return oa(r)?t?-1:void 0:r},n.focus=function(e){return n.inputRef.current.focus(e)},n.select=function(){return n.inputRef.current.select()},n.handleChange=function(e){var t=wi(e,"target.value");Qu(n.props,"onChange",e,Ze({},n.props,{value:t}))},n.handleChildOverrides=function(e,t){return Ze({},t,e.props,{ref:function(t){Yl(e.ref,t),n.inputRef.current=t}})},n.partitionProps=function(){var e=n.props,r=e.disabled,i=e.type,a=n.computeTabIndex(),o=ft(t,n.props),u=Ql(o),s=u[0],c=u[1];return[Ze({},s,{disabled:r,type:i,tabIndex:a,onChange:n.handleChange,ref:n.inputRef}),c]},n}return Pu(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.action,i=n.actionPosition,a=n.children,o=n.className,u=n.disabled,s=n.error,l=n.fluid,f=n.focus,h=n.icon,d=n.iconPosition,p=n.input,v=n.inverted,m=n.label,y=n.labelPosition,g=n.loading,k=n.size,b=n.transparent,w=n.type,_=tt("ui",k,it(u,"disabled"),it(s,"error"),it(l,"fluid"),it(f,"focus"),it(v,"inverted"),it(g,"loading"),it(b,"transparent"),at(i,"action")||it(r,"action"),at(d,"icon")||it(h||g,"icon"),at(y,"labeled")||it(m,"labeled"),"input",o),x=ht(t,this.props),E=this.partitionProps(),I=E[0],S=E[1];if(!Mi(a)){var T=Ou(c.Children.toArray(a),(function(t){return"input"!==t.type?t:(0,c.cloneElement)(t,e.handleChildOverrides(t,I))}));return c.createElement(x,Ze({},S,{className:_}),T)}var C=Nf.create(r,{autoGenerateKey:!1}),N=wf.create(m,{defaultProps:{className:tt("label",Bl(y,"corner")&&y)},autoGenerateKey:!1});return c.createElement(x,Ze({},S,{className:_}),"left"===i&&C,"right"!==y&&N,la(p||w,{defaultProps:I,autoGenerateKey:!1}),rc.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==i&&C,"right"===y&&N)},t}(c.Component);Af.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],Af.propTypes={},Af.defaultProps={type:"text"},Af.create=sa(Af,(function(e){return{type:e}}));var Pf=Af;function Rf(e){var t=e.categoryContent,n=e.resultsContent;return c.createElement(c.Fragment,null,c.createElement("div",{className:"name"},t),c.createElement("div",{className:"results"},n))}Rf.handledProps=["categoryContent","resultsContent"],Rf.propTypes={};var Of=Rf;function Df(e){var t=e.active,n=e.children,r=e.className,i=e.content,a=e.layoutRenderer,o=e.renderer,u=tt(it(t,"active"),"category",r),s=ft(Df,e),l=ht(Df,e),f=o(e),h=Mi(n)?i:n;return c.createElement(l,Ze({},s,{className:u}),a({categoryContent:f,resultsContent:h}))}Df.handledProps=["active","as","children","className","content","layoutRenderer","name","renderer","results"],Df.defaultProps={layoutRenderer:Of,renderer:function(e){return e.name}},Df.propTypes={};var Lf=Df,Mf=function(e){var t=e.image,n=e.price,r=e.title,i=e.description;return[t&&c.createElement("div",{key:"image",className:"image"},ca(t,{autoGenerateKey:!1})),c.createElement("div",{key:"content",className:"content"},n&&c.createElement("div",{className:"price"},n),r&&c.createElement("div",{className:"title"},r),i&&c.createElement("div",{className:"description"},i))]};Mf.handledProps=[];var Uf=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.className,i=e.renderer,a=tt(it(n,"active"),"result",r),o=ft(t,this.props),u=ht(t,this.props);return c.createElement(u,Ze({},o,{className:a,onClick:this.handleClick}),i(this.props))},t}(c.Component);function Ff(e){var t=e.children,n=e.className,r=e.content,i=tt("results transition",n),a=ft(Ff,e),o=ht(Ff,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Uf.handledProps=["active","as","className","content","description","id","image","onClick","price","renderer","title"],Uf.propTypes={},Uf.defaultProps={renderer:Mf},Ff.handledProps=["as","children","className","content"],Ff.propTypes={};var jf=Ff,Vf=function(e){var t=e.input;return Yu(t)?Ze({},e,{input:{className:"prompt"}}):na(t)?Ze({},e,{input:Ze({},t,{className:tt(t.className,"prompt")})}):e},zf=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleResultSelect=function(e,n){Qu(t.props,"onResultSelect",e,Ze({},t.props,{result:n}))},t.handleSelectionChange=function(e){var n=t.getSelectedResult();Qu(t.props,"onSelectionChange",e,Ze({},t.props,{result:n}))},t.closeOnEscape=function(e){Al().getCode(e)===Al().Escape&&(e.preventDefault(),t.close())},t.moveSelectionOnKeyDown=function(e){switch(Al().getCode(e)){case Al().ArrowDown:e.preventDefault(),t.moveSelectionBy(e,1);break;case Al().ArrowUp:e.preventDefault(),t.moveSelectionBy(e,-1)}},t.selectItemOnEnter=function(e){if(Al().getCode(e)===Al().Enter){var n=t.getSelectedResult();n&&(e.preventDefault(),t.setValue(n.title),t.handleResultSelect(e,n),t.close())}},t.closeOnDocumentClick=function(e){t.close()},t.handleMouseDown=function(e){t.isMouseDown=!0,Qu(t.props,"onMouseDown",e,t.props),Ll.sub("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,Ll.unsub("mouseup",t.handleDocumentMouseUp)},t.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),t.tryOpen()},t.handleItemClick=function(e,n){var r=n.id,i=t.getSelectedResult(r);e.nativeEvent.stopImmediatePropagation(),t.setValue(i.title),t.handleResultSelect(e,i),t.close()},t.handleItemMouseDown=function(e){e.preventDefault()},t.handleFocus=function(e){Qu(t.props,"onFocus",e,t.props),t.setState({focus:!0})},t.handleBlur=function(e){Qu(t.props,"onBlur",e,t.props),t.setState({focus:!1})},t.handleSearchChange=function(e){e.stopPropagation();var n=t.props.minCharacters,r=t.state.open,i=e.target.value;Qu(t.props,"onSearchChange",e,Ze({},t.props,{value:i})),i.length<n?t.close():r||t.tryOpen(i),t.setValue(i)},t.getFlattenedResults=function(){var e=t.props,n=e.category,r=e.results;return n?Cl(r,(function(e,t){return e.concat(t.results)}),[]):r},t.getSelectedResult=function(e){void 0===e&&(e=t.state.selectedIndex);var n=t.getFlattenedResults();return wi(n,e)},t.setValue=function(e){var n=t.props.selectFirstResult;t.setState({value:e,selectedIndex:n?0:-1})},t.moveSelectionBy=function(e,n){var r=t.state.selectedIndex,i=t.getFlattenedResults().length-1,a=r+n;a>i?a=0:a<0&&(a=i),t.setState({selectedIndex:a}),t.scrollSelectedItemIntoView(),t.handleSelectionChange(e)},t.scrollSelectedItemIntoView=function(){if(Fl()){var e=document.querySelector(".ui.search.active.visible .results.visible");if(e){var t=e.querySelector(".result.active");if(t){var n=t.offsetTop<e.scrollTop,r=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:r&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},t.tryOpen=function(e){void 0===e&&(e=t.state.value);var n=t.props.minCharacters;e.length<n||t.open()},t.open=function(){t.setState({open:!0})},t.close=function(){t.setState({open:!1})},t.renderSearchInput=function(e){var n=t.props,r=n.icon,i=n.input,a=n.placeholder,o=t.state.value;return Pf.create(i,{autoGenerateKey:!1,defaultProps:Ze({},e,{autoComplete:"off",icon:r,onChange:t.handleSearchChange,onClick:t.handleInputClick,tabIndex:"0",value:o,placeholder:a}),overrideProps:Vf})},t.renderNoResults=function(){var e=t.props,n=e.noResultsDescription,r=e.noResultsMessage;return c.createElement("div",{className:"message empty"},c.createElement("div",{className:"header"},r),n&&c.createElement("div",{className:"description"},n))},t.renderResult=function(e,n,r,i){var a=e.childKey,o=cc(e,["childKey"]);void 0===i&&(i=0);var u=t.props.resultRenderer,s=t.state.selectedIndex,l=n+i;return c.createElement(Uf,Ze({key:null!=a?a:o.id||o.title,active:s===l,onClick:t.handleItemClick,onMouseDown:t.handleItemMouseDown,renderer:u},o,{id:l}))},t.renderResults=function(){var e=t.props.results;return Ou(e,t.renderResult)},t.renderCategories=function(){var e=t.props,n=e.categoryLayoutRenderer,r=e.categoryRenderer,i=e.results,a=t.state.selectedIndex,o=0;return Ou(i,(function(e){var i=e.childKey,u=cc(e,["childKey"]),s=Ze({key:null!=i?i:u.name,active:Sl(a,o,o+u.results.length),layoutRenderer:n,renderer:r},u),l=_l(t.renderResult,o);return o+=u.results.length,c.createElement(Lf,s,u.results.map(l))}))},t.renderMenuContent=function(){var e=t.props,n=e.category,r=e.showNoResults,i=e.results;return fc(i)?r?t.renderNoResults():null:n?t.renderCategories():t.renderResults()},t.renderResultsMenu=function(){var e=t.state.open?"visible":"",n=t.renderMenuContent();if(n)return c.createElement(jf,{className:e},n)},t}Pu(t,e),t.getAutoControlledStateFromProps=function(e,t){if("undefined"!==typeof t.prevValue&&Rl()(t.prevValue,t.value))return{prevValue:t.value};var n=e.selectFirstResult?0:-1;return{prevValue:t.value,selectedIndex:n}};var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!Rl()(e,this.props)||!Rl()(t,this.state)},n.componentDidUpdate=function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&Ll.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),Ll.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),Ll.sub("click",this.closeOnDocumentClick),Ll.sub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),Ll.unsub("click",this.closeOnDocumentClick),Ll.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))},n.componentWillUnmount=function(){Ll.unsub("click",this.closeOnDocumentClick),Ll.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])},n.render=function(){var e=this.state,n=e.searchClasses,r=e.focus,i=e.open,a=this.props,o=a.aligned,u=a.category,s=a.className,l=a.fluid,f=a.loading,h=a.size,d=tt("ui",i&&"active visible",h,n,it(u,"category"),it(r,"focus"),it(l,"fluid"),it(f,"loading"),at(o,"aligned"),"search",s),p=ft(t,this.props),v=ht(t,this.props),m=Ql(p,{htmlProps:Gl}),y=m[0],g=m[1];return c.createElement(v,Ze({},g,{className:d,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(y),this.renderResultsMenu())},t}($u);zf.handledProps=["aligned","as","category","categoryLayoutRenderer","categoryRenderer","className","defaultOpen","defaultValue","fluid","icon","input","loading","minCharacters","noResultsDescription","noResultsMessage","onBlur","onFocus","onMouseDown","onResultSelect","onSearchChange","onSelectionChange","open","placeholder","resultRenderer","results","selectFirstResult","showNoResults","size","value"],zf.propTypes={},zf.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0},zf.autoControlledProps=["open","value"],zf.Category=Lf,zf.Result=Uf,zf.Results=jf;var Bf=n(880),qf=n.n(Bf)()("2HN874FJ0C","58e052366c4b31b93dbf43cae40dbaed").initIndex("SocialWeb");function Kf(){return Kf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Kf.apply(this,arguments)}function Gf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Hf,Wf={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Qf="EMAIL_SIGNIN",Yf="PASSWORD_RESET",$f="RECOVER_EMAIL",Xf="REVERT_SECOND_FACTOR_ADDITION",Jf="VERIFY_AND_CHANGE_EMAIL",Zf="VERIFY_EMAIL";function eh(e){return void 0!==e&&void 0!==e.getResponse}function th(e){return void 0!==e&&void 0!==e.enterprise}var nh=y((function e(t){if(d(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function rh(){return ka({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var ih=function(){var e;return ka(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ka(e,"argument-error",""),ka(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ka(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ka(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ka(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ka(e,"cordova-not-ready","Cordova framework is not ready."),ka(e,"cors-unsupported","This browser is not supported."),ka(e,"credential-already-in-use","This credential is already associated with a different user account."),ka(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ka(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ka(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ka(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ka(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ka(e,"email-already-in-use","The email address is already in use by another account."),ka(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ka(e,"expired-action-code","The action code has expired."),ka(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ka(e,"internal-error","An internal AuthError has occurred."),ka(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ka(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ka(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ka(e,"invalid-auth-event","An internal AuthError has occurred."),ka(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ka(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ka(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ka(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ka(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ka(e,"invalid-email","The email address is badly formatted."),ka(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ka(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ka(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ka(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ka(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ka(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ka(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ka(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ka(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ka(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ka(e,"wrong-password","The password is invalid or the user does not have a password."),ka(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ka(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ka(e,"invalid-provider-id","The specified provider ID is invalid."),ka(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ka(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ka(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ka(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ka(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),ka(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ka(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ka(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ka(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ka(e,"missing-continue-uri","A continue URL must be provided in the request."),ka(e,"missing-iframe-start","An internal AuthError has occurred."),ka(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ka(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ka(e,"missing-password","A non-empty password must be provided"),ka(e,"missing-multi-factor-info","No second factor identifier is provided."),ka(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ka(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ka(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ka(e,"app-deleted","This instance of FirebaseApp has been deleted."),ka(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ka(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ka(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ka(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ka(e,"no-auth-event","An internal AuthError has occurred."),ka(e,"no-such-provider","User was not linked to an account with the given provider."),ka(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ka(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ka(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ka(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ka(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ka(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ka(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ka(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ka(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ka(e,"rejected-credential","The request contains malformed or mismatching credentials."),ka(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ka(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ka(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ka(e,"timeout","The operation has timed out."),ka(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ka(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ka(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ka(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ka(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ka(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ka(e,"unverified-email","The operation requires a verified email."),ka(e,"user-cancelled","The user did not grant your application the permissions it requested."),ka(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ka(e,"user-disabled","The user account has been disabled by an administrator."),ka(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ka(e,"user-signed-out",""),ka(e,"weak-password","The password must be 6 characters long or more."),ka(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ka(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),ka(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),ka(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),ka(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),ka(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),ka(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),ka(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),ka(e,"invalid-req-type","Invalid request parameters."),ka(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),ka(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),ka(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},ah=rh,oh=new Fa("auth","Firebase",rh()),uh=new fo("@firebase/auth");function sh(e){if(uh.logLevel<=io.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uh.warn.apply(uh,["Auth (".concat(Xo,"): ").concat(e)].concat(n))}}function ch(e){if(uh.logLevel<=io.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uh.error.apply(uh,["Auth (".concat(Xo,"): ").concat(e)].concat(n))}}function lh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ph.apply(void 0,[e].concat(n))}function fh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ph.apply(void 0,[e].concat(n))}function hh(e,t,n){var r=Object.assign(Object.assign({},ah()),ka({},t,n));return new Fa("auth","Firebase",r).create(t,{appName:e.name})}function dh(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&lh(e,"argument-error"),hh(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ph(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return oh.create.apply(oh,[e].concat(n))}function vh(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ph.apply(void 0,[t].concat(r))}}function mh(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ch(t),new Error(t)}function yh(e,t){e||mh(t)}function gh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function kh(){return"http:"===bh()||"https:"===bh()}function bh(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var wh=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,yh(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pa())||Da()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(kh()||Oa()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function _h(e,t){yh(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var xh=function(){function e(){d(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void mh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void mh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void mh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Eh=(ka(Hf={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ka(Hf,"MISSING_CUSTOM_TOKEN","internal-error"),ka(Hf,"INVALID_IDENTIFIER","invalid-email"),ka(Hf,"MISSING_CONTINUE_URI","internal-error"),ka(Hf,"INVALID_PASSWORD","wrong-password"),ka(Hf,"MISSING_PASSWORD","missing-password"),ka(Hf,"EMAIL_EXISTS","email-already-in-use"),ka(Hf,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ka(Hf,"INVALID_IDP_RESPONSE","invalid-credential"),ka(Hf,"INVALID_PENDING_TOKEN","invalid-credential"),ka(Hf,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ka(Hf,"MISSING_REQ_TYPE","internal-error"),ka(Hf,"EMAIL_NOT_FOUND","user-not-found"),ka(Hf,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ka(Hf,"EXPIRED_OOB_CODE","expired-action-code"),ka(Hf,"INVALID_OOB_CODE","invalid-action-code"),ka(Hf,"MISSING_OOB_CODE","internal-error"),ka(Hf,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ka(Hf,"INVALID_ID_TOKEN","invalid-user-token"),ka(Hf,"TOKEN_EXPIRED","user-token-expired"),ka(Hf,"USER_NOT_FOUND","user-token-expired"),ka(Hf,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ka(Hf,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),ka(Hf,"INVALID_CODE","invalid-verification-code"),ka(Hf,"INVALID_SESSION_INFO","invalid-verification-id"),ka(Hf,"INVALID_TEMPORARY_PROOF","invalid-credential"),ka(Hf,"MISSING_SESSION_INFO","missing-verification-id"),ka(Hf,"SESSION_EXPIRED","code-expired"),ka(Hf,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ka(Hf,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ka(Hf,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ka(Hf,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ka(Hf,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ka(Hf,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ka(Hf,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ka(Hf,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ka(Hf,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ka(Hf,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ka(Hf,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),ka(Hf,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),ka(Hf,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),ka(Hf,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),ka(Hf,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),ka(Hf,"MISSING_CLIENT_TYPE","missing-client-type"),ka(Hf,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),ka(Hf,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),ka(Hf,"INVALID_REQ_TYPE","invalid-req-type"),Hf),Ih=new wh(3e4,6e4);function Sh(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Th(e,t,n,r){return Ch.apply(this,arguments)}function Ch(){return Ch=Za(Xa().mark((function e(t,n,r,i){var a,o=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Nh(t,a,Za(Xa().mark((function e(){var a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ka(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",xh.fetch()(Oh(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ch.apply(this,arguments)}function Nh(e,t,n){return Ah.apply(this,arguments)}function Ah(){return Ah=Za(Xa().mark((function e(t,n,r){var i,a,o,s,c,l,f,h,d,p;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Eh),n),e.prev=2,a=new Dh(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Lh(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=o.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=u(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Lh(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Lh(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Lh(t,"user-disabled",s);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw hh(t,p,d);case 34:lh(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ua)){e.next=41;break}throw e.t0;case 41:lh(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Ah.apply(this,arguments)}function Ph(e,t,n,r){return Rh.apply(this,arguments)}function Rh(){return Rh=Za(Xa().mark((function e(t,n,r,i){var a,o,u=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Th(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&lh(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Rh.apply(this,arguments)}function Oh(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_h(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Dh=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(fh(n.auth,"network-request-failed"))}),Ih.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Lh(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=fh(e,t,r);return i.customData._tokenResponse=n,i}function Mh(e){return Uh.apply(this,arguments)}function Uh(){return(Uh=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Th(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fh(e,t){return jh.apply(this,arguments)}function jh(){return(jh=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"GET","/v2/recaptchaConfig",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vh(e,t){return zh.apply(this,arguments)}function zh(){return(zh=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bh(e,t){return qh.apply(this,arguments)}function qh(){return(qh=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kh(e,t){return Gh.apply(this,arguments)}function Gh(){return(Gh=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hh(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Wh(){return Wh=Za(Xa().mark((function e(t){var n,r,i,a,o,u,s=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=$a(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,vh((a=Yh(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Hh(Qh(a.auth_time)),issuedAtTime:Hh(Qh(a.iat)),expirationTime:Hh(Qh(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Wh.apply(this,arguments)}function Qh(e){return 1e3*Number(e)}function Yh(e){var t=u(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return ch("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ea(r);return a?JSON.parse(a):(ch("Failed to decode base64 JWT payload"),null)}catch(o){return ch("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function $h(e,t){return Xh.apply(this,arguments)}function Xh(){return Xh=Za(Xa().mark((function e(t,n){var r=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ua&&Jh(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Xh.apply(this,arguments)}function Jh(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Zh=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ed=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Hh(this.lastLoginAt),this.creationTime=Hh(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function td(e){return nd.apply(this,arguments)}function nd(){return(nd=Za(Xa().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,$h(t,Kh(r,{idToken:i}));case 6:vh(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=Gf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=id(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ed(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rd(){return(rd=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$a(t),e.next=3,td(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function id(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function ad(e,t){return od.apply(this,arguments)}function od(){return(od=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nh(t,{},Za(Xa().mark((function e(){var r,i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ka({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Oh(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",xh.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ud=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){vh(e.idToken,"internal-error"),vh("undefined"!==typeof e.idToken,"internal-error"),vh("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Yh(e);return vh(t,"internal-error"),vh("undefined"!==typeof t.exp,"internal-error"),vh("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Za(Xa().mark((function e(t){var n,r=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],vh(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ad(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return mh("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(vh("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(vh("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(vh("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function sd(e,t){vh("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var cd=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Gf(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new ed(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$h(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(vh(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Wh.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return rd.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(vh(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){vh(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,td(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,$h(this,Vh(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;vh(k&&x,t,"internal-error");var E=ud.fromJSON(this.name,x);vh("string"===typeof k,t,"internal-error"),sd(f,t.name),sd(h,t.name),vh("boolean"===typeof b,t,"internal-error"),vh("boolean"===typeof w,t,"internal-error"),sd(d,t.name),sd(p,t.name),sd(v,t.name),sd(m,t.name),sd(y,t.name),sd(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(I._redirectEventId=m),I}},{key:"_fromIdTokenResponse",value:function(){var t=Za(Xa().mark((function t(n,r){var i,a,o,u=arguments;return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ud).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,td(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ld=new Map;function fd(e){yh(e instanceof Function,"Expected a class definition");var t=ld.get(e);return t?(yh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ld.set(e,t),t)}var hd=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();hd.type="NONE";var dd=hd;function pd(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var vd=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=pd(this.userKey,a.apiKey,o),this.fullPersistenceKey=pd("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?cd._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Za(Xa().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(fd(dd),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||fd(dd),u=pd(i,n.config.apiKey,n.name),s=null,c=T(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=cd._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function md(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bd(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yd(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_d(t))return"Blackberry";if(xd(t))return"Webos";if(gd(t))return"Safari";if((t.includes("chrome/")||kd(t))&&!t.includes("edge/"))return"Chrome";if(wd(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function yd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/firefox\//i.test(e)}function gd(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/crios\//i.test(e)}function bd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/iemobile/i.test(e)}function wd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/android/i.test(e)}function _d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/blackberry/i.test(e)}function xd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/webos/i.test(e)}function Ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Id(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return Ed(e)||wd(e)||xd(e)||_d(e)||/windows phone/i.test(e)||bd(e)}function Sd(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=md(Pa());break;case"Worker":t="".concat(md(Pa()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Xo,"/").concat(r)}var Td=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return y(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=T(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=T(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Cd(e){return Nd.apply(this,arguments)}function Nd(){return Nd=Za(Xa().mark((function e(t){var n,r=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Th(t,"GET","/v2/passwordPolicy",Sh(t,n)));case 2:case"end":return e.stop()}}),e)}))),Nd.apply(this,arguments)}var Ad=function(){function e(t){var n,r,i,a;d(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return y(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),Pd=function(){function e(t,n,r,i){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Od(this),this.idTokenSubscription=new Od(this),this.beforeStateQueue=new Td(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=fd(t)),this._initializationPromise=this.queue(Za(Xa().mark((function r(){var i,a;return Xa().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,vd.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return vh(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,td(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?$a(t):null)&&vh(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Za(Xa().mark((function e(t){var n,r=this,i=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&vh(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Za(Xa().mark((function n(){return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(fd(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=Za(Xa().mark((function e(){var t,n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cd(this);case 2:t=e.sent,n=new Ad(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Fa("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return vh(n=t&&fd(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,vd.create(this,[fd(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Za(Xa().mark((function e(t){var n=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(vh(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return vh(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sd(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ka({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Za(Xa().mark((function e(){var t,n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&sh("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Rd(e){return $a(e)}var Od=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=Wa((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return vh(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Dd(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=fh("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ld(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Md=function(){function e(t){d(this,e),this.type="recaptcha-enterprise",this.auth=Rd(t)}return y(e,[{key:"verify",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;th(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Za(Xa().mark((function e(n,r){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fh(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new nh(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&th(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Dd("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ud(e,t,n){return Fd.apply(this,arguments)}function Fd(){return Fd=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Md(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Fd.apply(this,arguments)}function jd(e,t,n){var r=Rd(e);vh(r._canInitEmulator,r,"emulator-config-failed"),vh(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Vd(t),o=function(e){var t=Vd(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:zd(r.substr(a.length+1))}}var o=u(r.split(":"),2);return{host:o[0],port:zd(o[1])}}(t),s=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Vd(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function zd(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Bd=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return mh("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return mh("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return mh("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return mh("not implemented")}}]),e}();function qd(e,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:resetPassword",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gd(e,t){return Hd.apply(this,arguments)}function Hd(){return(Hd=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wd(e,t){return Qd.apply(this,arguments)}function Qd(){return(Qd=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:update",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yd(e,t){return $d.apply(this,arguments)}function $d(){return($d=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ph(t,"POST","/v1/accounts:signInWithPassword",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xd(e,t){return Jd.apply(this,arguments)}function Jd(){return(Jd=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:sendOobCode",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zd(e,t){return ep.apply(this,arguments)}function ep(){return(ep=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tp(e,t){return np.apply(this,arguments)}function np(){return(np=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rp(e,t){return ip.apply(this,arguments)}function ip(){return(ip=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ap(e,t){return op.apply(this,arguments)}function op(){return(op=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xd(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function up(e,t){return sp.apply(this,arguments)}function sp(){return(sp=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ph(t,"POST","/v1/accounts:signInWithEmailLink",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cp(e,t){return lp.apply(this,arguments)}function lp(){return(lp=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ph(t,"POST","/v1/accounts:signInWithEmailLink",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fp=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Ud(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",Yd(t,i));case 11:return e.abrupt("return",Yd(t,r).catch(function(){var e=Za(Xa().mark((function e(n){var i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ud(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",Yd(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",up(t,{email:this._email,oobCode:this._password}));case 13:lh(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Gd(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",cp(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:lh(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Bd);function hp(e,t){return dp.apply(this,arguments)}function dp(){return(dp=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ph(t,"POST","/v1/accounts:signInWithIdp",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pp=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return hp(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hp(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hp(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ka(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):lh("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Gf(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Bd);function vp(e,t){return mp.apply(this,arguments)}function mp(){return(mp=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:sendVerificationCode",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yp(){return(yp=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ph(t,"POST","/v1/accounts:signInWithPhoneNumber",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gp(){return(gp=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ph(t,"POST","/v1/accounts:signInWithPhoneNumber",Sh(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Lh(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kp=ka({},"USER_NOT_FOUND","user-not-found");function bp(){return(bp=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ph(t,"POST","/v1/accounts:signInWithPhoneNumber",Sh(t,r),kp));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wp=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return yp.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return gp.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return bp.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Bd);var _p=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=Ga(Ha(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);vh(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ga(Ha(e)).link,n=t?Ga(Ha(t)).deep_link_id:null,r=Ga(Ha(e)).deep_link_id;return(r?Ga(Ha(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var xp=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return fp._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=_p.parseLink(t);return vh(n,"argument-error"),fp._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();xp.PROVIDER_ID="password",xp.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ep=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ip=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(Ep),Sp=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return vh(e.idToken||e.accessToken,"argument-error"),pp._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return vh("providerId"in t&&"signInMethod"in t,"argument-error"),pp._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ip),Tp=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return pp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ip);Tp.FACEBOOK_SIGN_IN_METHOD="facebook.com",Tp.PROVIDER_ID="facebook.com";var Cp=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return pp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ip);Cp.GOOGLE_SIGN_IN_METHOD="google.com",Cp.PROVIDER_ID="google.com";var Np=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return pp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Ip);Np.GITHUB_SIGN_IN_METHOD="github.com",Np.PROVIDER_ID="github.com";var Ap=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return hp(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,hp(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,hp(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Bd),Pp=function(e){k(n,e);var t=x(n);function n(e){return d(this,n),vh(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Ap.fromJSON(e);return vh(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Ap._create(r,n)}catch(i){return null}}}]),n}(Ep),Rp=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return pp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Ip);function Op(e,t){return Dp.apply(this,arguments)}function Dp(){return(Dp=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ph(t,"POST","/v1/accounts:signUp",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Rp.TWITTER_SIGN_IN_METHOD="twitter.com",Rp.PROVIDER_ID="twitter.com";var Lp=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Za(Xa().mark((function t(n,r,i){var a,o,u,s,c=arguments;return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,cd._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Mp(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Za(Xa().mark((function t(n,r,i){var a;return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Mp(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Mp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Up(){return(Up=Za(Xa().mark((function e(t){var n,r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rd(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Lp({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Op(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Lp._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fp=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(_(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ua);function jp(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Fp._fromErrorAndOperation(e,n,t,r);throw n}))}function Vp(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function zp(e,t){return Bp.apply(this,arguments)}function Bp(){return Bp=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,Gp(!0,r,n);case 3:return e.t0=Bh,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Vp(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function qp(e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=Za(Xa().mark((function e(t,n){var r,i,a=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=$h,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Lp._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Gp(e,t,n){return Hp.apply(this,arguments)}function Hp(){return(Hp=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,td(n);case 2:i=Vp(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",vh(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wp(e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=Za(Xa().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,$h(t,jp(i,a,n,t),r);case 6:return vh((o=e.sent).idToken,i,"internal-error"),vh(u=Yh(o.idToken),i,"internal-error"),s=u.sub,vh(t.uid===s,i,"user-mismatch"),e.abrupt("return",Lp._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&lh(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Qp.apply(this,arguments)}function Yp(e,t){return $p.apply(this,arguments)}function $p(){return $p=Za(Xa().mark((function e(t,n){var r,i,a,o,u=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,jp(t,i,n);case 4:return a=e.sent,e.next=7,Lp._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Xp(e,t){return Jp.apply(this,arguments)}function Jp(){return(Jp=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yp(Rd(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zp(e,t){return ev.apply(this,arguments)}function ev(){return(ev=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,Gp(!1,r,n.providerId);case 3:return e.abrupt("return",qp(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tv(e,t){return nv.apply(this,arguments)}function nv(){return(nv=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wp($a(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return(iv=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ph(t,"POST","/v1/accounts:signInWithCustomToken",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function av(){return(av=Za(Xa().mark((function e(t,n){var r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rd(t),e.next=3,rv(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Lp._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ov=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?uv._fromServerResponse(e,t):"totpInfo"in t?sv._fromServerResponse(e,t):lh(e,"internal-error")}}]),e}(),uv=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ov),sv=function(e){k(n,e);var t=x(n);function n(e){return d(this,n),t.call(this,"totp",e)}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ov);function cv(e,t,n){var r;vh((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),vh("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(vh(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(vh(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function lv(e){return fv.apply(this,arguments)}function fv(){return(fv=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Rd(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hv(){return hv=Za(Xa().mark((function e(t,n,r){var i,a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Rd(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Ud(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&cv(a,u,r),e.next=9,tp(a,u);case 9:e.next=14;break;case 11:return r&&cv(a,o,r),e.next=14,tp(a,o).catch(function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Ud(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&cv(a,n,r),e.next=8,tp(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function dv(){return dv=Za(Xa().mark((function e(t,n,r){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qd($a(t),{oobCode:n,newPassword:r}).catch(function(){var e=Za(Xa().mark((function e(n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&lv(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(){return(pv=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wd($a(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vv(e,t){return mv.apply(this,arguments)}function mv(){return(mv=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,qd(r,{oobCode:n});case 3:i=e.sent,vh(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return vh(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:vh(i.mfaInfo,r,"internal-error");case 13:vh(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ov._fromServerResponse(Rd(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yv(){return(yv=Za(Xa().mark((function e(t,n){var r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vv($a(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gv(e,t,n){return kv.apply(this,arguments)}function kv(){return kv=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s,c,l;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Rd(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Ud(a,o,"signUpPassword");case 5:s=e.sent,u=Op(a,s),e.next=10;break;case 9:u=Op(a,o).catch(function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Ud(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Op(a,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&lv(t),e}));case 12:return c=e.sent,e.next=15,Lp._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function bv(){return bv=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){vh(t.handleCodeInApp,a,"argument-error"),t&&cv(a,e,t)},a=Rd(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Ud(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,rp(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,rp(a,o).catch(function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Ud(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,rp(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),bv.apply(this,arguments)}function wv(){return(wv=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$a(t),vh((a=xp.credentialWithLink(n,r||gh()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Xp(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _v(e,t){return xv.apply(this,arguments)}function xv(){return(xv=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:createAuthUri",Sh(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ev(){return(Ev=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kh()?gh():"http://localhost",i={identifier:n,continueUri:r},e.next=4,_v($a(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iv(){return(Iv=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$a(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&cv(r.auth,a,n),e.next=8,Zd(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sv(){return(Sv=Za(Xa().mark((function e(t,n,r){var i,a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$a(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&cv(i.auth,o,r),e.next=8,ap(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tv(e,t){return Cv.apply(this,arguments)}function Cv(){return(Cv=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Th(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nv(){return(Nv=Za(Xa().mark((function e(t,n){var r,i,a,o,u,s,c;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=$a(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,$h(a,Tv(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Av(e,t,n){return Pv.apply(this,arguments)}function Pv(){return(Pv=Za(Xa().mark((function e(t,n,r){var i,a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,$h(t,Gd(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rv=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ov=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(Rv),Dv=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(Rv),Lv=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}(Ov),Mv=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return y(n)}(Rv),Uv=function(e){k(n,e);var t=x(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}(Ov);function Fv(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Yh(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Rv(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Dv(a,i);case"github.com":return new Lv(a,i);case"google.com":return new Mv(a,i);case"twitter.com":return new Uv(a,i,e.screenName||null);case"custom":case"anonymous":return new Rv(a,null);default:return new Rv(a,r,i)}}(n)}var jv=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.user=r}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:ka({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Vv=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Rd(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ov._fromServerResponse(r,e)}));vh(i.mfaPendingCredential,r,"internal-error");var o=jv._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Za(Xa().mark((function e(t){var a,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Lp._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return vh(n.user,r,"internal-error"),e.abrupt("return",Lp._forOperation(n.user,n.operationType,u));case 17:lh(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function zv(e,t){return Th(e,"POST","/v2/accounts/mfaEnrollment:start",Sh(e,t))}function Bv(e,t){return Th(e,"POST","/v2/accounts/mfaEnrollment:finalize",Sh(e,t))}var qv=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ov._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=jv,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Za(Xa().mark((function e(t,n){var r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,$h(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,$h(this.user,Th(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Sh(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Kv=new WeakMap;var Gv="__sak",Hv=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Gv,"1"),this.storage.removeItem(Gv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Wv=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Pa();return gd(e)||Ed(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Id(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);La()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Za(Xa().mark((function e(t,r){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kf(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Za(Xa().mark((function e(t){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kf(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kf(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Hv);Wv.type="LOCAL";var Qv=Wv,Yv=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Hv);Yv.type="SESSION";var $v=Yv;function Xv(e){return Promise.all(e.map(function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Jv=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i,a,o,u,s,c;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Xv(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Zv(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Jv.receivers=[];var em=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Za(Xa().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Zv("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function tm(){return window}function nm(e){tm().location.href=e}function rm(){return"undefined"!==typeof tm().WorkerGlobalScope&&"function"===typeof tm().importScripts}function im(){return am.apply(this,arguments)}function am(){return(am=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function om(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var um="firebaseLocalStorageDb",sm="firebaseLocalStorage",cm="fbase_key",lm=function(){function e(t){d(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function fm(e,t){return e.transaction([sm],t?"readwrite":"readonly").objectStore(sm)}function hm(){var e=indexedDB.deleteDatabase(um);return new lm(e).toPromise()}function dm(){var e=indexedDB.open(um,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(sm,{keyPath:cm})}catch(r){n(r)}})),e.addEventListener("success",Za(Xa().mark((function n(){var r;return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(sm)){n.next=12;break}return r.close(),n.next=5,hm();case 5:return n.t0=t,n.next=8,dm();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function pm(e,t,n){return vm.apply(this,arguments)}function vm(){return vm=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fm(t,!0).put((ka(i={},cm,n),ka(i,"value",r),i)),e.abrupt("return",new lm(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),vm.apply(this,arguments)}function mm(e,t){return ym.apply(this,arguments)}function ym(){return ym=Za(Xa().mark((function e(t,n){var r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fm(t,!1).get(n),e.next=3,new lm(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function gm(e,t){var n=fm(e,!0).delete(t);return new lm(n).toPromise()}var km=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,dm();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rm()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Za(Xa().mark((function e(){var t=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Jv._getInstance(rm()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Za(Xa().mark((function e(n,r){var i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Za(Xa().mark((function e(){var t,n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,im();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new em(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&om()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,dm();case 5:return t=e.sent,e.next=8,pm(t,Gv,"1");case 8:return e.next=10,gm(t,Gv);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Za(Xa().mark((function e(t,n){var r=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return pm(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return mm(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Za(Xa().mark((function e(t){var n=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return gm(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=fm(e,!1).getAll();return new lm(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=T(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();km.type="LOCAL";var bm=km;function wm(e,t){return Th(e,"POST","/v2/accounts/mfaSignIn:start",Sh(e,t))}function _m(e,t){return Th(e,"POST","/v2/accounts/mfaSignIn:finalize",Sh(e,t))}var xm=1e12,Em=function(){function e(t){d(this,e),this.auth=t,this.counter=xm,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Im(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||xm;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||xm;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||xm,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Im=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;vh(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Sm=Ld("rcb"),Tm=new wh(3e4,6e4),Cm=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=tm().grecaptcha)||void 0===t?void 0:t.render)}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return vh(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&eh(tm().grecaptcha)?Promise.resolve(tm().grecaptcha):new Promise((function(r,i){var a=tm().setTimeout((function(){i(fh(e,"network-request-failed"))}),Tm.get());tm()[Sm]=function(){tm().clearTimeout(a),delete tm()[Sm];var o=tm().grecaptcha;if(o&&eh(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(fh(e,"internal-error"))},Dd("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Ka({onload:Sm,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(fh(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=tm().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var Nm=function(){function e(){d(this,e)}return y(e,[{key:"load",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Em(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Am="recaptcha",Pm={theme:"light",type:"image"},Rm=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Pm);d(this,e),this.parameters=r,this.type=Am,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rd(t),this.isInvisible="invisible"===this.parameters.size,vh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;vh(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Nm:new Cm,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){vh(!this.parameters.sitekey,this.auth,"argument-error"),vh(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),vh("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=tm()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){vh(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Za(Xa().mark((function e(){var t,n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vh(kh()&&!rm(),this.auth,"internal-error"),e.next=3,Om();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Mh(this.auth);case 8:vh(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return vh(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Om(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Dm=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=wp._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Lm(){return(Lm=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rd(t),e.next=3,jm(i,n,$a(r));case 3:return a=e.sent,e.abrupt("return",new Dm(a,(function(e){return Xp(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mm(e,t,n){return Um.apply(this,arguments)}function Um(){return(Um=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$a(t),e.next=3,Gp(!1,i,"phone");case 3:return e.next=5,jm(i.auth,n,$a(r));case 5:return a=e.sent,e.abrupt("return",new Dm(a,(function(e){return Zp(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fm(){return(Fm=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$a(t),e.next=3,jm(i.auth,n,$a(r));case 3:return a=e.sent,e.abrupt("return",new Dm(a,(function(e){return tv(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jm(e,t,n){return Vm.apply(this,arguments)}function Vm(){return(Vm=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,vh("string"===typeof a,t,"argument-error"),vh(r.type===Am,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return vh("enroll"===u.type,t,"internal-error"),e.next=13,zv(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return vh("signin"===u.type,t,"internal-error"),vh(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,wm(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,vp(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])})))).apply(this,arguments)}function zm(){return(zm=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qp($a(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bm=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Rd(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return jm(this.auth,e,$a(t))}}],[{key:"credential",value:function(e,t){return wp._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?wp._fromTokenResponse(n,r):null}}]),e}();function qm(e,t){return t?fd(t):(vh(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Bm.PROVIDER_ID="phone",Bm.PHONE_SIGN_IN_METHOD="phone";var Km=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return hp(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return hp(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return hp(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Bd);function Gm(e){return Yp(e.auth,new Km(e),e.bypassAuthState)}function Hm(e){var t=e.auth,n=e.user;return vh(n,t,"internal-error"),Wp(n,new Km(e),e.bypassAuthState)}function Wm(e){return Qm.apply(this,arguments)}function Qm(){return(Qm=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,vh(r=t.user,n,"internal-error"),e.abrupt("return",qp(r,new Km(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ym=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Za(Xa().mark((function t(n,r){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gm;case"linkViaPopup":case"linkViaRedirect":return Wm;case"reauthViaPopup":case"reauthViaRedirect":return Hm;default:lh(this.auth,"internal-error")}}},{key:"resolve",value:function(e){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){yh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),$m=new wh(2e3,1e4);function Xm(e,t,n){return Jm.apply(this,arguments)}function Jm(){return(Jm=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rd(t),dh(t,n,Ep),a=qm(i,r),o=new ny(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zm(){return(Zm=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dh((i=$a(t)).auth,n,Ep),a=qm(i.auth,r),o=new ny(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ey(e,t,n){return ty.apply(this,arguments)}function ty(){return(ty=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dh((i=$a(t)).auth,n,Ep),a=qm(i.auth,r),o=new ny(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ny=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=_(u),u}return y(n,[{key:"executeNotNull",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return vh(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Za(Xa().mark((function e(){var t,n=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yh(1===this.filter.length,"Popup operations only handle one event"),t=Zv(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(fh(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(fh(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(fh(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,$m.get())}()}}]),n}(Ym);ny.currentPopupAction=null;var ry="pendingRedirect",iy=new Map,ay=function(e){k(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=Za(Xa().mark((function e(){var t,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=iy.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,oy(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Kf(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:iy.set(this.auth._key(),t);case 21:return this.bypassAuthState||iy.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Za(Xa().mark((function e(t){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Kf(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Kf(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ym);function oy(e,t){return uy.apply(this,arguments)}function uy(){return(uy=Za(Xa().mark((function e(t,n){var r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=hy(n),i=fy(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sy(e,t){return cy.apply(this,arguments)}function cy(){return(cy=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fy(t)._set(hy(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ly(e,t){iy.set(e._key(),t)}function fy(e){return fd(e._redirectPersistence)}function hy(e){return pd(ry,e.config.apiKey,e.name)}function dy(e,t,n){return function(e,t,n){return py.apply(this,arguments)}(e,t,n)}function py(){return(py=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rd(t),dh(t,n,Ep),e.next=4,i._initializationPromise;case 4:return a=qm(i,r),e.next=7,sy(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vy(e,t,n){return function(e,t,n){return my.apply(this,arguments)}(e,t,n)}function my(){return(my=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dh((i=$a(t)).auth,n,Ep),e.next=4,i.auth._initializationPromise;case 4:return a=qm(i.auth,r),e.next=7,sy(a,i.auth);case 7:return e.next=9,xy(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yy(e,t,n){return function(e,t,n){return gy.apply(this,arguments)}(e,t,n)}function gy(){return(gy=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dh((i=$a(t)).auth,n,Ep),e.next=4,i.auth._initializationPromise;case 4:return a=qm(i.auth,r),e.next=7,Gp(!1,i,n.providerId);case 7:return e.next=9,sy(a,i.auth);case 9:return e.next=11,xy(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ky(e,t){return by.apply(this,arguments)}function by(){return(by=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rd(t)._initializationPromise;case 2:return e.abrupt("return",wy(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wy(e,t){return _y.apply(this,arguments)}function _y(){return _y=Za(Xa().mark((function e(t,n){var r,i,a,o,u,s=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Rd(t),a=qm(i,n),o=new ay(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function xy(e){return Ey.apply(this,arguments)}function Ey(){return(Ey=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zv("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Iy=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ty(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ty(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(fh(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Sy(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Sy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ty(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Cy(e){return Ny.apply(this,arguments)}function Ny(){return Ny=Za(Xa().mark((function e(t){var n,r=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Th(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}var Ay=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Py=/^https?/;function Ry(){return(Ry=Za(Xa().mark((function e(t){var n,r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Cy(t);case 4:n=e.sent,r=n.authorizedDomains,i=T(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Oy(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:lh(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Oy(e){var t=gh(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Py.test(r))return!1;if(Ay.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Dy=new wh(3e4,6e4);function Ly(){var e=tm().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var My=null;function Uy(e){return My=My||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ly(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ly(),n(fh(e,"network-request-failed"))},timeout:Dy.get()})}if(null===(i=null===(r=tm().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=tm().gapi)||void 0===a?void 0:a.load)){var u=Ld("iframefcb");return tm()[u]=function(){gapi.load?o():n(fh(e,"network-request-failed"))},Dd("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw My=null,e}))}(e),My}var Fy=new wh(5e3,15e3),jy="__/auth/iframe",Vy="emulator/auth/iframe",zy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},By=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qy(e){var t=e.config;vh(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?_h(t,Vy):"https://".concat(e.config.authDomain,"/").concat(jy),r={apiKey:t.apiKey,appName:e.name,v:Xo},i=By.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ka(r).slice(1))}function Ky(e){return Gy.apply(this,arguments)}function Gy(){return Gy=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uy(t);case 2:return n=e.sent,vh(r=tm().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:qy(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zy,dontclear:!0},(function(e){return new Promise(function(){var n=Za(Xa().mark((function n(r,i){var a,o,u;return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){tm().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=fh(t,"network-request-failed"),o=tm().setTimeout((function(){i(a)}),Fy.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Gy.apply(this,arguments)}var Hy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wy=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Qy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},Hy),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Pa().toLowerCase();n&&(s=kd(l)?"_blank":n),yd(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return Ed(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Wy(null);var h=window.open(t||"",s,f);vh(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Wy(h)}var Yy="__/auth/handler",$y="emulator/auth/handler",Xy=encodeURIComponent("fac");function Jy(e,t,n,r,i,a){return Zy.apply(this,arguments)}function Zy(){return(Zy=Za(Xa().mark((function e(t,n,r,i,a,o){var s,c,l,f,h,d,p,v,m,y,g,k,b;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vh(t.config.authDomain,t,"auth-domain-config-required"),vh(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Xo,eventId:a},n instanceof Ep)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",za(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(o||{});c<l.length;c++)f=u(l[c],2),h=f[0],d=f[1],s[h]=d;for(n instanceof Ip&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(Xy,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(eg(t),"?").concat(Ka(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eg(e){var t=e.config;return t.emulator?_h(t,$y):"https://".concat(t.authDomain,"/").concat(Yy)}var tg="webStorageSupport",ng=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$v,this._completeRedirectFn=wy,this._overrideRedirectResult=ly}return y(e,[{key:"_openPopup",value:function(){var e=Za(Xa().mark((function e(t,n,r,i){var a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yh(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,Jy(t,n,r,gh(),i);case 3:return o=e.sent,e.abrupt("return",Qy(t,o,Zv()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Za(Xa().mark((function e(t,n,r,i){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,Jy(t,n,r,gh(),i);case 4:return nm(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(yh(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ky(t);case 2:return n=e.sent,r=new Iy(t),n.register("authEvent",(function(e){return vh(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(tg,{type:tg},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[tg];void 0!==i&&t(!!i),lh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ry.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Id()||gd()||Ed()}}]),e}(),rg=ng,ig=function(){function e(t){d(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return mh("unexpected MultiFactorSessionType")}}}]),e}(),ag=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Th(e,"POST","/v2/accounts/mfaEnrollment:finalize",Sh(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Th(e,"POST","/v2/accounts/mfaSignIn:finalize",Sh(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(ig),og=function(){function e(){d(this,e)}return y(e,null,[{key:"assertion",value:function(e){return ag._fromCredential(e)}}]),e}();og.FACTOR_ID="phone";var ug=function(){function e(){d(this,e)}return y(e,null,[{key:"assertionForEnrollment",value:function(e,t){return sg._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return sg._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vh("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,a=r.user.auth,o={idToken:r.credential,totpEnrollmentInfo:{}},Th(a,"POST","/v2/accounts/mfaEnrollment:start",Sh(a,o));case 4:return i=e.sent,e.abrupt("return",cg._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}var a,o}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();ug.FACTOR_ID="totp";var sg=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return y(n,[{key:"_finalizeEnroll",value:function(){var e=Za(Xa().mark((function e(t,n,r){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vh("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Bv(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vh(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",_m(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(ig),cg=function(){function e(t,n,r,i,a,o,u){d(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return y(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(lg(e)||lg(t))&&(r=!0),r&&(lg(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),lg(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function lg(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var fg="@firebase/auth",hg="1.3.0",dg=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){vh(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var pg;!function(e){var t;null===(t=Ta())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function vg(){return window}pg="Browser",Ko(new eo("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;vh(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:pg,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sd(pg)},l=new Pd(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fd);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ko(new eo("auth-internal",(function(e){return function(e){return new dg(e)}(Rd(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ru(fg,hg,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(pg)),ru(fg,hg,"esm2017");var mg=2e3;function yg(e,t,n){return gg.apply(this,arguments)}function gg(){return(gg=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vg(),o=a.BuildInfo,yh(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Eg(n.sessionId);case 4:return u=e.sent,s={},Ed()?s.ibi=o.packageName:wd()?s.apn=o.packageName:lh(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Jy(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kg(){return(kg=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vg(),r=n.BuildInfo,i={},Ed()?i.iosBundleId=r.packageName:wd()?i.androidPackageName=r.packageName:lh(t,"operation-not-supported-in-this-environment"),e.next=5,Cy(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bg(e){var t=vg().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function wg(e,t,n){return _g.apply(this,arguments)}function _g(){return(_g=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vg(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(fh(t,"redirect-cancelled-by-user"))}),mg))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),wd()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])})))).apply(this,arguments)}function xg(e){var t,n,r,i,a,o,u,s,c,l,f=vg();vh("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),vh("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),vh("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vh("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vh("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Eg(e){return Ig.apply(this,arguments)}function Ig(){return(Ig=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sg(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sg(e){if(yh(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Tg=20,Cg=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Kf(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Iy);function Ng(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Dg(),postBody:null,tenantId:e.tenantId,error:fh(e,"no-auth-event")}}function Ag(e,t){return Lg()._set(Mg(e),t)}function Pg(e){return Rg.apply(this,arguments)}function Rg(){return(Rg=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lg()._get(Mg(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Lg()._remove(Mg(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Og(e,t){var n,r,i=function(e){var t=Ug(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ug(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ug(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Ug(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?fh(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Dg(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Tg;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Lg(){return fd(Qv)}function Mg(e){return pd("authEvent",e.config.apiKey,e.name)}function Ug(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=S(e.split("?"));t[0];return Ga(t.slice(1).join("?"))}var Fg=function(){function e(){d(this,e),this._redirectPersistence=$v,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wy,this._overrideRedirectResult=ly}return y(e,[{key:"_initialize",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Cg(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){lh(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Za(Xa().mark((function e(t,n,r,i){var a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xg(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),iy.clear(),e.next=10,this._originValidation(t);case 10:return o=Ng(t,r,i),e.next=13,Ag(t,o);case 13:return e.next=15,yg(t,o,n);case 15:return u=e.sent,e.next=18,bg(u);case 18:return s=e.sent,e.abrupt("return",wg(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return kg.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=vg(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Za(Xa().mark((function n(){return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pg(e);case 2:t.onEvent(Vg());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Za(Xa().mark((function n(r){var i,a;return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Pg(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Og(i,r.url)),t.onEvent(a||Vg());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");vg().handleOpenURL=function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),jg=Fg;function Vg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:fh("no-auth-event")}}var zg=1e3;function Bg(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function qg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return!("file:"!==Bg()&&"ionic:"!==Bg()&&"capacitor:"!==Bg()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return La()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa();return/Edge\/\d+/.test(e)}(e)}function Gg(){try{var e=self.localStorage,t=Zv();if(e)return e.setItem(t,"1"),e.removeItem(t),!Kg()||Ma()}catch(n){return Hg()&&Ma()}return!1}function Hg(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Wg(){return("http:"===Bg()||"https:"===Bg()||Oa()||qg())&&!(Da()||Ra())&&Gg()&&!Hg()}function Qg(){return qg()&&"undefined"!==typeof document}function Yg(){return $g.apply(this,arguments)}function $g(){return($g=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qg()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),zg);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xg={LOCAL:"local",NONE:"none",SESSION:"session"},Jg=vh,Zg="persistence";function ek(e,t){Jg(Object.values(Xg).includes(t),e,"invalid-persistence-type"),Da()?Jg(t!==Xg.SESSION,e,"unsupported-persistence-type"):Ra()?Jg(t===Xg.NONE,e,"unsupported-persistence-type"):Hg()?Jg(t===Xg.NONE||t===Xg.LOCAL&&Ma(),e,"unsupported-persistence-type"):Jg(t===Xg.NONE||Gg(),e,"unsupported-persistence-type")}function tk(e){return nk.apply(this,arguments)}function nk(){return(nk=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=rk(),r=pd(Zg,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rk(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ik=vh,ak=function(){function e(){d(this,e),this.browserResolver=fd(rg),this.cordovaResolver=fd(jg),this.underlyingResolver=null,this._redirectPersistence=$v,this._completeRedirectFn=wy,this._overrideRedirectResult=ly}return y(e,[{key:"_initialize",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Za(Xa().mark((function e(t,n,r,i){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Za(Xa().mark((function e(t,n,r,i){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Qg()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ik(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Yg();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ok(e){return e.unwrap()}function uk(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new hk(e,function(e,t){var n,r=$a(e),i=t;return vh(t.customData.operationType,r,"argument-error"),vh(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Vv._fromError(r,i)}(e,t));else if(r){var i=sk(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function sk(e){var t=(e instanceof Ua?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ua)&&"temporaryProof"in t&&"phoneNumber"in t)return Bm.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Wf.PASSWORD)return null;switch(r){case Wf.GOOGLE:n=Cp;break;case Wf.FACEBOOK:n=Tp;break;case Wf.GITHUB:n=Np;break;case Wf.TWITTER:n=Rp;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Ap._create(r,u):pp._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Sp(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ua?n.credentialFromError(e):n.credentialFromResult(e)}function ck(e,t){return t.catch((function(t){throw t instanceof Ua&&uk(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,sk(t)),additionalUserInfo:Fv(e),user:dk.getOrCreate(r)}}))}function lk(e,t){return fk.apply(this,arguments)}function fk(){return(fk=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return ck(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hk=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return ck(ok(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),dk=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=$a(e);return Kv.has(t)||Kv.set(t,qv._fromUser(t)),Kv.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ck(this.auth,Zp(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lk(this.auth,Mm(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ck(this.auth,ey(this._delegate,t,ak)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tk(Rd(this.auth));case 2:return e.abrupt("return",yy(this._delegate,t,ak));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ck(this.auth,tv(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return lk(this.auth,function(e,t,n){return Fm.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return ck(this.auth,function(e,t,n){return Zm.apply(this,arguments)}(this._delegate,e,ak))}},{key:"reauthenticateWithRedirect",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tk(Rd(this.auth));case 2:return e.abrupt("return",vy(this._delegate,t,ak));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Iv.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zp(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Av($a(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Av($a(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return zm.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Nv.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Sv.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();dk.USER_MAP=new WeakMap;var pk=vh,vk=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;pk(r,"invalid-api-key",{appName:t.name}),pk(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?ak:void 0;this._delegate=n.initialize({options:{persistence:yk(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ih),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?dk.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){jd(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return pv.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return vv(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return dv.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ck(this._delegate,gv(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ev.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=_p.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk(Wg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ky(this._delegate,ak);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",ck(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Rd(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=mk(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=mk(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return bv.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return hv.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ek(this._delegate,t),e.t0=t,e.next=e.t0===Xg.SESSION?4:e.t0===Xg.LOCAL?6:e.t0===Xg.NONE?11:13;break;case 4:return n=$v,e.abrupt("break",14);case 6:return e.next=8,fd(bm)._isAvailable();case 8:return r=e.sent,n=r?bm:Qv,e.abrupt("break",14);case 11:return n=dd,e.abrupt("break",14);case 13:return e.abrupt("return",lh("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return ck(this._delegate,function(e){return Up.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return ck(this._delegate,Xp(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return ck(this._delegate,function(e,t){return av.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return ck(this._delegate,function(e,t,n){return Xp($a(e),xp.credential(t,n)).catch(function(){var t=Za(Xa().mark((function t(n){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&lv(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return ck(this._delegate,function(e,t,n){return wv.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return lk(this._delegate,function(e,t,n){return Lm.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk(Wg(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",ck(this._delegate,Xm(this._delegate,t,ak)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pk(Wg(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,tk(this._delegate);case 3:return e.abrupt("return",dy(this._delegate,t,ak));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return yv.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function mk(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&dk.getOrCreate(e))},error:t,complete:n}}function yk(e,t){var n=function(e,t){var n=rk();if(!n)return[];var r=pd(Zg,e,t);switch(n.getItem(r)){case Xg.NONE:return[dd];case Xg.LOCAL:return[bm,$v];case Xg.SESSION:return[$v];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(bm)||n.push(bm),"undefined"!==typeof window)for(var r=0,i=[Qv,$v];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(dd)||n.push(dd),n}vk.Persistence=Xg;var gk=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new Bm(ok(Nu.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Bm.credential(e,t)}}]),e}();gk.PHONE_SIGN_IN_METHOD=Bm.PHONE_SIGN_IN_METHOD,gk.PROVIDER_ID=Bm.PROVIDER_ID;var kk,bk=vh,wk=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nu.app();d(this,e),bk(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Rm(i.auth(),t,n),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(kk=Nu).INTERNAL.registerComponent(new eo("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new vk(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Qf,PASSWORD_RESET:Yf,RECOVER_EMAIL:$f,REVERT_SECOND_FACTOR_ADDITION:Xf,VERIFY_AND_CHANGE_EMAIL:Jf,VERIFY_EMAIL:Zf}},EmailAuthProvider:xp,FacebookAuthProvider:Tp,GithubAuthProvider:Np,GoogleAuthProvider:Cp,OAuthProvider:Sp,SAMLAuthProvider:Pp,PhoneAuthProvider:gk,PhoneMultiFactorGenerator:og,RecaptchaVerifier:wk,TwitterAuthProvider:Rp,Auth:vk,AuthCredential:Bd,Error:Ua}).setInstantiationMode("LAZY").setMultipleInstances(!1)),kk.registerVersion("@firebase/auth-compat","0.4.6");var _k=n(184);var xk=function(e){var t=e.user,n=u((0,c.useState)(""),2),r=n[0],i=n[1],a=u((0,c.useState)([]),2),o=a[0],s=a[1],l=we();return(0,_k.jsxs)(sc,{children:[(0,_k.jsx)(sc.Item,{as:$e,to:"/posts",children:"SocialWeb"}),(0,_k.jsx)(sc.Item,{children:(0,_k.jsx)(zf,{value:r,onSearchChange:function(e,t){var n=t.value;i(n),qf.search(n).then((function(e){var t=e.hits.map((function(e){return{title:e.title,description:e.content,id:e.objectID}}));s(t)}))},results:o,noResultsMessage:"\u627e\u4e0d\u5230\u76f8\u95dc\u6587\u7ae0",onResultSelect:function(e,t){var n=t.result;l("/posts/".concat(n.id))}})}),(0,_k.jsx)(sc.Menu,{position:"right",children:t?(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsx)(sc.Item,{as:$e,to:"/new-post",children:"\u767c\u8868\u6587\u7ae0"}),(0,_k.jsx)(sc.Item,{as:$e,to:"/my/posts",children:"\u6703\u54e1"}),(0,_k.jsx)(sc.Item,{onClick:function(){return Au.auth().signOut()},children:"\u767b\u51fa"})]}):(0,_k.jsx)(sc.Item,{as:$e,to:"/signin",children:"\u8a3b\u518a/\u767b\u5165"})})]})};var Ek=function(e,t,n){"__proto__"==t&&Bu?Bu(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ik=Object.prototype.hasOwnProperty;var Sk=function(e,t,n){var r=e[t];Ik.call(e,t)&&vt(r,n)&&(void 0!==n||t in e)||Ek(e,t,n)};var Tk=function(e,t,n,r){if(!zt(e))return e;for(var i=-1,a=(t=gi(t,e)).length,o=a-1,u=e;null!=u&&++i<a;){var s=ki(t[i]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(i!=o){var l=u[s];void 0===(c=r?r(l,s,u):void 0)&&(c=zt(l)?l:ur(t[i+1])?[]:{})}Sk(u,s,c),u=u[s]}return e};var Ck=function(e,t,n){return null==e?e:Tk(e,t,n)},Nk=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).inputRef=(0,c.createRef)(),t.labelRef=(0,c.createRef)(),t.canToggle=function(){var e=t.props,n=e.disabled,r=e.radio,i=e.readOnly,a=t.state.checked;return!n&&!i&&!(r&&a)},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return oa(r)?n?-1:0:r},t.handleClick=function(e){var n=t.props.id,r=t.state,i=r.checked,a=r.indeterminate,o=Qu(t.inputRef.current,"contains",e.target),u=Qu(t.labelRef.current,"contains",e.target),s=!u&&!o,c=!oa(n);u&&c||Qu(t.props,"onClick",e,Ze({},t.props,{checked:!i,indeterminate:!!a})),t.isClickFromMouse&&(t.isClickFromMouse=!1,u&&!c&&t.handleChange(e),s&&t.handleChange(e),u&&c&&e.stopPropagation())},t.handleChange=function(e){var n=t.state.checked;t.canToggle()&&(Qu(t.props,"onChange",e,Ze({},t.props,{checked:!n,indeterminate:!1})),t.setState({checked:!n,indeterminate:!1}))},t.handleMouseDown=function(e){var n=t.state,r=n.checked,i=n.indeterminate;Qu(t.props,"onMouseDown",e,Ze({},t.props,{checked:!!r,indeterminate:!!i})),e.defaultPrevented||Qu(t.inputRef.current,"focus"),e.preventDefault()},t.handleMouseUp=function(e){var n=t.state,r=n.checked,i=n.indeterminate;t.isClickFromMouse=!0,Qu(t.props,"onMouseUp",e,Ze({},t.props,{checked:!!r,indeterminate:!!i}))},t.setIndeterminate=function(){var e=t.state.indeterminate;Ck(t.inputRef,"current.indeterminate",!!e)},t}Pu(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setIndeterminate()},n.componentDidUpdate=function(){this.setIndeterminate()},n.render=function(){var e=this.props,n=e.className,r=e.disabled,i=e.label,a=e.id,o=e.name,u=e.radio,s=e.readOnly,l=e.slider,f=e.toggle,h=e.type,d=e.value,p=this.state,v=p.checked,m=p.indeterminate,y=tt("ui",it(v,"checked"),it(r,"disabled"),it(m,"indeterminate"),it(oa(i),"fitted"),it(u,"radio"),it(s,"read-only"),it(l,"slider"),it(f,"toggle"),"checkbox",n),g=ft(t,this.props),k=ht(t,this.props),b=Ql(g,{htmlProps:Gl}),w=b[0],_=b[1],x=fa(i,{defaultProps:{htmlFor:a},autoGenerateKey:!1})||c.createElement("label",{htmlFor:a});return c.createElement(k,Ze({},_,{className:y,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),c.createElement(tf,{innerRef:this.inputRef},c.createElement("input",Ze({},w,{checked:v,className:"hidden",disabled:r,id:a,name:o,readOnly:!0,tabIndex:this.computeTabIndex(),type:h,value:d}))),c.createElement(tf,{innerRef:this.labelRef},x))},t}($u);function Ak(e){var t=e.slider,n=e.toggle,r=e.type,i=ft(Ak,e),a=!(t||n)||void 0;return c.createElement(Nk,Ze({},i,{type:r,radio:a,slider:t,toggle:n}))}Nk.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],Nk.propTypes={},Nk.defaultProps={type:"checkbox"},Nk.autoControlledProps=["checked","indeterminate"],Ak.handledProps=["slider","toggle","type"],Ak.propTypes={},Ak.defaultProps={type:"radio"};var Pk=Ak;function Rk(e){var t=e.children,n=e.className,r=e.content,i=e.control,a=e.disabled,o=e.error,u=e.inline,s=e.label,l=e.required,f=e.type,h=e.width,d=e.id,p=tt(it(a,"disabled"),it(o,"error"),it(u,"inline"),it(l,"required"),lt(h,"wide"),"field",n),v=ft(Rk,e),m=ht(Rk,e),y=wi(o,"pointing","above"),g=wf.create(o,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:y,id:d?d+"-error-message":void 0,role:"alert","aria-atomic":!0}}),k=("below"===y||"right"===y)&&g,b=("above"===y||"left"===y)&&g;if(oa(i))return oa(s)?c.createElement(m,Ze({},v,{className:p,id:d}),Mi(t)?r:t):c.createElement(m,Ze({},v,{className:p,id:d}),k,fa(s,{autoGenerateKey:!1}),b);var w={"aria-describedby":d&&o?d+"-error-message":null,"aria-invalid":!!o||void 0},_=Ze({},v,{content:r,children:t,disabled:a,required:l,type:f,id:d});return"input"!==i||"checkbox"!==f&&"radio"!==f?i===Nk||i===Pk?c.createElement(m,{className:p},k,(0,c.createElement)(i,Ze({},w,_,{label:s})),b):c.createElement(m,{className:p},fa(s,{defaultProps:{htmlFor:d},autoGenerateKey:!1}),k,(0,c.createElement)(i,Ze({},w,_)),b):c.createElement(m,{className:p},c.createElement("label",null,k,(0,c.createElement)(i,Ze({},w,_))," ",s,b))}Rk.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],Rk.propTypes={};var Ok=Rk;function Dk(e){var t=e.control,n=ft(Dk,e),r=ht(Dk,e);return c.createElement(r,Ze({},n,{control:t}))}Dk.handledProps=["as","control"],Dk.propTypes={},Dk.defaultProps={as:Ok,control:Nf};var Lk=Dk;function Mk(e){var t=e.control,n=ft(Mk,e),r=ht(Mk,e);return c.createElement(r,Ze({},n,{control:t}))}Mk.handledProps=["as","control"],Mk.propTypes={},Mk.defaultProps={as:Ok,control:Nk};var Uk=Mk;var Fk=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i};var jk=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};var Vk=function(e,t){var n=!0;return Ri(e,(function(e,r,i){return n=!!t(e,r,i)})),n};var zk=function(e,t,n){var r=Vn(e)?jk:Vk;return n&&Di(e,t,n)&&(t=void 0),r(e,Ai(t,3))};var Bk=function(e,t,n,r){var i=-1,a=qi,o=!0,u=e.length,s=[],c=t.length;if(!u)return s;n&&(t=di(t,fr(n))),r?(a=Ki,o=!1):t.length>=200&&(a=Pn,o=!1,t=new An(t));e:for(;++i<u;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,o&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;s.push(l)}else a(t,f,r)||s.push(l)}return s};var qk=function(e){return Qn(e)&&Sr(e)},Kk=Wu((function(e,t){return qk(e)?Bk(e,t):[]})),Gk=Kk;var Hk=function(e){return function(t,n,r){var i=Object(t);if(!Sr(t)){var a=Ai(n,3);t=Tr(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:void 0}},Wk=Math.max;var Qk=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gl(n);return i<0&&(i=Wk(r+i,0)),ji(e,Ai(t,3),i)},Yk=Hk(Qk);var $k=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:gl(t),Mu(e,0,(t=r-t)<0?0:t)):[]},Xk=Ti("length"),Jk="\\ud800-\\udfff",Zk="["+Jk+"]",eb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",tb="\\ud83c[\\udffb-\\udfff]",nb="[^"+Jk+"]",rb="(?:\\ud83c[\\udde6-\\uddff]){2}",ib="[\\ud800-\\udbff][\\udc00-\\udfff]",ab="(?:"+eb+"|"+tb+")"+"?",ob="[\\ufe0e\\ufe0f]?",ub=ob+ab+("(?:\\u200d(?:"+[nb,rb,ib].join("|")+")"+ob+ab+")*"),sb="(?:"+[nb+eb+"?",eb,rb,ib,Zk].join("|")+")",cb=RegExp(tb+"(?="+tb+")|"+sb+ub,"g");var lb=function(e){for(var t=cb.lastIndex=0;cb.test(e);)++t;return t};var fb=function(e){return Ms(e)?lb(e):Xk(e)};var hb=function(e){if(null==e)return 0;if(Sr(e))return ia(e)?fb(e):e.length;var t=Hr(e);return"[object Map]"==t||"[object Set]"==t?e.size:Ir(e).length},db=Pt?Pt.isConcatSpreadable:void 0;var pb=function(e){return Vn(e)||er(e)||!!(db&&e&&e[db])};var vb=function e(t,n,r,i,a){var o=-1,u=t.length;for(r||(r=pb),a||(a=[]);++o<u;){var s=t[o];n>0&&r(s)?n>1?e(s,n-1,r,i,a):jn(a,s):i||(a[a.length]=s)}return a},mb=Wu((function(e,t){return qk(e)?Bk(e,vb(t,1,qk,!0)):[]})),yb=mb,gb=Wu((function(e){return Qi(vb(e,1,qk,!0))}));var kb=function(e,t){return Jr(e,t)};var bb=function(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],u=bi(e,o);n(u,o)&&Tk(a,gi(o,e),u)}return a};var wb=function(e,t){return bb(e,t,(function(t,n){return Ei(e,n)}))};var _b=function(e){return(null==e?0:e.length)?vb(e,1):[]};var xb=function(e){return Hu(Vu(e,void 0,_b),e+"")}((function(e,t){return null==e?{}:wb(e,t)})),Eb=function(e){function t(){return e.apply(this,arguments)||this}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.className,r=e.name,i=tt(r,"flag",n),a=ft(t,this.props),o=ht(t,this.props);return c.createElement(o,Ze({},a,{className:i}))},t}(c.PureComponent);Eb.handledProps=["as","className","name"],Eb.propTypes={},Eb.defaultProps={as:"i"},Eb.create=sa(Eb,(function(e){return{name:e}}));var Ib=Eb;function Sb(e){var t=e.className,n=tt("divider",t),r=ft(Sb,e),i=ht(Sb,e);return c.createElement(i,Ze({},r,{className:n}))}Sb.handledProps=["as","className"],Sb.propTypes={};var Tb=Sb,Cb=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){Qu(t.props,"onClick",e,t.props)},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,a=e.content,o=e.disabled,u=e.description,s=e.flag,l=e.icon,f=e.image,h=e.label,d=e.selected,p=e.text,v=tt(it(n,"active"),it(o,"disabled"),it(d,"selected"),"item",i),m=oa(l)?function(e,t){return Li(c.Children.toArray(e),{type:t})}(r,"DropdownMenu")&&"dropdown":l,y=ft(t,this.props),g=ht(t,this.props),k={role:"option","aria-disabled":o,"aria-checked":n,"aria-selected":d};if(!Mi(r))return c.createElement(g,Ze({},y,k,{className:v,onClick:this.handleClick}),r);var b=Ib.create(s,{autoGenerateKey:!1}),w=rc.create(m,{autoGenerateKey:!1}),_=mf.create(f,{autoGenerateKey:!1}),x=wf.create(h,{autoGenerateKey:!1}),E=ua("span",(function(e){return{children:e}}),u,{defaultProps:{className:"description"},autoGenerateKey:!1}),I=ua("span",(function(e){return{children:e}}),Mi(a)?p:a,{defaultProps:{className:"text"},autoGenerateKey:!1});return c.createElement(g,Ze({},y,k,{className:v,onClick:this.handleClick}),_,w,b,x,E,I)},t}(c.Component);Cb.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],Cb.propTypes={},Cb.create=sa(Cb,(function(e){return e}));var Nb=Cb;function Ab(e){var t=e.children,n=e.className,r=e.content,i=e.icon,a=tt("header",n),o=ft(Ab,e),u=ht(Ab,e);return Mi(t)?c.createElement(u,Ze({},o,{className:a}),rc.create(i,{autoGenerateKey:!1}),r):c.createElement(u,Ze({},o,{className:a}),t)}Ab.handledProps=["as","children","className","content","icon"],Ab.propTypes={},Ab.create=sa(Ab,(function(e){return{content:e}}));var Pb=Ab;function Rb(e){var t=e.children,n=e.className,r=e.content,i=e.direction,a=e.open,o=e.scrolling,u=tt(i,it(a,"visible"),it(o,"scrolling"),"menu transition",n),s=ft(Rb,e),l=ht(Rb,e);return c.createElement(l,Ze({},s,{className:u}),Mi(t)?r:t)}Rb.handledProps=["as","children","className","content","direction","open","scrolling"],Rb.propTypes={};var Ob=Rb,Db=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=wi(e,"target.value");Qu(t.props,"onChange",e,Ze({},t.props,{value:n}))},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.autoComplete,r=e.className,i=e.tabIndex,a=e.type,o=e.value,u=tt("search",r),s=ft(t,this.props);return c.createElement("input",Ze({},s,{"aria-autocomplete":"list",autoComplete:n,className:u,onChange:this.handleChange,tabIndex:i,type:a,value:o}))},t}(c.Component);Db.handledProps=["as","autoComplete","className","tabIndex","type","value"],Db.propTypes={},Db.defaultProps={autoComplete:"off",type:"text"},Db.create=sa(Db,(function(e){return{type:e}}));var Lb=Db;function Mb(e){var t=e.children,n=e.className,r=e.content,i=tt("divider",n),a=ft(Mb,e),o=ht(Mb,e);return c.createElement(o,Ze({"aria-atomic":!0,"aria-live":"polite",role:"alert"},a,{className:i}),Mi(t)?r:t)}Mb.handledProps=["as","children","className","content"],Mb.propTypes={},Mb.create=sa(Mb,(function(e){return{content:e}}));var Ub=Mb,Fb=/[\\^$.*+?()[\]{}|]/g,jb=RegExp(Fb.source);var Vb=function(e){return(e=yi(e))&&jb.test(e)?e.replace(Fb,"\\$&"):e};var zb=function(e,t){var n=[];return Ri(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};var Bb=function(e,t){return(Vn(e)?Bn:zb)(e,Ai(t,3))};function qb(e){var t=e.additionLabel,n=e.additionPosition,r=e.allowAdditions,i=e.deburr,a=e.multiple,o=e.options,u=e.search,s=e.searchQuery,l=e.value,f=o;if(a&&(f=Bb(f,(function(e){return!Bl(l,e.value)}))),u&&s)if(Bt(u))f=u(f,s);else{var h=i?rs(s):s,d=new RegExp(Vb(h),"i");f=Bb(f,(function(e){return d.test(i?rs(e.text):e.text)}))}if(r&&u&&s&&!Li(f,{text:s})){var p={key:"addition",text:[c.isValidElement(t)?c.cloneElement(t,{key:"addition-label"}):t||"",c.createElement("b",{key:"addition-query"},s)],value:s,className:"addition","data-additional":!0};"top"===n?f.unshift(p):f.push(p)}return f}function Kb(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,a=e.deburr,o=e.multiple,u=e.options,s=e.search,c=e.searchQuery,l=e.selectedIndex,f=e.value,h=qb({value:f,options:u,searchQuery:c,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:a,multiple:o,search:s}),d=Cl(h,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!l||l<0){var p=d[0];t=o?p:Qk(h,["value",f])||d[0]}else if(o)t=Yk(d,(function(e){return e>=l})),l>=h.length-1&&(t=d[d.length-1]);else{var v=Qk(h,["value",f]);t=Bl(d,v)?v:void 0}return(!t||t<0)&&(t=d[0]),t}qb.handledProps=[];var Gb=function(e,t){return oa(e)?t:e},Hb=function(e){return e?e.map((function(e){return xb(e,["key","value"])})):e};function Wb(e){var t=e.flag,n=e.image,r=e.text;return Bt(r)?r:{content:c.createElement(c.Fragment,null,Ib.create(t),mf.create(n),r)}}var Qb=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).searchRef=(0,c.createRef)(),t.sizerRef=(0,c.createRef)(),t.ref=(0,c.createRef)(),t.handleChange=function(e,n){Qu(t.props,"onChange",e,Ze({},t.props,{value:n}))},t.closeOnChange=function(e){var n=t.props,r=n.closeOnChange,i=n.multiple;(Yu(r)?!i:r)&&t.close(e,Gi)},t.closeOnEscape=function(e){t.props.closeOnEscape&&Al().getCode(e)===Al().Escape&&(e.preventDefault(),t.close(e))},t.moveSelectionOnKeyDown=function(e){var n,r=t.props,i=r.multiple,a=r.selectOnNavigation;if(t.state.open){var o=((n={})[Al().ArrowDown]=1,n[Al().ArrowUp]=-1,n)[Al().getCode(e)];if(void 0!==o){e.preventDefault();var u=t.getSelectedIndexAfterMove(o);!i&&a&&t.makeSelectedItemActive(e,u),t.setState({selectedIndex:u})}}},t.openOnSpace=function(e){var n,r,i,a=t.state.focus&&!t.state.open&&Al().getCode(e)===Al().Spacebar,o="INPUT"!==(null==(n=e.target)?void 0:n.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);a&&(o&&e.preventDefault(),t.open(e))},t.openOnArrow=function(e){var n=t.state,r=n.focus,i=n.open;if(r&&!i){var a=Al().getCode(e);a!==Al().ArrowDown&&a!==Al().ArrowUp||(e.preventDefault(),t.open(e))}},t.makeSelectedItemActive=function(e,n){var r=t.state,i=r.open,a=r.value,o=t.props.multiple,u=t.getSelectedItem(n),s=wi(u,"value"),c=wi(u,"disabled");if(oa(s)||!i||c)return a;var l=o?gb(a,[s]):s;return(o?!!yb(l,a).length:l!==a)&&(t.setState({value:l}),t.handleChange(e,l),u["data-additional"]&&Qu(t.props,"onAddItem",e,Ze({},t.props,{value:s}))),a},t.selectItemOnEnter=function(e){var n=t.props.search,r=t.state,i=r.open,a=r.selectedIndex;if(i&&(Al().getCode(e)===Al().Enter||!n&&Al().getCode(e)===Al().Spacebar)){e.preventDefault();var o=hb(qb({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search}));if(!n||0!==o){var u=t.makeSelectedItemActive(e,a);t.setState({selectedIndex:Kb({additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search,selectedIndex:a,value:u,options:t.props.options,searchQuery:""})}),t.closeOnChange(e),t.clearSearchQuery(),n&&Qu(t.searchRef.current,"focus")}}},t.removeItemOnBackspace=function(e){var n=t.props,r=n.multiple,i=n.search,a=t.state,o=a.searchQuery,u=a.value;if(Al().getCode(e)===Al().Backspace&&!o&&i&&r&&!fc(u)){e.preventDefault();var s=$k(u);t.setState({value:s}),t.handleChange(e,s)}},t.closeOnDocumentClick=function(e){t.props.closeOnBlur&&(t.ref.current&&rf(t.ref.current,e)||t.close())},t.handleMouseDown=function(e){t.isMouseDown=!0,Qu(t.props,"onMouseDown",e,t.props),document.addEventListener("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,document.removeEventListener("mouseup",t.handleDocumentMouseUp)},t.handleClick=function(e){var n=t.props,r=n.minCharacters,i=n.search,a=t.state,o=a.open,u=a.searchQuery;if(Qu(t.props,"onClick",e,t.props),e.stopPropagation(),!i)return t.toggle(e);o?Qu(t.searchRef.current,"focus"):u.length>=r||1===r?t.open(e):Qu(t.searchRef.current,"focus")},t.handleIconClick=function(e){var n=t.props.clearable,r=t.hasValue();Qu(t.props,"onClick",e,t.props),e.stopPropagation(),n&&r?t.clearValue(e):t.toggle(e)},t.handleItemClick=function(e,n){var r=t.props,i=r.multiple,a=r.search,o=t.state.value,u=n.value;if(e.stopPropagation(),(i||n.disabled)&&e.nativeEvent.stopImmediatePropagation(),!n.disabled){var s=n["data-additional"],c=i?gb(t.state.value,[u]):u;(i?!!yb(c,o).length:c!==o)&&(t.setState({value:c}),t.handleChange(e,c)),t.clearSearchQuery(),Qu(a?t.searchRef.current:t.ref.current,"focus"),t.closeOnChange(e),s&&Qu(t.props,"onAddItem",e,Ze({},t.props,{value:u}))}},t.handleFocus=function(e){t.state.focus||(Qu(t.props,"onFocus",e,t.props),t.setState({focus:!0}))},t.handleBlur=function(e){var n=wi(e,"currentTarget");if(!n||!n.contains(document.activeElement)){var r=t.props,i=r.closeOnBlur,a=r.multiple,o=r.selectOnBlur;t.isMouseDown||(Qu(t.props,"onBlur",e,t.props),o&&!a&&(t.makeSelectedItemActive(e,t.state.selectedIndex),i&&t.close()),t.setState({focus:!1}),t.clearSearchQuery())}},t.handleSearchChange=function(e,n){var r=n.value;e.stopPropagation();var i=t.props.minCharacters,a=t.state.open,o=r;Qu(t.props,"onSearchChange",e,Ze({},t.props,{searchQuery:o})),t.setState({searchQuery:o,selectedIndex:0}),!a&&o.length>=i?t.open():a&&1!==i&&o.length<i&&t.close()},t.handleKeyDown=function(e){t.moveSelectionOnKeyDown(e),t.openOnArrow(e),t.openOnSpace(e),t.selectItemOnEnter(e),Qu(t.props,"onKeyDown",e)},t.getSelectedItem=function(e){var n=qb({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});return wi(n,"["+e+"]")},t.getItemByValue=function(e){var n=t.props.options;return Yk(n,{value:e})},t.getDropdownAriaOptions=function(){var e=t.props,n=e.loading,r=e.disabled,i=e.search,a=e.multiple,o={role:i?"combobox":"listbox","aria-busy":n,"aria-disabled":r,"aria-expanded":!!t.state.open};return"listbox"===o.role&&(o["aria-multiselectable"]=a),o},t.clearSearchQuery=function(){var e=t.state.searchQuery;void 0!==e&&""!==e&&t.setState({searchQuery:""})},t.handleLabelClick=function(e,n){e.stopPropagation(),t.setState({selectedLabel:n.value}),Qu(t.props,"onLabelClick",e,n)},t.handleLabelRemove=function(e,n){e.stopPropagation();var r=t.state.value,i=Gk(r,n.value);t.setState({value:i}),t.handleChange(e,i)},t.getSelectedIndexAfterMove=function(e,n){void 0===n&&(n=t.state.selectedIndex);var r=qb({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(void 0!==r&&!zk(r,"disabled")){var i=r.length-1,a=n+e;return!t.props.wrapSelection&&(a>i||a<0)?a=n:a>i?a=0:a<0&&(a=i),r[a].disabled?t.getSelectedIndexAfterMove(e,a):a}},t.handleIconOverrides=function(e){var n=t.props.clearable;return{className:tt(n&&t.hasValue()&&"clear",e.className),onClick:function(n){Qu(e,"onClick",n,e),t.handleIconClick(n)}}},t.clearValue=function(e){var n=t.props.multiple?[]:"";t.setState({value:n}),t.handleChange(e,n)},t.computeSearchInputTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return oa(r)?n?-1:0:r},t.computeSearchInputWidth=function(){var e=t.state.searchQuery;if(t.sizerRef.current&&e){t.sizerRef.current.style.display="inline",t.sizerRef.current.textContent=e;var n=Math.ceil(t.sizerRef.current.getBoundingClientRect().width);return t.sizerRef.current.style.removeProperty("display"),n}},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.search,i=e.tabIndex;if(!r)return n?-1:oa(i)?0:i},t.handleSearchInputOverrides=function(e){return{onChange:function(n,r){Qu(e,"onChange",n,r),t.handleSearchChange(n,r)}}},t.hasValue=function(){var e=t.props.multiple,n=t.state.value;return e?!fc(n):!oa(n)&&""!==n},t.scrollSelectedItemIntoView=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=e.querySelector(".item.selected");if(n){var r=n.offsetTop<e.scrollTop,i=n.offsetTop+n.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=n.offsetTop:i&&(e.scrollTop=n.offsetTop+n.clientHeight-e.clientHeight)}}}},t.setOpenDirection=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=t.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-n.top-n.height-r,a=n.top-r,o=i<0&&a>i;!o!==!t.state.upward&&t.setState({upward:o})}}},t.open=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var r=t.props,i=r.disabled,a=r.search;i||(a&&Qu(t.searchRef.current,"focus"),Qu(t.props,"onOpen",e,t.props),n&&t.setState({open:!0}),t.scrollSelectedItemIntoView())},t.close=function(e,n){void 0===n&&(n=t.handleClose),t.state.open&&(Qu(t.props,"onClose",e,t.props),t.setState({open:!1},n))},t.handleClose=function(){var e=document.activeElement===t.searchRef.current;!e&&t.ref.current&&t.ref.current.blur();var n=document.activeElement===t.ref.current,r=e||n;t.setState({focus:r})},t.toggle=function(e){return t.state.open?t.close(e):t.open(e)},t.renderText=function(){var e,n=t.props,r=n.multiple,i=n.placeholder,a=n.search,o=n.text,u=t.state,s=u.searchQuery,c=u.selectedIndex,l=u.value,f=u.open,h=t.hasValue(),d=tt(i&&!h&&"default","text",a&&s&&"filtered"),p=i;return o?p=o:f&&!r?e=t.getSelectedItem(c):h&&(e=t.getItemByValue(l)),Ub.create(e?Wb(e):p,{defaultProps:{className:d}})},t.renderSearchInput=function(){var e=t.props,n=e.search,r=e.searchInput,i=t.state.searchQuery;return n&&c.createElement(tf,{innerRef:t.searchRef},Lb.create(r,{defaultProps:{style:{width:t.computeSearchInputWidth()},tabIndex:t.computeSearchInputTabIndex(),value:i},overrideProps:t.handleSearchInputOverrides}))},t.renderSearchSizer=function(){var e=t.props,n=e.search,r=e.multiple;return n&&r&&c.createElement("span",{className:"sizer",ref:t.sizerRef})},t.renderLabels=function(){var e=t.props,n=e.multiple,r=e.renderLabel,i=t.state,a=i.selectedLabel,o=i.value;if(n&&!fc(o)){var u=Ou(o,t.getItemByValue);return Ou(Fk(u),(function(e,n){var i={active:e.value===a,as:"a",key:Gb(e.key,e.value),onClick:t.handleLabelClick,onRemove:t.handleLabelRemove,value:e.value};return wf.create(r(e,n,i),{defaultProps:i})}))}},t.renderOptions=function(){var e=t.props,n=e.lazyLoad,r=e.multiple,i=e.search,a=e.noResultsMessage,o=t.state,u=o.open,s=o.selectedIndex,l=o.value;if(n&&!u)return null;var f=qb({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(null!==a&&i&&fc(f))return c.createElement("div",{className:"message"},a);var h=r?function(e){return Bl(l,e)}:function(e){return e===l};return Ou(f,(function(e,n){return Nb.create(Ze({active:h(e.value),selected:s===n},e,{key:Gb(e.key,e.value),style:Ze({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(n,r){null==e.onClick||e.onClick(n,r),t.handleItemClick(n,r)}}}})}))},t.renderMenu=function(){var e=t.props,n=e.children,r=e.direction,i=e.header,a=t.state.open,o=t.getDropdownMenuAriaOptions();if(!Mi(n)){var u=c.Children.only(n),s=tt(r,it(a,"visible"),u.props.className);return(0,c.cloneElement)(u,Ze({className:s},o))}return c.createElement(Ob,Ze({},o,{direction:r,open:a}),Pb.create(i,{autoGenerateKey:!1}),t.renderOptions())},t}Pu(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},t.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!Rl()(n.__value,t.value)||!kb(Hb(e.options),Hb(n.__options)))&&(r.selectedIndex=Kb({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},n.componentDidMount=function(){this.state.open&&this.open(null,!1)},n.shouldComponentUpdate=function(e,t){return!Rl()(e,this.props)||!Rl()(t,this.state)},n.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,a=n.openOnFocus,o=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var u=!o||o&&1===i&&!this.state.open;a&&u&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},n.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},n.render=function(){var e=this.props,n=e.basic,r=e.button,i=e.className,a=e.compact,o=e.disabled,u=e.error,s=e.fluid,l=e.floating,f=e.icon,h=e.inline,d=e.item,p=e.labeled,v=e.loading,m=e.multiple,y=e.pointing,g=e.search,k=e.selection,b=e.scrolling,w=e.simple,_=e.trigger,x=this.state,E=x.focus,I=x.open,S=x.upward,T=tt("ui",it(I,"active visible"),it(o,"disabled"),it(u,"error"),it(v,"loading"),it(n,"basic"),it(r,"button"),it(a,"compact"),it(s,"fluid"),it(l,"floating"),it(h,"inline"),it(p,"labeled"),it(d,"item"),it(m,"multiple"),it(g,"search"),it(k,"selection"),it(w,"simple"),it(b,"scrolling"),it(S,"upward"),ot(y,"pointing"),"dropdown",i),C=ft(t,this.props),N=ht(t,this.props),A=this.getDropdownAriaOptions(N,this.props);return c.createElement(tf,{innerRef:this.ref},c.createElement(N,Ze({},C,A,{className:T,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),_||this.renderText(),rc.create(f,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),I&&c.createElement(Dl(),{name:"keydown",on:this.closeOnEscape}),I&&c.createElement(Dl(),{name:"click",on:this.closeOnDocumentClick}),E&&c.createElement(Dl(),{name:"keydown",on:this.removeItemOnBackspace})))},t}($u);function Yb(e){var t=e.control,n=ft(Yb,e),r=ht(Yb,e);return c.createElement(r,Ze({},n,{control:t}))}Qb.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],Qb.propTypes={},Qb.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:Wb,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},Qb.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],Qb.Divider=Tb,Qb.Header=Pb,Qb.Item=Nb,Qb.Menu=Ob,Qb.SearchInput=Lb,Qb.Text=Ub,Yb.handledProps=["as","control"],Yb.propTypes={},Yb.defaultProps={as:Ok,control:Qb};var $b=Yb;function Xb(e){var t=e.children,n=e.className,r=e.grouped,i=e.inline,a=e.unstackable,o=e.widths,u=tt(it(r,"grouped"),it(i,"inline"),it(a,"unstackable"),lt(o,null,!0),"fields",n),s=ft(Xb,e),l=ht(Xb,e);return c.createElement(l,Ze({},s,{className:u}),t)}Xb.handledProps=["as","children","className","grouped","inline","unstackable","widths"],Xb.propTypes={};var Jb=Xb;function Zb(e){var t=e.control,n=ft(Zb,e),r=ht(Zb,e);return c.createElement(r,Ze({},n,{control:t}))}Zb.handledProps=["as","control"],Zb.propTypes={},Zb.defaultProps={as:Ok,control:Pf};var ew=Zb;function tw(e){var t=e.control,n=ft(tw,e),r=ht(tw,e);return c.createElement(r,Ze({},n,{control:t}))}tw.handledProps=["as","control"],tw.propTypes={},tw.defaultProps={as:Ok,control:Pk};var nw=tw;function rw(e){return c.createElement(Qb,Ze({},e,{selection:!0}))}rw.handledProps=["options"],rw.propTypes={},rw.Divider=Qb.Divider,rw.Header=Qb.Header,rw.Item=Qb.Item,rw.Menu=Qb.Menu;var iw=rw;function aw(e){var t=e.control,n=e.options,r=ft(aw,e),i=ht(aw,e);return c.createElement(i,Ze({},r,{control:t,options:n}))}aw.handledProps=["as","control","options"],aw.propTypes={},aw.defaultProps={as:Ok,control:iw};var ow=aw,uw=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,c.createRef)(),t.focus=function(){return t.ref.current.focus()},t.handleChange=function(e){var n=wi(e,"target.value");Qu(t.props,"onChange",e,Ze({},t.props,{value:n}))},t.handleInput=function(e){var n=wi(e,"target.value");Qu(t.props,"onInput",e,Ze({},t.props,{value:n}))},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.rows,r=e.value,i=ft(t,this.props),a=ht(t,this.props);return c.createElement(tf,{innerRef:this.ref},c.createElement(a,Ze({},i,{onChange:this.handleChange,onInput:this.handleInput,rows:n,value:r})))},t}(c.Component);uw.handledProps=["as","onChange","onInput","rows","value"],uw.propTypes={},uw.defaultProps={as:"textarea",rows:3};var sw=uw;function cw(e){var t=e.control,n=ft(cw,e),r=ht(cw,e);return c.createElement(r,Ze({},n,{control:t}))}cw.handledProps=["as","control"],cw.propTypes={},cw.defaultProps={as:Ok,control:sw};var lw=cw,fw=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){"string"!==typeof t.props.action&&Qu(e,"preventDefault");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Qu.apply(void 0,[t.props,"onSubmit",e,t.props].concat(r))},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.action,r=e.children,i=e.className,a=e.error,o=e.inverted,u=e.loading,s=e.reply,l=e.size,f=e.success,h=e.unstackable,d=e.warning,p=e.widths,v=tt("ui",l,it(a,"error"),it(o,"inverted"),it(u,"loading"),it(s,"reply"),it(f,"success"),it(h,"unstackable"),it(d,"warning"),lt(p,null,!0),"form",i),m=ft(t,this.props),y=ht(t,this.props);return c.createElement(y,Ze({},m,{action:n,className:v,onSubmit:this.handleSubmit}),r)},t}(c.Component);fw.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],fw.propTypes={},fw.defaultProps={as:"form"},fw.Field=Ok,fw.Button=Lk,fw.Checkbox=Uk,fw.Dropdown=$b,fw.Group=Jb,fw.Input=ew,fw.Radio=nw,fw.Select=ow,fw.TextArea=lw;var hw=fw;function dw(e){var t=e.children,n=e.className,r=e.content,i=tt("content",n),a=ft(dw,e),o=ht(dw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}dw.handledProps=["as","children","className","content"],dw.propTypes={};var pw=dw;function vw(e){var t=e.children,n=e.className,r=e.content,i=tt("header",n),a=ft(vw,e),o=ht(vw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}vw.handledProps=["as","children","className","content"],vw.propTypes={},vw.create=sa(vw,(function(e){return{content:e}}));var mw=vw;function yw(e){var t=e.children,n=e.className,r=e.content,i=tt("content",n),a=ft(yw,e),o=ht(yw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}yw.handledProps=["as","children","className","content"],yw.propTypes={},yw.defaultProps={as:"li"},yw.create=sa(yw,(function(e){return{content:e}}));var gw=yw;function kw(e){var t=e.children,n=e.className,r=e.items,i=tt("list",n),a=ft(kw,e),o=ht(kw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?Ou(r,gw.create):t)}kw.handledProps=["as","children","className","items"],kw.propTypes={},kw.defaultProps={as:"ul"},kw.create=sa(kw,(function(e){return{items:e}}));var bw=kw,ww=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleDismiss=function(e){var n=t.props.onDismiss;n&&n(e,t.props)},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.attached,r=e.children,i=e.className,a=e.color,o=e.compact,u=e.content,s=e.error,l=e.floating,f=e.header,h=e.hidden,d=e.icon,p=e.info,v=e.list,m=e.negative,y=e.onDismiss,g=e.positive,k=e.size,b=e.success,w=e.visible,_=e.warning,x=tt("ui",a,k,it(o,"compact"),it(s,"error"),it(l,"floating"),it(h,"hidden"),it(d,"icon"),it(p,"info"),it(m,"negative"),it(g,"positive"),it(b,"success"),it(w,"visible"),it(_,"warning"),ot(n,"attached"),"message",i),E=y&&c.createElement(rc,{name:"close",onClick:this.handleDismiss}),I=ft(t,this.props),S=ht(t,this.props);return Mi(r)?c.createElement(S,Ze({},I,{className:x}),E,rc.create(d,{autoGenerateKey:!1}),(!oa(f)||!oa(u)||!oa(v))&&c.createElement(pw,null,mw.create(f,{autoGenerateKey:!1}),bw.create(v,{autoGenerateKey:!1}),ha(u,{autoGenerateKey:!1}))):c.createElement(S,Ze({},I,{className:x}),E,r)},t}(c.Component);ww.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],ww.propTypes={},ww.Content=pw,ww.Header=mw,ww.List=bw,ww.Item=gw;var _w=function(){var e=we(),t=u((0,c.useState)("register"),2),n=t[0],r=t[1],i=u((0,c.useState)(""),2),a=i[0],o=i[1],s=u((0,c.useState)(""),2),l=s[0],f=s[1],h=u((0,c.useState)(""),2),d=h[0],p=h[1],v=u((0,c.useState)(!1),2),m=v[0],y=v[1];return(0,_k.jsxs)(Fi,{children:[(0,_k.jsxs)(sc,{widths:"2",children:[(0,_k.jsx)(sc.Item,{active:"register"===n,onClick:function(){p(""),r("register")},children:"\u8a3b\u518a"}),(0,_k.jsx)(sc.Item,{active:"signin"===n,onClick:function(){p(""),r("signin")},children:"\u767b\u5165"})]}),(0,_k.jsxs)(hw,{onSubmit:function(){y(!0),"register"===n?Au.auth().createUserWithEmailAndPassword(a,l).then((function(){e("/posts"),y(!1)})).catch((function(e){switch(e.code){case"auth/email-already-in-use":p("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":p("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":p("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3")}})):"signin"===n&&Au.auth().signInWithEmailAndPassword(a,l).then((function(){e("/posts"),y(!1)})).catch((function(e){switch(e.code){case"auth/invalid-email":p("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/user-not-found":p("\u4fe1\u7bb1\u4e0d\u5b58\u5728");break;case"auth/wrong-password":p("\u5bc6\u78bc\u932f\u8aa4")}}))},children:[(0,_k.jsx)(hw.Input,{label:"\u4fe1\u7bb1",value:a,onChange:function(e){return o(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1"}),(0,_k.jsx)(hw.Input,{label:"\u5bc6\u78bc",value:l,onChange:function(e){return f(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",type:"password"}),d&&(0,_k.jsx)(ww,{negative:!0,children:d}),(0,_k.jsxs)(hw.Button,{loading:m,children:["register"===n&&"\u8a3b\u518a","signin"===n&&"\u767b\u5165"]})]})]})};function xw(e){var t=e.children,n=e.className,r=e.content,i=tt("header",n),a=ft(xw,e),o=ht(xw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}xw.handledProps=["as","children","className","content"],xw.propTypes={},xw.create=sa(xw,(function(e){return{content:e}}));var Ew=xw;function Iw(e){var t=e.children,n=e.className,r=e.content,i=tt("description",n),a=ft(Iw,e),o=ht(Iw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Iw.handledProps=["as","children","className","content"],Iw.propTypes={},Iw.create=sa(Iw,(function(e){return{content:e}}));var Sw=Iw;function Tw(e){var t=e.children,n=e.className,r=e.content,i=tt("extra",n),a=ft(Tw,e),o=ht(Tw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Tw.handledProps=["as","children","className","content"],Tw.propTypes={},Tw.create=sa(Tw,(function(e){return{content:e}}));var Cw=Tw;function Nw(e){var t=e.children,n=e.className,r=e.content,i=tt("meta",n),a=ft(Nw,e),o=ht(Nw,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Nw.handledProps=["as","children","className","content"],Nw.propTypes={},Nw.create=sa(Nw,(function(e){return{content:e}}));var Aw=Nw;function Pw(e){var t=e.children,n=e.className,r=e.content,i=e.description,a=e.extra,o=e.header,u=e.meta,s=e.verticalAlign,l=tt(ct(s),"content",n),f=ft(Pw,e),h=ht(Pw,e);return Mi(t)?c.createElement(h,Ze({},f,{className:l}),Ew.create(o,{autoGenerateKey:!1}),Aw.create(u,{autoGenerateKey:!1}),Sw.create(i,{autoGenerateKey:!1}),Cw.create(a,{autoGenerateKey:!1}),r):c.createElement(h,Ze({},f,{className:l}),t)}Pw.handledProps=["as","children","className","content","description","extra","header","meta","verticalAlign"],Pw.propTypes={};var Rw=Pw;function Ow(e){var t=e.children,n=e.className,r=e.content,i=e.divided,a=e.items,o=e.link,u=e.relaxed,s=e.unstackable,l=tt("ui",it(i,"divided"),it(o,"link"),it(s,"unstackable"),ot(u,"relaxed"),"items",n),f=ft(Ow,e),h=ht(Ow,e);if(!Mi(t))return c.createElement(h,Ze({},f,{className:l}),t);if(!Mi(r))return c.createElement(h,Ze({},f,{className:l}),r);var d=Ou(a,(function(e){var t=e.childKey,n=cc(e,["childKey"]),r=null!=t?t:[n.content,n.description,n.header,n.meta].join("-");return c.createElement(jw,Ze({},n,{key:r}))}));return c.createElement(h,Ze({},f,{className:l}),d)}Ow.handledProps=["as","children","className","content","divided","items","link","relaxed","unstackable"],Ow.propTypes={};var Dw=Ow;function Lw(e){var t=e.size,n=ft(Lw,e);return c.createElement(mf,Ze({},n,{size:t,ui:!!t,wrapped:!0}))}Lw.handledProps=["size"],Lw.propTypes={},Lw.create=sa(Lw,(function(e){return{src:e}}));var Mw=Lw;function Uw(e){var t=e.children,n=e.className,r=e.content,i=e.description,a=e.extra,o=e.header,u=e.image,s=e.meta,l=tt("item",n),f=ft(Uw,e),h=ht(Uw,e);return Mi(t)?c.createElement(h,Ze({},f,{className:l}),Mw.create(u,{autoGenerateKey:!1}),c.createElement(Rw,{content:r,description:i,extra:a,header:o,meta:s})):c.createElement(h,Ze({},f,{className:l}),t)}Uw.handledProps=["as","children","className","content","description","extra","header","image","meta"],Uw.Content=Rw,Uw.Description=Sw,Uw.Extra=Cw,Uw.Group=Dw,Uw.Header=Ew,Uw.Image=Mw,Uw.Meta=Aw,Uw.propTypes={};var Fw,jw=Uw,Vw="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zw={},Bw=Bw||{},qw=Vw||self;function Kw(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Gw(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Hw="closure_uid_"+(1e9*Math.random()>>>0),Ww=0;function Qw(e,t,n){return e.call.apply(e.bind,arguments)}function Yw(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $w(e,t,n){return($w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qw:Yw).apply(null,arguments)}function Xw(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Jw(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Zw(){this.s=this.s,this.o=this.o}Zw.prototype.s=!1,Zw.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Hw)&&e[Hw]||(e[Hw]=++Ww))},Zw.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var e_=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function t_(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function n_(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Kw(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function r_(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}r_.prototype.h=function(){this.defaultPrevented=!0};var i_=function(){if(!qw.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qw.addEventListener("test",(function(){}),t),qw.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function a_(e){return/^[\s\xa0]*$/.test(e)}function o_(){var e=qw.navigator;return e&&(e=e.userAgent)?e:""}function u_(e){return-1!=o_().indexOf(e)}function s_(e){return s_[" "](e),e}s_[" "]=function(){};var c_,l_,f_=u_("Opera"),h_=u_("Trident")||u_("MSIE"),d_=u_("Edge"),p_=d_||h_,v_=u_("Gecko")&&!(-1!=o_().toLowerCase().indexOf("webkit")&&!u_("Edge"))&&!(u_("Trident")||u_("MSIE"))&&!u_("Edge"),m_=-1!=o_().toLowerCase().indexOf("webkit")&&!u_("Edge");function y_(){var e=qw.document;return e?e.documentMode:void 0}e:{var g_="",k_=function(){var e=o_();return v_?/rv:([^\);]+)(\)|;)/.exec(e):d_?/Edge\/([\d\.]+)/.exec(e):h_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):m_?/WebKit\/(\S+)/.exec(e):f_?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(k_&&(g_=k_?k_[1]:""),h_){var b_=y_();if(null!=b_&&b_>parseFloat(g_)){c_=String(b_);break e}}c_=g_}if(qw.document&&h_){var w_=y_();l_=w_||(parseInt(c_,10)||void 0)}else l_=void 0;var __=l_;function x_(e,t){if(r_.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v_){e:{try{s_(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:E_[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&x_.$.h.call(this)}}Jw(x_,r_);var E_={2:"touch",3:"pen",4:"mouse"};x_.prototype.h=function(){x_.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I_="closure_listenable_"+(1e6*Math.random()|0),S_=0;function T_(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++S_,this.fa=this.ia=!1}function C_(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function N_(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function A_(e){var t={};for(var n in e)t[n]=e[n];return t}var P_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R_(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<P_.length;a++)n=P_[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function O_(e){this.src=e,this.g={},this.h=0}function D_(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=e_(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(C_(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function L_(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}O_.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=L_(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new T_(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var M_="closure_lm_"+(1e6*Math.random()|0),U_={};function F_(e,t,n,r,i){if(r&&r.once)return V_(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)F_(e,t[a],n,r,i);return null}return n=W_(n),e&&e[I_]?e.O(t,n,Gw(r)?!!r.capture:!!r,i):j_(e,t,n,!1,r,i)}function j_(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Gw(i)?!!i.capture:!!i,u=G_(e);if(u||(e[M_]=u=new O_(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=K_;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)i_||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(q_(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function V_(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)V_(e,t[a],n,r,i);return null}return n=W_(n),e&&e[I_]?e.P(t,n,Gw(r)?!!r.capture:!!r,i):j_(e,t,n,!0,r,i)}function z_(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)z_(e,t[a],n,r,i);else r=Gw(r)?!!r.capture:!!r,n=W_(n),e&&e[I_]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=L_(a=e.g[t],n,r,i))&&(C_(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=G_(e))&&(t=e.g[t.toString()],e=-1,t&&(e=L_(t,n,r,i)),(n=-1<e?t[e]:null)&&B_(n))}function B_(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[I_])D_(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(q_(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=G_(t))?(D_(n,e),0==n.h&&(n.src=null,t[M_]=null)):C_(e)}}}function q_(e){return e in U_?U_[e]:U_[e]="on"+e}function K_(e,t){if(e.fa)e=!0;else{t=new x_(t,this);var n=e.listener,r=e.la||e.src;e.ia&&B_(e),e=n.call(r,t)}return e}function G_(e){return(e=e[M_])instanceof O_?e:null}var H_="__closure_events_fn_"+(1e9*Math.random()>>>0);function W_(e){return"function"===typeof e?e:(e[H_]||(e[H_]=function(t){return e.handleEvent(t)}),e[H_])}function Q_(){Zw.call(this),this.i=new O_(this),this.S=this,this.J=null}function Y_(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new r_(t,e);else if(t instanceof r_)t.target=t.target||e;else{var i=t;R_(t=new r_(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=$_(o,r,!0,t)&&i}if(i=$_(o=t.g=e,r,!0,t)&&i,i=$_(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=$_(o=t.g=n[a],r,!1,t)&&i}function $_(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&D_(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Jw(Q_,Zw),Q_.prototype[I_]=!0,Q_.prototype.removeEventListener=function(e,t,n,r){z_(this,e,t,n,r)},Q_.prototype.N=function(){if(Q_.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)C_(n[r]);delete t.g[e],t.h--}}this.J=null},Q_.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Q_.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var X_=qw.JSON.stringify,J_=function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Z_(){var e=ux,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ex=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=tx.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),tx=new J_((function(){return new nx}),(function(e){return e.reset()})),nx=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function rx(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ix(e){qw.setTimeout((function(){throw e}),0)}var ax,ox=!1,ux=new ex,sx=function(){var e=qw.Promise.resolve(void 0);ax=function(){e.then(cx)}},cx=function(){for(var e;e=Z_();){try{e.h.call(e.g)}catch(n){ix(n)}var t=tx;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ox=!1};function lx(e,t){Q_.call(this),this.h=e||1,this.g=t||qw,this.j=$w(this.qb,this),this.l=Date.now()}function fx(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function hx(e,t,n){if("function"===typeof e)n&&(e=$w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$w(e.handleEvent,e)}return 2147483647<Number(t)?-1:qw.setTimeout(e,t||0)}function dx(e){e.g=hx((function(){e.g=null,e.i&&(e.i=!1,dx(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Jw(lx,Q_),(Fw=lx.prototype).ga=!1,Fw.T=null,Fw.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Y_(this,"tick"),this.ga&&(fx(this),this.start()))}},Fw.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fw.N=function(){lx.$.N.call(this),fx(this),delete this.g};var px=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:dx(this)}},{key:"N",value:function(){Kf(b(n.prototype),"N",this).call(this),this.g&&(qw.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Zw);function vx(e){Zw.call(this),this.h=e,this.g={}}Jw(vx,Zw);var mx=[];function yx(e,t,n,r){Array.isArray(n)||(n&&(mx[0]=n.toString()),n=mx);for(var i=0;i<n.length;i++){var a=F_(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function gx(e){N_(e.g,(function(e,t){this.g.hasOwnProperty(t)&&B_(e)}),e),e.g={}}function kx(){this.g=!0}function bx(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return X_(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}vx.prototype.N=function(){vx.$.N.call(this),gx(this)},vx.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},kx.prototype.Ea=function(){this.g=!1},kx.prototype.info=function(){};var wx={},_x=null;function xx(){return _x=_x||new Q_}function Ex(e){r_.call(this,wx.Ta,e)}function Ix(e){var t=xx();Y_(t,new Ex(t))}function Sx(e,t){r_.call(this,wx.STAT_EVENT,e),this.stat=t}function Tx(e){var t=xx();Y_(t,new Sx(t,e))}function Cx(e,t){r_.call(this,wx.Ua,e),this.size=t}function Nx(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qw.setTimeout((function(){e()}),t)}wx.Ta="serverreachability",Jw(Ex,r_),wx.STAT_EVENT="statevent",Jw(Sx,r_),wx.Ua="timingevent",Jw(Cx,r_);var Ax={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Px={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Rx(){}function Ox(e){return e.h||(e.h=e.i())}function Dx(){}Rx.prototype.h=null;var Lx,Mx={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ux(){r_.call(this,"d")}function Fx(){r_.call(this,"c")}function jx(){}function Vx(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new vx(this),this.P=Bx,e=p_?125:void 0,this.V=new lx(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new zx}function zx(){this.i=null,this.g="",this.h=!1}Jw(Ux,r_),Jw(Fx,r_),Jw(jx,Rx),jx.prototype.g=function(){return new XMLHttpRequest},jx.prototype.i=function(){return{}},Lx=new jx;var Bx=45e3,qx={},Kx={};function Gx(e,t,n){e.L=1,e.v=lE(aE(t)),e.s=n,e.S=!0,Hx(e,null)}function Hx(e,t){e.G=Date.now(),$x(e),e.A=aE(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),xE(n.i,"t",r),e.C=0,n=e.l.J,e.h=new zx,e.g=EI(e.l,n?t:null,!e.s),0<e.O&&(e.M=new px($w(e.Pa,e,e.g),e.O)),yx(e.U,e.g,"readystatechange",e.nb),t=e.I?A_(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ix(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Wx(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Qx(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Yx(e,n))==Kx){4==t&&(e.o=4,Tx(14),i=!1),bx(e.j,e.m,null,"[Incomplete Response]");break}if(r==qx){e.o=4,Tx(15),bx(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}bx(e.j,e.m,r,null),tE(e,r)}Wx(e)&&r!=Kx&&r!=qx&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Tx(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),mI(t),t.M=!0,Tx(11))):(bx(e.j,e.m,n,"[Invalid Chunked Response]"),eE(e),Zx(e))}function Yx(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Kx:(n=Number(t.substring(n,r)),isNaN(n)?qx:(r+=1)+n>t.length?Kx:(t=t.slice(r,r+n),e.C=r+n,t))}function $x(e){e.Y=Date.now()+e.P,Xx(e,e.P)}function Xx(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Nx($w(e.lb,e),t)}function Jx(e){e.B&&(qw.clearTimeout(e.B),e.B=null)}function Zx(e){0==e.l.H||e.J||kI(e.l,e)}function eE(e){Jx(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,fx(e.V),gx(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function tE(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||AE(n.i,e)))if(!e.K&&AE(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;gI(n),sI(n)}vI(n),Tx(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Nx($w(n.ib,n),6e3));if(1>=NE(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else wI(n,11)}else if((e.K||n.g==e)&&gI(n),!a_(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(PE(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,cE(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=xI(r,r.J?r.pa:null,r.Y),d.K){RE(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Jx(p),$x(p)),r.g=d}else pI(r);0<n.j.length&&lI(n)}else"stop"!=a[0]&&"close"!=a[0]||wI(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?wI(n,7):uI(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Ix()}catch(a){}}function nE(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Kw(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Kw(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Kw(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Fw=Vx.prototype).setTimeout=function(e){this.P=e},Fw.nb=function(e){e=e.target;var t=this.M;t&&3==tI(e)?t.l():this.Pa(e)},Fw.Pa=function(e){try{if(e==this.g)e:{var t=tI(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||p_||this.g&&(this.h.h||this.g.ja()||nI(this.g)))){this.J||4!=t||7==n||Ix(),Jx(this);var r=this.g.da();this.ca=r;t:if(Wx(this)){var i=nI(this.g);e="";var a=i.length,o=4==tI(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){eE(this),Zx(this);var u="";break t}this.h.i=new qw.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!a_(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Tx(12),eE(this),Zx(this);break e}bx(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tE(this,r)}this.S?(Qx(this,t,u),p_&&this.i&&3==t&&(yx(this.U,this.V,"tick",this.mb),this.V.start())):(bx(this.j,this.m,u,null),tE(this,u)),4==t&&eE(this),this.i&&!this.J&&(4==t?kI(this.l,this):(this.i=!1,$x(this)))}else(function(e){var t={};e=(e.g&&2<=tI(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!a_(e[n])){var r=rx(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Tx(12)):(this.o=0,Tx(13)),eE(this),Zx(this)}}}catch(t){}},Fw.mb=function(){if(this.g){var e=tI(this.g),t=this.g.ja();this.C<t.length&&(Jx(this),Qx(this,e,t),this.i&&4!=e&&$x(this))}},Fw.cancel=function(){this.J=!0,eE(this)},Fw.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ix(),Tx(17)),eE(this),this.o=2,Zx(this)):Xx(this,this.Y-e)};var rE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iE(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof iE){this.h=e.h,oE(this,e.j),this.s=e.s,this.g=e.g,uE(this,e.m),this.l=e.l;var t=e.i,n=new kE;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),sE(this,n),this.o=e.o}else e&&(t=String(e).match(rE))?(this.h=!1,oE(this,t[1]||"",!0),this.s=fE(t[2]||""),this.g=fE(t[3]||"",!0),uE(this,t[4]),this.l=fE(t[5]||"",!0),sE(this,t[6]||"",!0),this.o=fE(t[7]||"")):(this.h=!1,this.i=new kE(null,this.h))}function aE(e){return new iE(e)}function oE(e,t,n){e.j=n?fE(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function uE(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function sE(e,t,n){t instanceof kE?(e.i=t,function(e,t){t&&!e.j&&(bE(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wE(this,t),xE(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=hE(t,yE)),e.i=new kE(t,e.h))}function cE(e,t,n){e.i.set(t,n)}function lE(e){return cE(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fE(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function hE(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,dE),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dE(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}iE.prototype.toString=function(){var e=[],t=this.j;t&&e.push(hE(t,pE,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(hE(t,pE,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(hE(n,"/"==n.charAt(0)?mE:vE,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",hE(n,gE)),e.join("")};var pE=/[#\/\?@]/g,vE=/[#\?:]/g,mE=/[#\?]/g,yE=/[#\?@]/g,gE=/#/g;function kE(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function bE(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wE(e,t){bE(e),t=EE(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _E(e,t){return bE(e),t=EE(e,t),e.g.has(t)}function xE(e,t,n){wE(e,t),0<n.length&&(e.i=null,e.g.set(EE(e,t),t_(n)),e.h+=n.length)}function EE(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Fw=kE.prototype).add=function(e,t){bE(this),this.i=null,e=EE(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Fw.forEach=function(e,t){bE(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Fw.ta=function(){bE(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Fw.Z=function(e){bE(this);var t=[];if("string"===typeof e)_E(this,e)&&(t=t.concat(this.g.get(EE(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Fw.set=function(e,t){return bE(this),this.i=null,_E(this,e=EE(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Fw.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Fw.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var IE=y((function e(t,n){d(this,e),this.g=t,this.map=n}));function SE(e){this.l=e||TE,qw.PerformanceNavigationTiming?e=0<(e=qw.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qw.g&&qw.g.Ka&&qw.g.Ka()&&qw.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var TE=10;function CE(e){return!!e.h||!!e.g&&e.g.size>=e.j}function NE(e){return e.h?1:e.g?e.g.size:0}function AE(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function PE(e,t){e.g?e.g.add(t):e.h=t}function RE(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function OE(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=T(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return t_(e.i)}SE.prototype.cancel=function(){if(this.i=OE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=T(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var DE,LE=function(){function e(){d(this,e)}return y(e,[{key:"stringify",value:function(e){return qw.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return qw.JSON.parse(e,void 0)}}]),e}();function ME(){this.g=new LE}function UE(e,t,n){var r=n||"";try{nE(e,(function(e,n){var i=e;Gw(e)&&(i=X_(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function FE(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function jE(e){this.l=e.fc||null,this.j=e.ob||!1}function VE(e,t){Q_.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=zE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jw(jE,Rx),jE.prototype.g=function(){return new VE(this.l,this.j)},jE.prototype.i=(DE={},function(){return DE}),Jw(VE,Q_);var zE=0;function BE(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function qE(e){e.readyState=4,e.l=null,e.j=null,e.A=null,KE(e)}function KE(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Fw=VE.prototype).open=function(e,t){if(this.readyState!=zE)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,KE(this)},Fw.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||qw).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Fw.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qE(this)),this.readyState=zE},Fw.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,KE(this)),this.g&&(this.readyState=3,KE(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof qw.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;BE(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Fw.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qE(this):KE(this),3==this.readyState&&BE(this)}},Fw.Za=function(e){this.g&&(this.response=this.responseText=e,qE(this))},Fw.Ya=function(e){this.g&&(this.response=e,qE(this))},Fw.ka=function(){this.g&&qE(this)},Fw.setRequestHeader=function(e,t){this.v.append(e,t)},Fw.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Fw.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(VE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var GE=qw.JSON.parse;function HE(e){Q_.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=WE,this.L=this.M=!1}Jw(HE,Q_);var WE="",QE=/^https?$/i,YE=["POST","PUT"];function $E(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,XE(e),ZE(e)}function XE(e){e.F||(e.F=!0,Y_(e,"complete"),Y_(e,"error"))}function JE(e){if(e.h&&"undefined"!=typeof Bw&&(!e.C[1]||4!=tI(e)||2!=e.da()))if(e.v&&4==tI(e))hx(e.La,0,e);else if(Y_(e,"readystatechange"),4==tI(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(rE)[1]||null;!a&&qw.self&&qw.self.location&&(a=qw.self.location.protocol.slice(0,-1)),i=!QE.test(a?a.toLowerCase():"")}t=i}if(t)Y_(e,"complete"),Y_(e,"success");else{e.m=6;try{var o=2<tI(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",XE(e)}}finally{ZE(e)}}}function ZE(e,t){if(e.g){eI(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Y_(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function eI(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(qw.clearTimeout(e.A),e.A=null)}function tI(e){return e.g?e.g.readyState:0}function nI(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case WE:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(cS){return null}}function rI(e){var t="";return N_(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function iI(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rI(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):cE(e,t,n))}function aI(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function oI(e){this.Ga=0,this.j=[],this.l=new kx,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=aI("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=aI("baseRetryDelayMs",5e3,e),this.hb=aI("retryDelaySeedMs",1e4,e),this.eb=aI("forwardChannelMaxRetries",2,e),this.xa=aI("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new SE(e&&e.concurrentRequestLimit),this.Ja=new ME,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function uI(e){if(cI(e),3==e.H){var t=e.W++,n=aE(e.I);if(cE(n,"SID",e.K),cE(n,"RID",t),cE(n,"TYPE","terminate"),hI(e,n),(t=new Vx(e,e.l,t)).L=2,t.v=lE(aE(n)),n=!1,qw.navigator&&qw.navigator.sendBeacon)try{n=qw.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&qw.Image&&((new Image).src=t.v,n=!0),n||(t.g=EI(t.l,null),t.g.ha(t.v)),t.G=Date.now(),$x(t)}_I(e)}function sI(e){e.g&&(mI(e),e.g.cancel(),e.g=null)}function cI(e){sI(e),e.u&&(qw.clearTimeout(e.u),e.u=null),gI(e),e.i.cancel(),e.m&&("number"===typeof e.m&&qw.clearTimeout(e.m),e.m=null)}function lI(e){if(!CE(e.i)&&!e.m){e.m=!0;var t=e.Na;ax||sx(),ox||(ax(),ox=!0),ux.add(t,e),e.C=0}}function fI(e,t){var n;n=t?t.m:e.W++;var r=aE(e.I);cE(r,"SID",e.K),cE(r,"RID",n),cE(r,"AID",e.V),hI(e,r),e.o&&e.s&&iI(r,e.o,e.s),n=new Vx(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=dI(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),PE(e.i,n),Gx(n,r,t)}function hI(e,t){e.na&&N_(e.na,(function(e,n){cE(t,n,e)})),e.h&&nE({},(function(e,n){cE(t,n,e)}))}function dI(e,t,n){n=Math.min(e.j.length,n);var r=e.h?$w(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{UE(l,o,"req"+c+"_")}catch(TT){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function pI(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ax||sx(),ox||(ax(),ox=!0),ux.add(t,e),e.A=0}}function vI(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Nx($w(e.Ma,e),bI(e,e.A)),e.A++,!0)}function mI(e){null!=e.B&&(qw.clearTimeout(e.B),e.B=null)}function yI(e){e.g=new Vx(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=aE(e.wa);cE(t,"RID","rpc"),cE(t,"SID",e.K),cE(t,"AID",e.V),cE(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&cE(t,"TO",e.qa),cE(t,"TYPE","xmlhttp"),hI(e,t),e.o&&e.s&&iI(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=lE(aE(t)),n.s=null,n.S=!0,Hx(n,e)}function gI(e){null!=e.v&&(qw.clearTimeout(e.v),e.v=null)}function kI(e,t){var n=null;if(e.g==t){gI(e),mI(e),e.g=null;var r=2}else{if(!AE(e.i,t))return;n=t.F,RE(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Y_(r=xx(),new Cx(r,n)),lI(e)}else pI(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(NE(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Nx($w(e.Na,e,t),bI(e,e.C)),e.C++,!0))}(e,t)||2==r&&vI(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:wI(e,5);break;case 4:wI(e,10);break;case 3:wI(e,6);break;default:wI(e,2)}}function bI(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function wI(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=$w(e.pb,e);n||(n=new iE("//www.google.com/images/cleardot.gif"),qw.location&&"http"==qw.location.protocol||oE(n,"https"),lE(n)),function(e,t){var n=new kx;if(qw.Image){var r=new Image;r.onload=Xw(FE,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Xw(FE,n,r,"TestLoadImage: error",!1,t),r.onabort=Xw(FE,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xw(FE,n,r,"TestLoadImage: timeout",!1,t),qw.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Tx(2);e.H=0,e.h&&e.h.za(t),_I(e),cI(e)}function _I(e){if(e.H=0,e.ma=[],e.h){var t=OE(e.i);0==t.length&&0==e.j.length||(n_(e.ma,t),n_(e.ma,e.j),e.i.i.length=0,t_(e.j),e.j.length=0),e.h.ya()}}function xI(e,t,n){var r=n instanceof iE?aE(n):new iE(n);if(""!=r.g)t&&(r.g=t+"."+r.g),uE(r,r.m);else{var i=qw.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new iE(null);r&&oE(a,r),t&&(a.g=t),i&&uE(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&cE(r,n,t),cE(r,"VER",e.ra),hI(e,r),r}function EI(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new HE(new jE({ob:!0})):new HE(e.va)).Oa(e.J),t}function II(){}function SI(){if(h_&&!(10<=Number(__)))throw Error("Environmental error: no available transport.")}function TI(e,t){Q_.call(this),this.g=new oI(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!a_(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!a_(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new AI(this)}function CI(e){Ux.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function NI(){Fx.call(this),this.status=1}function AI(e){this.g=e}function PI(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function RI(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function OI(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Fw=HE.prototype).Oa=function(e){this.M=e},Fw.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Lx.g(),this.C=this.u?Ox(this.u):Ox(Lx),this.g.onreadystatechange=$w(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void $E(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=T(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=qw.FormData&&e instanceof qw.FormData,!(0<=e_(YE,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=T(n);try{for(l.s();!(c=l.n()).done;){var f=u(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eI(this),0<this.B&&((this.L=function(e){return h_&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$w(this.ua,this)):this.A=hx(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){$E(this,s)}},Fw.ua=function(){"undefined"!=typeof Bw&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Y_(this,"timeout"),this.abort(8))},Fw.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Y_(this,"complete"),Y_(this,"abort"),ZE(this))},Fw.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ZE(this,!0)),HE.$.N.call(this)},Fw.La=function(){this.s||(this.G||this.v||this.l?JE(this):this.kb())},Fw.kb=function(){JE(this)},Fw.isActive=function(){return!!this.g},Fw.da=function(){try{return 2<tI(this)?this.g.status:-1}catch(DE){return-1}},Fw.ja=function(){try{return this.g?this.g.responseText:""}catch(DE){return""}},Fw.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),GE(t)}},Fw.Ia=function(){return this.m},Fw.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Fw=oI.prototype).ra=8,Fw.H=1,Fw.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Vx(this,this.l,e),n=this.s;if(this.U&&(n?R_(n=A_(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=dI(this,t,r),cE(i=aE(this.I),"RID",e),cE(i,"CVER",22),this.F&&cE(i,"X-HTTP-Session-Id",this.F),hI(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(rI(n)))+"&"+r:this.o&&iI(i,this.o,n)),PE(this.i,t),this.bb&&cE(i,"TYPE","init"),this.P?(cE(i,"$req",r),cE(i,"SID","null"),t.aa=!0,Gx(t,i,null)):Gx(t,i,r),this.H=2}}else 3==this.H&&(e?fI(this,e):0==this.j.length||CE(this.i)||fI(this))},Fw.Ma=function(){if(this.u=null,yI(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Nx($w(this.jb,this),e)}},Fw.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Tx(10),sI(this),yI(this))},Fw.ib=function(){null!=this.v&&(this.v=null,sI(this),vI(this),Tx(19))},Fw.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Tx(2)):(this.l.info("Failed to ping google.com"),Tx(1))},Fw.isActive=function(){return!!this.h&&this.h.isActive(this)},(Fw=II.prototype).Ba=function(){},Fw.Aa=function(){},Fw.za=function(){},Fw.ya=function(){},Fw.isActive=function(){return!0},Fw.Va=function(){},SI.prototype.g=function(e,t){return new TI(e,t)},Jw(TI,Q_),TI.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Tx(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=xI(e,null,e.Y),lI(e)},TI.prototype.close=function(){uI(this.g)},TI.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=X_(e),e=n);t.j.push(new IE(t.fb++,e)),3==t.H&&lI(t)},TI.prototype.N=function(){this.g.h=null,delete this.j,uI(this.g),delete this.g,TI.$.N.call(this)},Jw(CI,Ux),Jw(NI,Fx),Jw(AI,II),AI.prototype.Ba=function(){Y_(this.g,"a")},AI.prototype.Aa=function(e){Y_(this.g,new CI(e))},AI.prototype.za=function(e){Y_(this.g,new NI)},AI.prototype.ya=function(){Y_(this.g,"b")},Jw(PI,(function(){this.blockSize=-1})),PI.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},PI.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)RI(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){RI(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){RI(this,r),i=0;break}}this.h=i,this.i+=t},PI.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var DI={};function LI(e){return-128<=e&&128>e?function(e,t){var n=DI;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new OI([0|e],0>e?-1:0)})):new OI([0|e],0>e?-1:0)}function MI(e){if(isNaN(e)||!isFinite(e))return FI;if(0>e)return qI(MI(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=UI;return new OI(t,0)}var UI=4294967296,FI=LI(0),jI=LI(1),VI=LI(16777216);function zI(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function BI(e){return-1==e.h}function qI(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new OI(n,~e.h).add(jI)}function KI(e,t){return e.add(qI(t))}function GI(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function HI(e,t){this.g=e,this.h=t}function WI(e,t){if(zI(t))throw Error("division by zero");if(zI(e))return new HI(FI,FI);if(BI(e))return t=WI(qI(e),t),new HI(qI(t.g),qI(t.h));if(BI(t))return t=WI(e,qI(t)),new HI(qI(t.g),t.h);if(30<e.g.length){if(BI(e)||BI(t))throw Error("slowDivide_ only works with positive integers.");for(var n=jI,r=t;0>=r.X(e);)n=QI(n),r=QI(r);var i=YI(n,1),a=YI(r,1);for(r=YI(r,2),n=YI(n,2);!zI(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=YI(r,1),n=YI(n,1)}return t=KI(e,i.R(t)),new HI(i,t)}for(i=FI;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=MI(n)).R(t);BI(o)||0<o.X(e);)o=(a=MI(n-=r)).R(t);zI(a)&&(a=jI),i=i.add(a),e=KI(e,o)}return new HI(i,e)}function QI(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new OI(n,e.h)}function YI(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new OI(i,e.h)}(Fw=OI.prototype).ea=function(){if(BI(this))return-qI(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:UI+r)*t,t*=UI}return e},Fw.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(zI(this))return"0";if(BI(this))return"-"+qI(this).toString(e);for(var t=MI(Math.pow(e,6)),n=this,r="";;){var i=WI(n,t).g,a=((0<(n=KI(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(zI(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Fw.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Fw.X=function(e){return BI(e=KI(this,e))?-1:zI(e)?0:1},Fw.abs=function(){return BI(this)?qI(this):this},Fw.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new OI(n,-2147483648&n[n.length-1]?-1:0)},Fw.R=function(e){if(zI(this)||zI(e))return FI;if(BI(this))return BI(e)?qI(this).R(qI(e)):qI(qI(this).R(e));if(BI(e))return qI(this.R(qI(e)));if(0>this.X(VI)&&0>e.X(VI))return MI(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,GI(n,2*r+2*i),n[2*r+2*i+1]+=a*s,GI(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,GI(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,GI(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new OI(n,0)},Fw.gb=function(e){return WI(this,e).h},Fw.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new OI(n,this.h&e.h)},Fw.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new OI(n,this.h|e.h)},Fw.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new OI(n,this.h^e.h)},SI.prototype.createWebChannel=SI.prototype.g,TI.prototype.send=TI.prototype.u,TI.prototype.open=TI.prototype.m,TI.prototype.close=TI.prototype.close,Ax.NO_ERROR=0,Ax.TIMEOUT=8,Ax.HTTP_ERROR=6,Px.COMPLETE="complete",Dx.EventType=Mx,Mx.OPEN="a",Mx.CLOSE="b",Mx.ERROR="c",Mx.MESSAGE="d",Q_.prototype.listen=Q_.prototype.O,HE.prototype.listenOnce=HE.prototype.P,HE.prototype.getLastError=HE.prototype.Sa,HE.prototype.getLastErrorCode=HE.prototype.Ia,HE.prototype.getStatus=HE.prototype.da,HE.prototype.getResponseJson=HE.prototype.Wa,HE.prototype.getResponseText=HE.prototype.ja,HE.prototype.send=HE.prototype.ha,HE.prototype.setWithCredentials=HE.prototype.Oa,PI.prototype.digest=PI.prototype.l,PI.prototype.reset=PI.prototype.reset,PI.prototype.update=PI.prototype.j,OI.prototype.add=OI.prototype.add,OI.prototype.multiply=OI.prototype.R,OI.prototype.modulo=OI.prototype.gb,OI.prototype.compare=OI.prototype.X,OI.prototype.toNumber=OI.prototype.ea,OI.prototype.toString=OI.prototype.toString,OI.prototype.getBits=OI.prototype.D,OI.fromNumber=MI,OI.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return qI(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=MI(Math.pow(n,8)),i=FI,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=MI(Math.pow(n,o)),i=i.R(o).add(MI(u))):i=(i=i.R(r)).add(MI(u))}return i};var $I=zw.createWebChannelTransport=function(){return new SI},XI=zw.getStatEventTarget=function(){return xx()},JI=zw.ErrorCode=Ax,ZI=zw.EventType=Px,eS=zw.Event=wx,tS=zw.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},nS=(zw.FetchXmlHttpFactory=jE,zw.WebChannel=Dx),rS=zw.XhrIo=HE,iS=zw.Md5=PI,aS=zw.Integer=OI,oS="@firebase/firestore",uS=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();uS.UNAUTHENTICATED=new uS(null),uS.GOOGLE_CREDENTIALS=new uS("google-credentials-uid"),uS.FIRST_PARTY=new uS("first-party-uid"),uS.MOCK_USER=new uS("mock-user");var sS="10.3.1",cS=new fo("@firebase/firestore");function lS(){return cS.logLevel}function fS(e){if(cS.logLevel<=io.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pS);cS.debug.apply(cS,["Firestore (".concat(sS,"): ").concat(e)].concat(h(i)))}}function hS(e){if(cS.logLevel<=io.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pS);cS.error.apply(cS,["Firestore (".concat(sS,"): ").concat(e)].concat(h(i)))}}function dS(e){if(cS.logLevel<=io.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pS);cS.warn.apply(cS,["Firestore (".concat(sS,"): ").concat(e)].concat(h(i)))}}function pS(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function vS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(sS,") INTERNAL ASSERTION FAILED: ")+e;throw hS(t),new Error(t)}function mS(e,t){e||vS()}function yS(e,t){return e}var gS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kS=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(Ua),bS=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),wS=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),_S=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uS.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),xS=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),ES=function(){function e(t){d(this,e),this.t=t,this.currentUser=uS.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new bS;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new bS,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){fS("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(fS("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bS)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(fS("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(mS("string"==typeof n.accessToken),new wS(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return mS(null===e||"string"==typeof e),new uS(e)}}]),e}(),IS=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=uS.FIRST_PARTY,this.I=new Map}return y(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),SS=function(){function e(t,n,r){d(this,e),this.l=t,this.h=n,this.P=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new IS(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uS.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),TS=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),CS=function(){function e(t){d(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&fS("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,fS("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){fS("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):fS("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(mS("string"==typeof t.token),e.R=t.token,new TS(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function NS(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var AS=function(){function e(){d(this,e)}return y(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=NS(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function PS(e,t){return e<t?-1:e>t?1:0}function RS(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function OS(e){return e+"\0"}var DS=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new kS(gS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new kS(gS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new kS(gS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kS(gS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?PS(this.nanoseconds,e.nanoseconds):PS(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),LS=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new DS(0,0))}},{key:"max",value:function(){return new e(new DS(253402300799,999999999))}}]),e}(),MS=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&vS(),void 0===r?r=t.length-n:r>t.length-n&&vS(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),US=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new kS(gS.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(MS),FS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jS=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return FS.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new kS(gS.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new kS(gS.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new kS(gS.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new kS(gS.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(MS),VS=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===US.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(US.fromString(t))}},{key:"fromName",value:function(t){return new e(US.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(US.emptyPath())}},{key:"comparator",value:function(e,t){return US.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new US(t.slice()))}}]),e}(),zS=y((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function BS(e){return e.fields.find((function(e){return 2===e.kind}))}function qS(e){return e.fields.filter((function(e){return 2!==e.kind}))}zS.UNKNOWN_ID=-1;var KS=y((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var GS=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,QS.min())}}]),e}();function HS(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=LS.fromTimestamp(1e9===r?new DS(n+1,0):new DS(n,r));return new QS(i,VS.empty(),t)}function WS(e){return new QS(e.readTime,e.key,-1)}var QS=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(LS.min(),VS.empty(),-1)}},{key:"max",value:function(){return new e(LS.max(),VS.empty(),-1)}}]),e}();function YS(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=VS.comparator(e.documentKey,t.documentKey))?n:PS(e.largestBatchId,t.largestBatchId)}var $S="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",XS=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function JS(e){return ZS.apply(this,arguments)}function ZS(){return(ZS=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===gS.FAILED_PRECONDITION&&t.message===$S){e.next=2;break}throw t;case 2:fS("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eT=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&vS(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=T(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),tT=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new bS,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new iT(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=cT(e.target.error);r.m.reject(new iT(t,n))}}return y(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(fS("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new oT(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new iT(n,t)}}}]),e}(),nT=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Pa())&&hS("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"N",value:function(){var e=Za(Xa().mark((function e(t){var n=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return fS("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new iT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new kS(gS.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new kS(gS.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new iT(t,n))},i.onupgradeneeded=function(e){fS("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){fS("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Za(Xa().mark((function e(t,n,r,i){var a,o,u,s,c=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=Xa().mark((function e(){var n,u,s,l;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.N(t);case 4:return c.db=e.sent,n=tT.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),eT.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.g;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,fS("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if(!(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return fS("SimpleDb","Removing database:",e),uT(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!Ma())return!1;if(e.v())return!0;var t=Pa(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/socialweb",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),rT=function(){function e(t){d(this,e),this.q=t,this.K=!1,this.$=null}return y(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return uT(this.q.delete())}}]),e}(),iT=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,gS.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(kS);function aT(e){return"IndexedDbTransactionError"===e.name}var oT=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(fS("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(fS("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),uT(n)}},{key:"add",value:function(e){return fS("SimpleDb","ADD",this.store.name,e,e),uT(this.store.add(e))}},{key:"get",value:function(e){var t=this;return uT(this.store.get(e)).next((function(n){return void 0===n&&(n=null),fS("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return fS("SimpleDb","DELETE",this.store.name,e),uT(this.store.delete(e))}},{key:"count",value:function(){return fS("SimpleDb","COUNT",this.store.name),uT(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new eT((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new eT((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){fS("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new eT((function(n,r){t.onerror=function(e){var t=cT(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new eT((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new rT(i),o=t(i.primaryKey,i.value,a);if(o instanceof eT){var u=o.catch((function(e){return a.done(),eT.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return eT.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function uT(e){return new eT((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=cT(e.target.error);n(t)}}))}var sT=!1;function cT(e){var t=nT.D(Pa());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new kS("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return sT||(sT=!0,setTimeout((function(){throw r}),0)),r}}return e}var lT=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return y(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;fS("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=fS,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!aT(e.t4)){e.next=17;break}fS("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,JS(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),fT=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"ne",value:function(){var e=Za(Xa().mark((function e(){var t,n=this,r=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return eT.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return fS("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return fS("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=WS(t);YS(r,n)>0&&(n=r)})),new QS(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),hT=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function dT(e){return null==e}function pT(e){return 0===e&&1/e==-1/0}function vT(e){return"number"==typeof e&&Number.isInteger(e)&&!pT(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function mT(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=gT(t)),t=yT(e.get(n),t);return gT(t)}function yT(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function gT(e){return e+"\x01\x01"}function kT(e){var t=e.length;if(mS(t>=2),2===t)return mS("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),US.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&vS(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:vS()}a=o+2}return new US(r)}hT.ae=-1;var bT=["userId","batchId"];function wT(e,t){return[e,mT(t)]}function _T(e,t,n){return[e,mT(t),n]}var xT={},ET=["prefixPath","collectionGroup","readTime","documentId"],IT=["prefixPath","collectionGroup","documentId"],ST=["collectionGroup","readTime","prefixPath","documentId"],TT=["canonicalId","targetId"],CT=["targetId","path"],NT=["path","targetId"],AT=["collectionId","parent"],PT=["indexId","uid"],RT=["uid","sequenceNumber"],OT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DT=["indexId","uid","orderedDocumentKey"],LT=["userId","collectionPath","documentId"],MT=["userId","collectionPath","largestBatchId"],UT=["userId","collectionGroup","largestBatchId"],FT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),jT=[].concat(h(FT),["documentOverlays"]),VT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zT=VT,BT=[].concat(zT,["indexConfiguration","indexState","indexEntries"]),qT=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return y(n)}(XS);function KT(e,t){var n=yS(e);return nT.O(n.ue,t)}function GT(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function HT(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function WT(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var QT=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||$T.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$T.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$T.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new YT(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new YT(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new YT(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new YT(this.root,e,this.comparator,!0)}}]),e}(),YT=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),$T=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw vS();if(this.right.isRed())throw vS();var e=this.left.check();if(e!==this.right.check())throw vS();return e+(this.isRed()?0:1)}}]),e}();$T.EMPTY=null,$T.RED=!0,$T.BLACK=!1,$T.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw vS()}},{key:"value",get:function(){throw vS()}},{key:"color",get:function(){throw vS()}},{key:"left",get:function(){throw vS()}},{key:"right",get:function(){throw vS()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new $T(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var XT=function(){function e(t){d(this,e),this.comparator=t,this.data=new QT(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new JT(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new JT(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),JT=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ZT(e){return e.hasNext()?e.getNext():void 0}var eC=function(){function e(t){d(this,e),this.fields=t,t.sort(jS.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new XT(jS.comparator),i=T(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=T(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=T(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return RS(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),tC=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(I(Error));var nC=function(e){function t(e){d(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return PS(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new tC("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();nC.EMPTY_BYTE_STRING=new nC("");var rC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iC(e){if(mS(!!e),"string"==typeof e){var t=0,n=rC.exec(e);if(mS(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:aC(e.seconds),nanos:aC(e.nanos)}}function aC(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function oC(e){return"string"==typeof e?nC.fromBase64String(e):nC.fromUint8Array(e)}function uC(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sC(e){var t=e.mapValue.fields.__previous_value__;return uC(t)?sC(t):t}function cC(e){var t=iC(e.mapValue.fields.__local_write_time__.timestampValue);return new DS(t.seconds,t.nanos)}var lC=y((function e(t,n,r,i,a,o,u,s,c){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),fC=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),hC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dC={nullValue:"NULL_VALUE"};function pC(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?uC(e)?4:CC(e)?9007199254740991:10:vS()}function vC(e,t){if(e===t)return!0;var n=pC(e);if(n!==pC(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cC(e).isEqual(cC(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=iC(e.timestampValue),r=iC(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return oC(e.bytesValue).isEqual(oC(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return aC(e.geoPointValue.latitude)===aC(t.geoPointValue.latitude)&&aC(e.geoPointValue.longitude)===aC(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return aC(e.integerValue)===aC(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=aC(e.doubleValue),r=aC(t.doubleValue);return n===r?pT(n)===pT(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return RS(e.arrayValue.values||[],t.arrayValue.values||[],vC);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(GT(n)!==GT(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vC(n[i],r[i])))return!1;return!0}(e,t);default:return vS()}}function mC(e,t){return void 0!==(e.values||[]).find((function(e){return vC(e,t)}))}function yC(e,t){if(e===t)return 0;var n=pC(e),r=pC(t);if(n!==r)return PS(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return PS(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=aC(e.integerValue||e.doubleValue),r=aC(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gC(e.timestampValue,t.timestampValue);case 4:return gC(cC(e),cC(t));case 5:return PS(e.stringValue,t.stringValue);case 6:return function(e,t){var n=oC(e),r=oC(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=PS(n[i],r[i]);if(0!==a)return a}return PS(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=PS(aC(e.latitude),aC(t.latitude));return 0!==n?n:PS(aC(e.longitude),aC(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=yC(n[i],r[i]);if(a)return a}return PS(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===hC.mapValue&&t===hC.mapValue)return 0;if(e===hC.mapValue)return 1;if(t===hC.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=PS(r[o],a[o]);if(0!==u)return u;var s=yC(n[r[o]],i[a[o]]);if(0!==s)return s}return PS(r.length,a.length)}(e.mapValue,t.mapValue);default:throw vS()}}function gC(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return PS(e,t);var n=iC(e),r=iC(t),i=PS(n.seconds,r.seconds);return 0!==i?i:PS(n.nanos,r.nanos)}function kC(e){return bC(e)}function bC(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=iC(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return oC(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return VS.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=T(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=bC(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=T(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(bC(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):vS()}function wC(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function _C(e){return!!e&&"integerValue"in e}function xC(e){return!!e&&"arrayValue"in e}function EC(e){return!!e&&"nullValue"in e}function IC(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function SC(e){return!!e&&"mapValue"in e}function TC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return HT(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=TC(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=TC(e.arrayValue.values[r]);return n}return Object.assign({},e)}function CC(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function NC(e){return"nullValue"in e?dC:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?wC(fC.empty(),VS.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:vS()}function AC(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?wC(fC.empty(),VS.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?hC:vS()}function PC(e,t){var n=yC(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function RC(e,t){var n=yC(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var OC=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!SC(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=TC(t)}},{key:"setAll",value:function(e){var t=this,n=jS.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=TC(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());SC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return vC(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];SC(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){HT(t,(function(t,n){return e[t]=n}));var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(TC(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function DC(e){var t=[];return HT(e.fields,(function(e,n){var r=new jS([e]);if(SC(n)){var i=DC(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=T(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new eC(t)}var LC=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(LS.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=OC.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=OC.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=LS.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,LS.min(),LS.min(),LS.min(),OC.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,LS.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,LS.min(),LS.min(),OC.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,LS.min(),LS.min(),OC.empty(),2)}}]),e}(),MC=y((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function UC(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?VS.comparator(VS.fromName(o.referenceValue),n.key):yC(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function FC(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!vC(e.position[n],t.position[n]))return!1;return!0}var jC=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function VC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var zC=y((function e(){d(this,e)})),BC=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yC(t,this.value)):null!==t&&pC(this.value)===pC(t)&&this.matchesComparison(yC(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vS()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new JC(e,t,r):"array-contains"===t?new nN(e,r):"in"===t?new rN(e,r):"not-in"===t?new iN(e,r):"array-contains-any"===t?new aN(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new ZC(e,n):new eN(e,n)}}]),n}(zC),qC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return y(n,[{key:"matches",value:function(e){return KC(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=T(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(zC);function KC(e){return"and"===e.op}function GC(e){return"or"===e.op}function HC(e){return WC(e)&&KC(e)}function WC(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof qC)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function QC(e){if(e instanceof BC)return e.field.canonicalString()+e.op.toString()+kC(e.value);if(HC(e))return e.filters.map((function(e){return QC(e)})).join(",");var t=e.filters.map((function(e){return QC(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function YC(e,t){return e instanceof BC?function(e,t){return t instanceof BC&&e.op===t.op&&e.field.isEqual(t.field)&&vC(e.value,t.value)}(e,t):e instanceof qC?function(e,t){return t instanceof qC&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&YC(n,t.filters[r])}),!0)}(e,t):void vS()}function $C(e,t){var n=e.filters.concat(t);return qC.create(n,e.op)}function XC(e){return e instanceof BC?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(kC(e.value))}(e):e instanceof qC?function(e){return e.op.toString()+" {"+e.getFilters().map(XC).join(" ,")+"}"}(e):"Filter"}var JC=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=VS.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=VS.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(BC),ZC=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=tN("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(BC),eN=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=tN("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(BC);function tN(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return VS.fromName(e.referenceValue)}))}var nN=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return xC(t)&&mC(t.arrayValue,this.value)}}]),n}(BC),rN=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&mC(this.value.arrayValue,t)}}]),n}(BC),iN=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(mC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!mC(this.value.arrayValue,t)}}]),n}(BC),aN=function(e){k(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!xC(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return mC(t.value.arrayValue,e)}))}}]),n}(BC),oN=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function uN(e){return new oN(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function sN(e){var t=yS(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return QC(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),dT(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return kC(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return kC(e)})).join(",")),t.he=n}return t.he}function cN(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!VC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!YC(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!FC(e.startAt,t.startAt)&&FC(e.endAt,t.endAt)}function lN(e){return VS.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function fN(e,t){return e.filters.filter((function(e){return e instanceof BC&&e.field.isEqual(t)}))}function hN(e,t,n){var r,i=dC,a=!0,o=T(fN(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=dC,c=!0;switch(u.op){case"<":case"<=":s=NC(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=dC}PC({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];PC({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function dN(e,t,n){var r,i=hC,a=!0,o=T(fN(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=hC,c=!0;switch(u.op){case">=":case">":s=AC(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=hC}RC({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];RC({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var pN=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}));function vN(e,t,n,r,i,a,o,u){return new pN(e,t,n,r,i,a,o,u)}function mN(e){return new pN(e)}function yN(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gN(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kN(e){var t,n=T(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function bN(e){return null!==e.collectionGroup}function wN(e){var t=yS(e);if(null===t.Pe){t.Pe=[];var n=kN(t),r=gN(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new jC(n)),t.Pe.push(new jC(jS.keyField(),"asc"));else{var i,a=!1,o=T(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new jC(jS.keyField(),s))}}}return t.Pe}function _N(e){var t=yS(e);return t.Ie||(t.Ie=xN(t,wN(e))),t.Ie}function xN(e,t){if("F"===e.limitType)return uN(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new jC(e.field,t)}));var n=e.endAt?new MC(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new MC(e.startAt.position,e.startAt.inclusive):null;return uN(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function EN(e,t){t.getFirstInequalityField(),kN(e);var n=e.filters.concat([t]);return new pN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function IN(e,t,n){return new pN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function SN(e,t){return cN(_N(e),_N(t))&&e.limitType===t.limitType}function TN(e){return"".concat(sN(_N(e)),"|lt:").concat(e.limitType)}function CN(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return XC(e)})).join(", "),"]")),dT(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return kC(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return kC(e)})).join(",")),"Target(".concat(t,")")}(_N(e)),"; limitType=").concat(e.limitType,")")}function NN(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):VS.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=T(wN(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=T(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=UC(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wN(e),t))&&!(e.endAt&&!function(e,t,n){var r=UC(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wN(e),t))}(e,t)}function AN(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function PN(e){return function(t,n){var r,i=!1,a=T(wN(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=RN(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function RN(e,t,n){var r=e.field.isKeyField()?VS.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?yC(r,i):vS()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return vS()}}var ON=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){HT(this.inner,(function(t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=u(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return WT(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),DN=new QT(VS.comparator);function LN(){return DN}var MN=new QT(VS.comparator);function UN(){for(var e=MN,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function FN(e){var t=MN;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function jN(){return zN()}function VN(){return zN()}function zN(){return new ON((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var BN=new QT(VS.comparator),qN=new XT(VS.comparator);function KN(){for(var e=qN,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var GN=new XT(PS);function HN(){return GN}function WN(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pT(t)?"-0":t}}function QN(e){return{integerValue:""+e}}function YN(e,t){return vT(t)?QN(t):WN(e,t)}var $N=y((function e(){d(this,e),this._=void 0}));function XN(e,t,n){return e instanceof eA?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&uC(t)&&(t=sC(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof tA?nA(e,t):e instanceof rA?iA(e,t):function(e,t){var n=ZN(e,t),r=oA(n)+oA(e.Te);return _C(n)&&_C(e.Te)?QN(r):WN(e.serializer,r)}(e,t)}function JN(e,t,n){return e instanceof tA?nA(e,t):e instanceof rA?iA(e,t):n}function ZN(e,t){return e instanceof aA?function(e){return _C(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var eA=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}($N),tA=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}($N);function nA(e,t){var n,r=uA(t),i=T(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return vC(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var rA=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}($N);function iA(e,t){var n,r=uA(t),i=T(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!vC(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var aA=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return y(n)}($N);function oA(e){return aC(e.integerValue||e.doubleValue)}function uA(e){return xC(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var sA=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var cA=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),lA=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function fA(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var hA=y((function e(){d(this,e)}));function dA(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new IA(e.key,lA.none()):new gA(e.key,e.data,lA.none());var n,r=e.data,i=OC.empty(),a=new XT(jS.comparator),o=T(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new kA(e.key,i,new eC(a.toArray()),lA.none())}function pA(e,t,n){e instanceof gA?function(e,t,n){var r=e.value.clone(),i=wA(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof kA?function(e,t,n){if(fA(e.precondition,t)){var r=wA(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(bA(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vA(e,t,n,r){return e instanceof gA?function(e,t,n,r){if(!fA(e.precondition,t))return n;var i=e.value.clone(),a=_A(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof kA?function(e,t,n,r){if(!fA(e.precondition,t))return n;var i=_A(e.fieldTransforms,r,t),a=t.data;return a.setAll(bA(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return fA(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function mA(e,t){var n,r=null,i=T(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=ZN(a.transform,o||null);null!=u&&(null===r&&(r=OC.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function yA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&RS(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof tA&&t instanceof tA||e instanceof rA&&t instanceof rA?RS(e.elements,t.elements,vC):e instanceof aA&&t instanceof aA?vC(e.Te,t.Te):e instanceof eA&&t instanceof eA}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var gA=function(e){k(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(hA),kA=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(hA);function bA(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function wA(e,t,n){var r=new Map;mS(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,JN(o,u,n[i]))}return r}function _A(e,t,n){var r,i=new Map,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,XN(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var xA,EA,IA=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(hA),SA=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(hA),TA=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&pA(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=T(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=vA(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=T(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=vA(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=VN();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=dA(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(LS.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),KN())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&RS(this.mutations,e.mutations,(function(e,t){return yA(e,t)}))&&RS(this.baseMutations,e.baseMutations,(function(e,t){return yA(e,t)}))}}]),e}(),CA=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){mS(t.mutations.length===r.length);for(var i=BN,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),NA=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),AA=y((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function PA(e){switch(e){default:return vS();case gS.CANCELLED:case gS.UNKNOWN:case gS.DEADLINE_EXCEEDED:case gS.RESOURCE_EXHAUSTED:case gS.INTERNAL:case gS.UNAVAILABLE:case gS.UNAUTHENTICATED:return!1;case gS.INVALID_ARGUMENT:case gS.NOT_FOUND:case gS.ALREADY_EXISTS:case gS.PERMISSION_DENIED:case gS.FAILED_PRECONDITION:case gS.ABORTED:case gS.OUT_OF_RANGE:case gS.UNIMPLEMENTED:case gS.DATA_LOSS:return!0}}function RA(e){if(void 0===e)return hS("GRPC error has no .code"),gS.UNKNOWN;switch(e){case xA.OK:return gS.OK;case xA.CANCELLED:return gS.CANCELLED;case xA.UNKNOWN:return gS.UNKNOWN;case xA.DEADLINE_EXCEEDED:return gS.DEADLINE_EXCEEDED;case xA.RESOURCE_EXHAUSTED:return gS.RESOURCE_EXHAUSTED;case xA.INTERNAL:return gS.INTERNAL;case xA.UNAVAILABLE:return gS.UNAVAILABLE;case xA.UNAUTHENTICATED:return gS.UNAUTHENTICATED;case xA.INVALID_ARGUMENT:return gS.INVALID_ARGUMENT;case xA.NOT_FOUND:return gS.NOT_FOUND;case xA.ALREADY_EXISTS:return gS.ALREADY_EXISTS;case xA.PERMISSION_DENIED:return gS.PERMISSION_DENIED;case xA.FAILED_PRECONDITION:return gS.FAILED_PRECONDITION;case xA.ABORTED:return gS.ABORTED;case xA.OUT_OF_RANGE:return gS.OUT_OF_RANGE;case xA.UNIMPLEMENTED:return gS.UNIMPLEMENTED;case xA.DATA_LOSS:return gS.DATA_LOSS;default:return vS()}}(EA=xA||(xA={}))[EA.OK=0]="OK",EA[EA.CANCELLED=1]="CANCELLED",EA[EA.UNKNOWN=2]="UNKNOWN",EA[EA.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",EA[EA.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",EA[EA.NOT_FOUND=5]="NOT_FOUND",EA[EA.ALREADY_EXISTS=6]="ALREADY_EXISTS",EA[EA.PERMISSION_DENIED=7]="PERMISSION_DENIED",EA[EA.UNAUTHENTICATED=16]="UNAUTHENTICATED",EA[EA.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",EA[EA.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",EA[EA.ABORTED=10]="ABORTED",EA[EA.OUT_OF_RANGE=11]="OUT_OF_RANGE",EA[EA.UNIMPLEMENTED=12]="UNIMPLEMENTED",EA[EA.INTERNAL=13]="INTERNAL",EA[EA.UNAVAILABLE=14]="UNAVAILABLE",EA[EA.DATA_LOSS=15]="DATA_LOSS";var OA=null;function DA(){return new TextEncoder}var LA=new aS([4294967295,4294967295],0);function MA(e){var t=DA().encode(e),n=new iS;return n.update(t),new Uint8Array(n.digest())}function UA(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new aS([n,r],0),new aS([i,a],0)]}var FA=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jA("Invalid padding: ".concat(n));if(r<0)throw new jA("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new jA("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new jA("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=aS.fromNumber(this.Ae)}return y(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(aS.fromNumber(n)));return 1===r.compare(LA)&&(r=new aS([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=u(UA(MA(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=u(UA(MA(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),jA=function(e){k(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(I(Error)),VA=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,zA.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(LS.min(),i,new QT(PS),LN(),KN())}}]),e}(),zA=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,KN(),KN(),KN())}}]),e}(),BA=y((function e(t,n,r,i){d(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i})),qA=y((function e(t,n){d(this,e),this.targetId=t,this.ye=n})),KA=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nC.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),GA=function(){function e(){d(this,e),this.we=0,this.Se=QA(),this.be=nC.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}return y(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"ve",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.Ce}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}},{key:"xe",value:function(){var e=KN(),t=KN(),n=KN();return this.Se.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:vS()}})),new zA(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.Ce=!1,this.Se=QA()}},{key:"Ne",value:function(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.Ce=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.Ce=!0,this.De=!0}}]),e}(),HA=function(){function e(t){d(this,e),this.Qe=t,this.Ke=new Map,this.$e=LN(),this.Ue=WA(),this.We=new QT(PS)}return y(e,[{key:"Ge",value:function(e){var t,n=T(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(u){n.e(u)}finally{n.f()}var i,a=T(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.je(o,e.key,e.pe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:vS()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((function(e,r){n.Ye(r)&&t(r)}))}},{key:"Xe",value:function(e){var t=e.targetId,n=e.ye.count,r=this.et(t);if(r){var i=r.target;if(lN(i))if(0===n){var a=new VS(i.path);this.je(t,a,LC.newNoDocument(a,LS.min()))}else mS(1===n);else{var o=this.tt(t);if(o!==n){var u=this.nt(e),s=u?this.rt(u,e,o):1;if(0!==s){this.Ze(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(t,c)}null==OA||OA.it(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ye,this.Qe.st(),u,s))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=oC(o).toUint8Array()}catch(e){if(e instanceof tC)return dS("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new FA(n,s,l)}catch(e){return dS(e instanceof jA?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.ot(e,t.targetId)?0:2}},{key:"ot",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Qe.st(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.je(t,r,null),i++)})),i}},{key:"_t",value:function(e){var t=this,n=new Map;this.Ke.forEach((function(r,i){var a=t.et(i);if(a){if(r.current&&lN(a.target)){var o=new VS(a.target.path);null!==t.$e.get(o)||t.ut(i,o)||t.je(i,o,LC.newNoDocument(o,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}}));var r=KN();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$e.forEach((function(t,n){return n.setReadTime(e)}));var i=new VA(e,n,this.We,this.$e,r);return this.$e=LN(),this.Ue=WA(),this.We=new QT(PS),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this.ut(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new GA,this.Ke.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new XT(PS),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||fS("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new GA),this.Qe.getRemoteKeysForTarget(e).forEach((function(n){t.je(e,n,null)}))}},{key:"ut",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function WA(){return new QT(VS.comparator)}function QA(){return new QT(VS.comparator)}var YA={asc:"ASCENDING",desc:"DESCENDING"},$A={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XA={and:"AND",or:"OR"},JA=y((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function ZA(e,t){return e.useProto3Json||dT(t)?t:{value:t}}function eP(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function tP(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nP(e,t){return eP(e,t.toTimestamp())}function rP(e){return mS(!!e),LS.fromTimestamp(function(e){var t=iC(e);return new DS(t.seconds,t.nanos)}(e))}function iP(e,t){return function(e){return new US(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function aP(e){var t=US.fromString(e);return mS(CP(t)),t}function oP(e,t){return iP(e.databaseId,t.path)}function uP(e,t){var n=aP(t);if(n.get(1)!==e.databaseId.projectId)throw new kS(gS.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new kS(gS.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new VS(fP(n))}function sP(e,t){return iP(e.databaseId,t)}function cP(e){var t=aP(e);return 4===t.length?US.emptyPath():fP(t)}function lP(e){return new US(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fP(e){return mS(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function hP(e,t,n){return{name:oP(e,t),fields:n.value.mapValue.fields}}function dP(e,t,n){var r=uP(e,t.name),i=rP(t.updateTime),a=t.createTime?rP(t.createTime):LS.min(),o=new OC({mapValue:{fields:t.fields}}),u=LC.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function pP(e,t){return"found"in t?function(e,t){mS(!!t.found),t.found.name,t.found.updateTime;var n=uP(e,t.found.name),r=rP(t.found.updateTime),i=t.found.createTime?rP(t.found.createTime):LS.min(),a=new OC({mapValue:{fields:t.found.fields}});return LC.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){mS(!!t.missing),mS(!!t.readTime);var n=uP(e,t.missing),r=rP(t.readTime);return LC.newNoDocument(n,r)}(e,t):vS()}function vP(e,t){var n;if(t instanceof gA)n={update:hP(e,t.key,t.value)};else if(t instanceof IA)n={delete:oP(e,t.key)};else if(t instanceof kA)n={update:hP(e,t.key,t.data),updateMask:TP(t.fieldMask)};else{if(!(t instanceof SA))return vS();n={verify:oP(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof eA)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof tA)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof rA)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof aA)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw vS()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nP(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:vS()}(e,t.precondition)),n}function mP(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?lA.updateTime(rP(e.updateTime)):void 0!==e.exists?lA.exists(e.exists):lA.none()}(t.currentDocument):lA.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)mS("REQUEST_TIME"===t.setToServerValue),n=new eA;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new tA(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new rA(i)}else"increment"in t?n=new aA(e,t.increment):vS();var a=jS.fromServerFormat(t.fieldPath);return new sA(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=uP(e,t.update.name),a=new OC({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new eC(t.map((function(e){return jS.fromServerFormat(e)})))}(t.updateMask);return new kA(i,a,o,n,r)}return new gA(i,a,n,r)}if(t.delete){var u=uP(e,t.delete);return new IA(u,n)}if(t.verify){var s=uP(e,t.verify);return new SA(s,n)}return vS()}function yP(e,t){return{documents:[sP(e,t.path)]}}function gP(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=sP(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=sP(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return SP(qC.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:EP(e.field),direction:wP(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=ZA(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function kP(e){var t=cP(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){mS(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=bP(e);return t instanceof qC&&HC(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new jC(IP(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return dT(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new MC(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new MC(n,t)}(n.endAt)),vN(t,i,u,o,s,"F",c,l)}function bP(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=IP(e.unaryFilter.field);return BC.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=IP(e.unaryFilter.field);return BC.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=IP(e.unaryFilter.field);return BC.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=IP(e.unaryFilter.field);return BC.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vS()}}(e):void 0!==e.fieldFilter?function(e){return BC.create(IP(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vS()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qC.create(e.compositeFilter.filters.map((function(e){return bP(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vS()}}(e.compositeFilter.op))}(e):vS()}function wP(e){return YA[e]}function _P(e){return $A[e]}function xP(e){return XA[e]}function EP(e){return{fieldPath:e.canonicalString()}}function IP(e){return jS.fromServerFormat(e.fieldPath)}function SP(e){return e instanceof BC?function(e){if("=="===e.op){if(IC(e.value))return{unaryFilter:{field:EP(e.field),op:"IS_NAN"}};if(EC(e.value))return{unaryFilter:{field:EP(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(IC(e.value))return{unaryFilter:{field:EP(e.field),op:"IS_NOT_NAN"}};if(EC(e.value))return{unaryFilter:{field:EP(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:EP(e.field),op:_P(e.op),value:e.value}}}(e):e instanceof qC?function(e){var t=e.getFilters().map((function(e){return SP(e)}));return 1===t.length?t[0]:{compositeFilter:{op:xP(e.op),filters:t}}}(e):vS()}function TP(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function CP(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var NP=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LS.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:LS.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nC.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),AP=y((function e(t){d(this,e),this.ht=t}));function PP(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:RP(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:oP(e,t.key),fields:t.data.value.mapValue.fields,updateTime:eP(e,t.version.toTimestamp()),createTime:eP(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:OP(t.version)};else{if(!t.isUnknownDocument())return vS();r.unknownDocument={path:n.path.toArray(),version:OP(t.version)}}return r}function RP(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function OP(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function DP(e){var t=new DS(e.seconds,e.nanoseconds);return LS.fromTimestamp(t)}function LP(e,t){for(var n=(t.baseMutations||[]).map((function(t){return mP(e.ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return mP(e.ht,t)})),u=DS.fromMillis(t.localWriteTimeMs);return new TA(t.batchId,u,n,o)}function MP(e){var t,n=DP(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?DP(e.lastLimboFreeSnapshotVersion):LS.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return mS(1===e.documents.length),_N(mN(cP(e.documents[0])))}(e.query):function(e){return _N(kP(e))}(e.query),new NP(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,nC.fromBase64String(e.resumeToken))}function UP(e,t){var n,r=OP(t.snapshotVersion),i=OP(t.lastLimboFreeSnapshotVersion);n=lN(t.target)?yP(e.ht,t.target):gP(e.ht,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:sN(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function FP(e){var t=kP({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?IN(t,t.limit,"L"):t}function jP(e,t){return new NA(t.largestBatchId,mP(e.ht,t.overlayMutation))}function VP(e,t){var n=t.path.lastSegment();return[e,mT(t.path.popLast()),n]}function zP(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:OP(r.readTime),documentKey:mT(r.documentKey.path),largestBatchId:r.largestBatchId}}var BP=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return qP(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:DP(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return qP(e).put(function(e){return{bundleId:e.id,createTime:OP(rP(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return KP(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:FP(e.bundledQuery),readTime:DP(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return KP(e).put(function(e){return{name:e.name,readTime:OP(rP(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function qP(e){return KT(e,"bundles")}function KP(e){return KT(e,"namedQueries")}var GP=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return HP(e).get(VP(this.userId,t)).next((function(e){return e?jP(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=jN();return eT.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new NA(t,a);i.push(r.It(e,o))})),eT.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(mT(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(HP(e).J("collectionPathOverlayIndex",i))})),eT.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=jN(),a=mT(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return HP(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=jP(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=jN(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return HP(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=jP(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"It",value:function(e,t){return HP(e).put(function(e,t,n){var r=u(VP(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:vP(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"Pt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function HP(e){return KT(e,"documentOverlays")}var WP=function(){function e(){d(this,e)}return y(e,[{key:"dt",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt(aC(e.integerValue));else if("doubleValue"in e){var n=aC(e.doubleValue);isNaN(n)?this.At(t,13):(this.At(t,15),pT(n)?t.Rt(0):t.Rt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt("".concat(r.seconds||"")),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(oC(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.At(t,45),t.Rt(i.latitude||0),t.Rt(i.longitude||0)}else"mapValue"in e?CC(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):vS()}},{key:"ft",value:function(e,t){this.At(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Vt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.At(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ft(a,t),this.Tt(n[a],t)}}},{key:"bt",value:function(e,t){var n=e.values||[];this.At(t,50);var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"wt",value:function(e,t){var n=this;this.At(t,37),VS.fromName(e).path.forEach((function(e){n.At(t,60),n.Dt(e,t)}))}},{key:"At",value:function(e,t){e.Rt(t)}},{key:"gt",value:function(e){e.Rt(2)}}]),e}();function QP(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function YP(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=QP(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}WP.Ct=new WP;var $P=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Bt",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Lt",value:function(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=YP(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=YP(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),XP=function(){function e(t){d(this,e),this.jt=t}return y(e,[{key:"yt",value:function(e){this.jt.vt(e)}},{key:"Vt",value:function(e){this.jt.Bt(e)}},{key:"Rt",value:function(e){this.jt.kt(e)}},{key:"Et",value:function(){this.jt.$t()}}]),e}(),JP=function(){function e(t){d(this,e),this.jt=t}return y(e,[{key:"yt",value:function(e){this.jt.xt(e)}},{key:"Vt",value:function(e){this.jt.Lt(e)}},{key:"Rt",value:function(e){this.jt.Kt(e)}},{key:"Et",value:function(){this.jt.Wt()}}]),e}(),ZP=function(){function e(){d(this,e),this.jt=new $P,this.Ht=new XP(this.jt),this.Jt=new JP(this.jt)}return y(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),eR=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function tR(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=nR(e.arrayValue,t.arrayValue))?n:0!==(n=nR(e.directionalValue,t.directionalValue))?n:VS.comparator(e.documentKey,t.documentKey)}function nR(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var rR=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Xt=t.orderBy,this.en=[];var n,r=T(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.tn=i:this.en.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"nn",value:function(e){mS(e.collectionGroup===this.collectionId);var t=BS(e);if(void 0!==t&&!this.rn(t))return!1;for(var n=qS(e),r=new Set,i=0,a=0;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.tn){if(!r.has(this.tn.field.canonicalString())){var o=n[i];if(!this.sn(this.tn,o)||!this.on(this.Xt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Xt.length||!this.on(this.Xt[a++],u))return!1}return!0}},{key:"_n",value:function(){var e,t=new XT(jS.comparator),n=[],r=T(this.en);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new KS(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new KS(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=T(this.Xt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new KS(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new zS(zS.UNKNOWN_ID,this.collectionId,n,GS.empty())}},{key:"rn",value:function(e){var t,n=T(this.en);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.sn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"sn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"on",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function iR(e){var t,n;if(mS(e instanceof BC||e instanceof qC),e instanceof BC){if(e instanceof rN){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return BC.create(e.field,"==",t)})))||[];return qC.create(r,"or")}return e}var i=e.filters.map((function(e){return iR(e)}));return qC.create(i,e.op)}function aR(e){if(0===e.getFilters().length)return[];var t=cR(iR(e));return mS(sR(t)),oR(t)||uR(t)?[t]:t.getFilters()}function oR(e){return e instanceof BC}function uR(e){return e instanceof qC&&HC(e)}function sR(e){return oR(e)||uR(e)||function(e){if(e instanceof qC&&GC(e)){var t,n=T(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!oR(r)&&!uR(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function cR(e){if(mS(e instanceof BC||e instanceof qC),e instanceof BC)return e;if(1===e.filters.length)return cR(e.filters[0]);var t=e.filters.map((function(e){return cR(e)})),n=qC.create(t,e.op);return sR(n=hR(n))?n:(mS(n instanceof qC),mS(KC(n)),mS(n.filters.length>1),n.filters.reduce((function(e,t){return lR(e,t)})))}function lR(e,t){var n;return mS(e instanceof BC||e instanceof qC),mS(t instanceof BC||t instanceof qC),n=e instanceof BC?t instanceof BC?function(e,t){return qC.create([e,t],"and")}(e,t):fR(e,t):t instanceof BC?fR(t,e):function(e,t){if(mS(e.filters.length>0&&t.filters.length>0),KC(e)&&KC(t))return $C(e,t.getFilters());var n=GC(e)?e:t,r=GC(e)?t:e,i=n.filters.map((function(e){return lR(e,r)}));return qC.create(i,"or")}(e,t),hR(n)}function fR(e,t){if(KC(t))return $C(t,e.getFilters());var n=t.filters.map((function(t){return lR(e,t)}));return qC.create(n,"or")}function hR(e){if(mS(e instanceof BC||e instanceof qC),e instanceof BC)return e;var t=e.getFilters();if(1===t.length)return hR(t[0]);if(WC(e))return e;var n=t.map((function(e){return hR(e)})),r=[];return n.forEach((function(t){t instanceof BC?r.push(t):t instanceof qC&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:qC.create(r,e.op)}var dR=function(){function e(){d(this,e),this.an=new pR}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.an.add(t),eT.resolve()}},{key:"getCollectionParents",value:function(e,t){return eT.resolve(this.an.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return eT.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return eT.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return eT.resolve()}},{key:"createTargetIndexes",value:function(e,t){return eT.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return eT.resolve(null)}},{key:"getIndexType",value:function(e,t){return eT.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return eT.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return eT.resolve(null)}},{key:"getMinOffset",value:function(e,t){return eT.resolve(QS.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return eT.resolve(QS.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return eT.resolve()}},{key:"updateIndexEntries",value:function(e,t){return eT.resolve()}}]),e}(),pR=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new XT(US.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new XT(US.comparator)).toArray()}}]),e}(),vR=new Uint8Array(0),mR=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.un=new pR,this.cn=new ON((function(e){return sN(e)}),(function(e,t){return cN(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.un.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.un.add(t)}));var a={collectionId:r,parent:mT(i)};return yR(e).put(a)}return eT.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[OS(t),""],!1,!0);return yR(e).G(r).next((function(e){var r,i=T(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(kT(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=kR(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=bR(e);return a.next((function(e){o.put(zP(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=kR(e),r=bR(e),i=gR(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=kR(e),n=gR(e),r=bR(e);return t.J().next((function(){return n.J()})).next((function(){return r.J()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return eT.forEach(this.ln(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new rR(t);return n.addFieldIndex(e,i._n())}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=gR(e),i=!0,a=new Map;return eT.forEach(this.ln(t),(function(t){return n.hn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=KN(),o=[];return eT.forEach(a,(function(i,a){fS("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(sN(t)));var u=function(e,t){var n=BS(t);if(void 0===n)return null;var r,i=T(fN(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=T(qS(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=T(fN(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=T(qS(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?hN(e,o.fieldPath,e.startAt):dN(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new MC(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=T(qS(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?dN(e,o.fieldPath,e.endAt):hN(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new MC(r,i)}(a,i),f=n.Pn(i,a,c),h=n.Pn(i,a,l),d=n.In(i,a,s),p=n.dn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return eT.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=VS.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return eT.resolve(null)}))}},{key:"ln",value:function(e){var t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:aR(qC.create(e.filters,"and")).map((function(t){return uN(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.cn.set(e,t),t)}},{key:"dn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[d/c]):vR,f=u.En(e,s,n[d%c],r),p=u.An(e,s,i[d%c],a),v=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,p,v)))},d=0;d<s;++d)f();return l}},{key:"En",value:function(e,t,n,r){var i=new eR(e,VS.empty(),t,n);return r?i:i.Zt()}},{key:"An",value:function(e,t,n,r){var i=new eR(e,VS.empty(),t,n);return r?i.Zt():i}},{key:"hn",value:function(e,t){var n=new rR(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.nn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.ln(t);return eT.forEach(i,(function(t){return n.hn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new XT(jS.comparator),r=!1,i=T(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=T(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=T(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"Rn",value:function(e,t){var n,r=new ZP,i=T(qS(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Yt(a.kind);WP.Ct.dt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"Tn",value:function(e){var t=new ZP;return WP.Ct.dt(e,t.Yt(0)),t.zt()}},{key:"Vn",value:function(e,t){var n=new ZP;return WP.Ct.dt(wC(this.databaseId,t),n.Yt(function(e){var t=qS(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"In",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new ZP);var i,a=0,o=T(qS(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=T(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.mn(t,s.fieldPath)&&xC(c))r=this.fn(r,s,c);else{var h=f.Yt(s.kind);WP.Ct.dt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.gn(r)}},{key:"Pn",value:function(e,t,n){return this.In(e,t,n.position)}},{key:"gn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"fn",value:function(e,t,n){var r,i=h(e),a=[],o=T(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=T(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new ZP;f.seed(l.zt()),WP.Ct.dt(s,f.Yt(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"mn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof BC&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=kR(e),i=bR(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return eT.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new GS(t.sequenceNumber,new QS(DP(t.readTime),new VS(kT(t.documentKey)),t.largestBatchId)):GS.empty(),r=e.fields.map((function(e){var t=u(e,2),n=t[0],r=t[1];return new KS(jS.fromServerFormat(n),r)}));return new zS(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:PS(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=kR(e),a=bR(e);return this.pn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return eT.forEach(t,(function(t){return a.put(zP(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return eT.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?eT.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),eT.forEach(a,(function(r){return n.yn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?eT.resolve():n.Sn(e,i,r,t,a)}))}))}))}))}},{key:"bn",value:function(e,t,n,r){return gR(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Dn",value:function(e,t,n,r){return gR(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}},{key:"yn",value:function(e,t,n){var r=gR(e),i=new XT(tR);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},(function(e,r){i=i.add(new eR(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new XT(tR),r=this.Rn(t,e);if(null==r)return n;var i=BS(t);if(null!=i){var a=e.data.field(i.fieldPath);if(xC(a)){var o,u=T(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new eR(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new eR(t.indexId,e.key,vR,r));return n}},{key:"Sn",value:function(e,t,n,r,i){var a=this;fS("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ZT(a),s=ZT(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ZT(o)):l?(i(u),u=ZT(a)):(u=ZT(a),s=ZT(o))}}(r,i,tR,(function(r){o.push(a.bn(e,t,n,r))}),(function(r){o.push(a.Dn(e,t,n,r))})),eT.waitFor(o)}},{key:"pn",value:function(e){var t=1;return bR(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return tR(e,t)})).filter((function(e,t,n){return!t||0!==tR(e,n[t-1])}));var r=[];r.push(e);var i,a=T(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=tR(o,e),s=tR(o,t);if(0===u)r[0]=e.Zt();else if(u>0&&s<0)r.push(o),r.push(o.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Cn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,vR,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,vR,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Cn",value:function(e,t){return tR(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(wR)}},{key:"getMinOffset",value:function(e,t){var n=this;return eT.mapArray(this.ln(t),(function(t){return n.hn(e,t).next((function(e){return e||vS()}))})).next(wR)}}]),e}();function yR(e){return KT(e,"collectionParents")}function gR(e){return KT(e,"indexEntries")}function kR(e){return KT(e,"indexConfiguration")}function bR(e){return KT(e,"indexState")}function wR(e){mS(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;YS(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new QS(t.readTime,t.documentKey,n)}var _R={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xR=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function ER(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){mS(1===u)})));var c,l=[],f=T(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=_T(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return eT.waitFor(a).next((function(){return l}))}function IR(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw vS();t=e.noDocument}return JSON.stringify(t).length}xR.DEFAULT_COLLECTION_PERCENTILE=10,xR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xR.DEFAULT=new xR(41943040,xR.DEFAULT_COLLECTION_PERCENTILE,xR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xR.DISABLED=new xR(-1,0,0);var SR=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return CR(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=NR(e),o=CR(e);return o.add({}).next((function(u){mS("number"==typeof u);var s,c=new TA(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return vP(e.ht,t)})),i=n.mutations.map((function(t){return vP(e.ht,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new XT((function(e,t){return PS(e.canonicalString(),t.canonicalString())})),d=T(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=_T(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,xT))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.vn[u]=c.keys()})),eT.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return CR(e).get(t).next((function(e){return e?(mS(e.userId===n.userId),LP(n.serializer,e)):null}))}},{key:"Fn",value:function(e,t){var n=this;return this.vn[t]?eT.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return CR(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(mS(t.batchId>=r),a=LP(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return CR(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return CR(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return LP(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=wT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return NR(e).Z({range:i},(function(r,i,o){var s=u(r,3),c=s[0],l=s[1],f=s[2],h=kT(l);if(c===n.userId&&t.path.isEqual(h))return CR(e).get(f).next((function(e){if(!e)throw vS();mS(e.userId===n.userId),a.push(LP(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new XT(PS),i=[];return t.forEach((function(t){var a=wT(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=NR(e).Z({range:o},(function(e,i,a){var o=u(e,3),s=o[0],c=o[1],l=o[2],f=kT(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),eT.waitFor(i).next((function(){return n.Mn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=wT(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new XT(PS);return NR(e).Z({range:o},(function(e,t,a){var o=u(e,3),c=o[0],l=o[1],f=o[2],h=kT(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Mn(e,s)}))}},{key:"Mn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(CR(e).get(t).next((function(e){if(null===e)throw vS();mS(e.userId===n.userId),r.push(LP(n.serializer,e))})))})),eT.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return ER(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.xn(t.batchId)})),eT.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"xn",value:function(e){delete this.vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return eT.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return NR(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=kT(e[1]);i.push(a)}else r.done()})).next((function(){mS(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return TR(e,this.userId,t)}},{key:"On",value:function(e){var t=this;return AR(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Pt",value:function(t,n,r,i){return mS(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function TR(e,t,n){var r=wT(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return NR(e).Z({range:a,Y:!0},(function(e,n,r){var a=u(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function CR(e){return KT(e,"mutations")}function NR(e){return KT(e,"documentMutations")}function AR(e){return KT(e,"mutationQueues")}var PR=function(){function e(t){d(this,e),this.Nn=t}return y(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"Bn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}]),e}(),RR=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.kn(e).next((function(n){var r=new PR(n.highestTargetId);return n.highestTargetId=r.next(),t.qn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.kn(e).next((function(e){return LS.fromTimestamp(new DS(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.kn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.kn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.qn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Qn(e,t).next((function(){return n.kn(e).next((function(r){return r.targetCount+=1,n.Kn(t,r),n.qn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return OR(e).delete(t.targetId)})).next((function(){return n.kn(e)})).next((function(t){return mS(t.targetCount>0),t.targetCount-=1,n.qn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return OR(e).Z((function(o,u){var s=MP(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return eT.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return OR(e).Z((function(e,n){var r=MP(n);t(r)}))}},{key:"kn",value:function(e){return DR(e).get("targetGlobalKey").next((function(e){return mS(null!==e),e}))}},{key:"qn",value:function(e,t){return DR(e).put("targetGlobalKey",t)}},{key:"Qn",value:function(e,t){return OR(e).put(UP(this.serializer,t))}},{key:"Kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.kn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=sN(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return OR(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=MP(n);cN(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=LR(e);return t.forEach((function(t){var o=mT(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),eT.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=LR(e);return eT.forEach(t,(function(t){var a=mT(t.path);return eT.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=LR(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=LR(e),i=KN();return r.Z({range:n,Y:!0},(function(e,t,n){var r=kT(e[1]),a=new VS(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=mT(t.path),r=IDBKeyRange.bound([n],[OS(n)],!1,!0),i=0;return LR(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=u(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"lt",value:function(e,t){return OR(e).get(t).next((function(e){return e?MP(e):null}))}}]),e}();function OR(e){return KT(e,"targets")}function DR(e){return KT(e,"targetGlobal")}function LR(e){return KT(e,"targetDocuments")}function MR(e,t){var n=u(e,2),r=n[0],i=n[1],a=u(t,2),o=a[0],s=a[1],c=PS(r,o);return 0===c?PS(i,s):c}var UR=function(){function e(t){d(this,e),this.$n=t,this.buffer=new XT(MR),this.Un=0}return y(e,[{key:"Wn",value:function(){return++this.Un}},{key:"Gn",value:function(e){var t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();MR(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),FR=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.zn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}},{key:"stop",value:function(){this.zn&&(this.zn.cancel(),this.zn=null)}},{key:"started",get:function(){return null!==this.zn}},{key:"jn",value:function(e){var t=this;fS("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.zn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!aT(e.t0)){e.next=12;break}fS("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,JS(e.t0);case 14:return e.next=16,t.jn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),jR=function(){function e(t,n){d(this,e),this.Hn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.Hn.Jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return eT.resolve(hT.ae);var r=new UR(t);return this.Hn.forEachTarget(e,(function(e){return r.Gn(e.sequenceNumber)})).next((function(){return n.Hn.Yn(e,(function(e){return r.Gn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Hn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Hn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(fS("LruGarbageCollector","Garbage collection skipped; disabled"),eT.resolve(_R)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(fS("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),_R):n.Zn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Hn.getCacheSize(e)}},{key:"Zn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(fS("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),lS()<=io.DEBUG&&fS("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),eT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function VR(e,t){return new jR(e,t)}var zR=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=VR(this,n)}return y(e,[{key:"Jn",value:function(e){var t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Xn",value:function(e){var t=0;return this.Yn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Yn",value:function(e,t){return this.er(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return BR(e,n)}},{key:"removeReference",value:function(e,t,n){return BR(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return BR(e,t)}},{key:"tr",value:function(e,t){return function(e,t){var n=!1;return AR(e).X((function(r){return TR(e,r,t).next((function(e){return e&&(n=!0),eT.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.er(e,(function(o,u){if(u<=t){var s=n.tr(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,LS.min()),LR(e).delete(function(e){return[0,mT(e.path)]}(o))}))}));i.push(s)}})).next((function(){return eT.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return BR(e,t)}},{key:"er",value:function(e,t){var n,r=LR(e),i=hT.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=u(e,2),o=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==hT.ae&&t(new VS(kT(n)),i),i=c,n=s):i=hT.ae})).next((function(){i!==hT.ae&&t(new VS(kT(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function BR(e,t){return LR(e).put(function(e,t){return{targetId:0,path:mT(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var qR=function(){function e(){d(this,e),this.changes=new ON((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,LC.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?eT.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),KR=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return QR(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return QR(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],RP(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.nr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=LC.newInvalidDocument(t);return QR(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(YR(t))},(function(e,i){r=n.rr(t,i)})).next((function(){return r}))}},{key:"ir",value:function(e,t){var n=this,r={size:0,document:LC.newInvalidDocument(t)};return QR(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(YR(t))},(function(e,i){r={document:n.rr(t,i),size:IR(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=LN();return this.sr(e,t,(function(e,t){var i=n.rr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"_r",value:function(e,t){var n=this,r=LN(),i=new QT(VS.comparator);return this.sr(e,t,(function(e,t){var a=n.rr(e,t);r=r.insert(e,a),i=i.insert(e,IR(t))})).next((function(){return{documents:r,ar:i}}))}},{key:"sr",value:function(e,t,n){if(t.isEmpty())return eT.resolve();var r=new XT(XR);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(YR(r.first()),YR(r.last())),a=r.getIterator(),o=a.getNext();return QR(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=VS.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&XR(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(YR(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),RP(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return QR(e).G(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=LN(),u=T(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.rr(VS.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(NN(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=LN(),o=$R(t,n),u=$R(t,QS.max());return QR(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.rr(VS.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new HR(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return WR(e).get("remoteDocumentGlobalKey").next((function(e){return mS(!!e),e}))}},{key:"nr",value:function(e,t){return WR(e).put("remoteDocumentGlobalKey",t)}},{key:"rr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=dP(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=VS.fromSegments(t.noDocument.path),i=DP(t.noDocument.readTime);n=LC.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return vS();var a=VS.fromSegments(t.unknownDocument.path),o=DP(t.unknownDocument.version);n=LC.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new DS(e[0],e[1]);return LS.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(LS.min()))return n}return LC.newInvalidDocument(e)}}]),e}();function GR(e){return new KR(e)}var HR=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ur=e,i.trackRemovals=r,i.cr=new ON((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new XT((function(e,t){return PS(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.cr.get(a);if(n.push(t.ur.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=PP(t.ur.serializer,o);i=i.add(a.path.popLast());var c=IR(s);r+=c-u.size,n.push(t.ur.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=PP(t.ur.serializer,o.convertToNoDocument(LS.min()));n.push(t.ur.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ur.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ur.updateMetadata(e,r)),eT.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ur.ir(e,t).next((function(e){return n.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ur._r(e,t).next((function(e){var t=e.documents;return e.ar.forEach((function(e,r){n.cr.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(qR);function WR(e){return KT(e,"remoteDocumentGlobal")}function QR(e){return KT(e,"remoteDocumentsV14")}function YR(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $R(e,t){var n=t.documentKey.path.toArray();return[e,RP(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function XR(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=PS(n[a],r[a]))return i;return(i=PS(n.length,r.length))||((i=PS(n[n.length-2],r[r.length-2]))||PS(n[n.length-1],r[r.length-1]))}var JR=y((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ZR=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&vA(r.mutation,e,eC.empty(),DS.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,KN()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:KN(),i=jN();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=UN();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=jN();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,KN())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=LN(),a=zN(),o=zN();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof kA)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),vA(o.mutation,t,o.mutation.getFieldMask(),DS.now())):a.set(t.key,eC.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new JR(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=zN(),i=new QT((function(e,t){return e-t})),a=KN();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=T(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||eC.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||KN()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=VN();c.forEach((function(e){if(!a.has(e)){var n=dA(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return eT.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return VS.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):eT.resolve(jN()),u=-1,s=a;return o.next((function(t){return eT.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?eT.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,KN())})).next((function(e){return{batchId:u,changes:FN(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new VS(t)).next((function(e){var t=UN();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=UN();return this.indexManager.getCollectionParents(e,a).next((function(u){return eT.forEach(u,(function(u){var s=function(e,t){return new pN(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,LC.newInvalidDocument(r)))}));var n=UN();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&vA(a.mutation,r,eC.empty(),DS.now()),NN(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),eO=function(){function e(t){d(this,e),this.serializer=t,this.lr=new Map,this.hr=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return eT.resolve(this.lr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:rP(e.createTime)}}(t)),eT.resolve()}},{key:"getNamedQuery",value:function(e,t){return eT.resolve(this.hr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:FP(e.bundledQuery),readTime:rP(e.readTime)}}(t)),eT.resolve()}}]),e}(),tO=function(){function e(){d(this,e),this.overlays=new QT(VS.comparator),this.Pr=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return eT.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=jN();return eT.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.It(e,t,i)})),eT.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Pr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Pr.delete(n)),eT.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=jN(),i=t.length+1,a=new VS(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return eT.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new QT((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=jN(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=jN(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return eT.resolve(s)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new NA(t,n));var a=this.Pr.get(t);void 0===a&&(a=KN(),this.Pr.set(t,a)),this.Pr.set(t,a.add(n.key))}}]),e}(),nO=function(){function e(){d(this,e),this.Ir=new XT(rO.dr),this.Tr=new XT(rO.Er)}return y(e,[{key:"isEmpty",value:function(){return this.Ir.isEmpty()}},{key:"addReference",value:function(e,t){var n=new rO(e,t);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Rr(new rO(e,t))}},{key:"Vr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"mr",value:function(e){var t=this,n=new VS(new US([])),r=new rO(n,e),i=new rO(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Rr(e),a.push(e.key)})),a}},{key:"gr",value:function(){var e=this;this.Ir.forEach((function(t){return e.Rr(t)}))}},{key:"Rr",value:function(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}},{key:"pr",value:function(e){var t=new VS(new US([])),n=new rO(t,e),r=new rO(t,e+1),i=KN();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new rO(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),rO=function(){function e(t,n){d(this,e),this.key=t,this.yr=n}return y(e,null,[{key:"dr",value:function(e,t){return VS.comparator(e.key,t.key)||PS(e.yr,t.yr)}},{key:"Er",value:function(e,t){return PS(e.yr,t.yr)||VS.comparator(e.key,t.key)}}]),e}(),iO=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new XT(rO.dr)}return y(e,[{key:"checkEmpty",value:function(e){return eT.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new TA(i,t,n,r);this.mutationQueue.push(a);var o,u=T(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Sr=this.Sr.add(new rO(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return eT.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return eT.resolve(this.br(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Dr(n),i=r<0?0:r;return eT.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return eT.resolve(0===this.mutationQueue.length?-1:this.wr-1)}},{key:"getAllMutationBatches",value:function(e){return eT.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new rO(t,0),i=new rO(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],(function(e){var t=n.br(e.yr);a.push(t)})),eT.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new XT(PS);return t.forEach((function(e){var t=new rO(e,0),i=new rO(e,Number.POSITIVE_INFINITY);n.Sr.forEachInRange([t,i],(function(e){r=r.add(e.yr)}))})),eT.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;VS.isDocumentKey(i)||(i=i.child(""));var a=new rO(new VS(i),0),o=new XT(PS);return this.Sr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),a),eT.resolve(this.Cr(o))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.br(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;mS(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Sr;return eT.forEach(t.mutations,(function(i){var a=new rO(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Sr=r}))}},{key:"xn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new rO(t,0),r=this.Sr.firstAfterOrEqual(n);return eT.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,eT.resolve()}},{key:"vr",value:function(e,t){return this.Dr(e)}},{key:"Dr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"br",value:function(e){var t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),aO=function(){function e(t){d(this,e),this.Fr=t,this.docs=new QT(VS.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return eT.resolve(n?n.document.mutableCopy():LC.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=LN();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():LC.newInvalidDocument(e))})),eT.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=LN(),a=t.path,o=new VS(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||YS(WS(l),n)<=0||(r.has(l.key)||NN(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return eT.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){vS()}},{key:"Mr",value:function(e,t){return eT.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new oO(this)}},{key:"getSize",value:function(e){return eT.resolve(this.size)}}]),e}(),oO=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).ur=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ur.addEntry(e,i)):t.ur.removeEntry(r)})),eT.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ur.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ur.getEntries(e,t)}}]),n}(qR),uO=function(){function e(t){d(this,e),this.persistence=t,this.Or=new ON((function(e){return sN(e)}),cN),this.lastRemoteSnapshotVersion=LS.min(),this.highestTargetId=0,this.Nr=0,this.Br=new nO,this.targetCount=0,this.Lr=PR.Bn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Or.forEach((function(e,n){return t(n)})),eT.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return eT.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return eT.resolve(this.Nr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),eT.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),eT.resolve()}},{key:"Qn",value:function(e){this.Or.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new PR(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Qn(t),this.targetCount+=1,eT.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Qn(t),eT.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,eT.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Or.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Or.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),eT.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return eT.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Or.get(t)||null;return eT.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Ar(t,n),eT.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.Vr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),eT.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.mr(t),eT.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.pr(t);return eT.resolve(n)}},{key:"containsKey",value:function(e,t){return eT.resolve(this.Br.containsKey(t))}}]),e}(),sO=function(){function e(t,n){var r=this;d(this,e),this.kr={},this.overlays={},this.qr=new hT(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new uO(this),this.indexManager=new dR,this.remoteDocumentCache=function(e){return new aO(e)}((function(e){return r.referenceDelegate.$r(e)})),this.serializer=new AP(n),this.Ur=new eO(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new tO,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.kr[e.toKey()];return n||(n=new iO(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;fS("MemoryPersistence","Starting transaction:",e);var i=new cO(this.qr.next());return this.referenceDelegate.Wr(),n(i).next((function(e){return r.referenceDelegate.Gr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zr",value:function(e,t){return eT.or(Object.values(this.kr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),cO=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(XS),lO=function(){function e(t){d(this,e),this.persistence=t,this.jr=new nO,this.Hr=null}return y(e,[{key:"Yr",get:function(){if(this.Hr)return this.Hr;throw vS()}},{key:"addReference",value:function(e,t,n){return this.jr.addReference(n,t),this.Yr.delete(n.toString()),eT.resolve()}},{key:"removeReference",value:function(e,t,n){return this.jr.removeReference(n,t),this.Yr.add(n.toString()),eT.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Yr.add(t.toString()),eT.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.jr.mr(t.targetId).forEach((function(e){return n.Yr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Yr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Wr",value:function(){this.Hr=new Set}},{key:"Gr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return eT.forEach(this.Yr,(function(r){var i=VS.fromPath(r);return t.Zr(e,i).next((function(e){e||n.removeEntry(i,LS.min())}))})).next((function(){return t.Hr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zr(e,t).next((function(e){e?n.Yr.delete(t.toString()):n.Yr.add(t.toString())}))}},{key:"$r",value:function(e){return 0}},{key:"Zr",value:function(e,t){var n=this;return eT.or([function(){return eT.resolve(n.jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zr(e,t)}])}}],[{key:"Jr",value:function(t){return new e(t)}}]),e}(),fO=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new tT("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bT,{unique:!0}),e.createObjectStore("documentMutations")}(e),hO(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=eT.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hO(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:LS.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bT,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return eT.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.ei(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ti(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ni(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ri(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ii(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:LT});t.createIndex("collectionPathOverlayIndex",MT,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",UT,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:ET});t.createIndex("documentKeyIndex",IT),t.createIndex("collectionGroupIndex",ST)}(e)})).next((function(){return i.si(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.oi(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:PT}).createIndex("sequenceNumberIndex",RT,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:OT}).createIndex("documentKeyIndex",DT,{unique:!1})}(e)}))),o}},{key:"ti",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=IR(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"ei",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return eT.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return eT.forEach(r,(function(r){mS(r.userId===n.userId);var i=LP(t.serializer,r);return ER(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ni",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new US(n),o=function(e){return[0,mT(e)]}(a);r.push(t.get(o).next((function(n){return n?eT.resolve():function(n){return t.put({targetId:0,path:mT(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return eT.waitFor(r)}))}))}},{key:"ri",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:AT});var n=t.store("collectionParents"),r=new pR,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:mT(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new US(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=u(e,3),r=(n[0],n[1]),a=(n[2],kT(r));return i(a.popLast())}))}))}},{key:"ii",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=MP(r),a=UP(t.serializer,i);return n.put(a)}))}},{key:"si",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new VS(US.fromString(e.document.name).popFirst(5)):e.noDocument?VS.fromSegments(e.noDocument.path):e.unknownDocument?VS.fromSegments(e.unknownDocument.path):vS()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return eT.waitFor(r)}))}},{key:"oi",value:function(e,t){var n=this,r=t.store("mutations"),i=GR(this.serializer),a=new sO(lO.Jr,this.serializer.ht);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:KN();LP(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),eT.forEach(r,(function(e,r){var o=new uS(r),u=GP.Pt(n.serializer,o),s=a.getIndexManager(o),c=SR.Pt(o,n.serializer,s,a.referenceDelegate);return new ZR(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new qT(t,hT.ae),e).next()}))}))}}]),e}();function hO(e){e.createObjectStore("targetDocuments",{keyPath:CT}).createIndex("documentTargetsIndex",NT,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TT,{unique:!0}),e.createObjectStore("targetGlobal")}var dO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pO=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this._i=a,this.window=o,this.document=u,this.ai=c,this.ui=l,this.ci=f,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=function(e){return Promise.resolve()},!e.C())throw new kS(gS.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zR(this,i),this.Ti=n+"main",this.serializer=new AP(s),this.Ei=new nT(this.Ti,this.ci,new fO(this.serializer)),this.Kr=new RR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GR(this.serializer),this.Ur=new BP,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,!1===l&&hS("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.Ri().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new kS(gS.FAILED_PRECONDITION,dO);return e.Vi(),e.mi(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Kr.getHighestSequenceNumber(t)}))})).then((function(t){e.qr=new hT(t,e.ai)})).then((function(){e.Qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"gi",value:function(e){var t=this;return this.di=function(){var n=Za(Xa().mark((function n(r){return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=Za(Xa().mark((function t(n){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ri();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mO(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.pi(t).next((function(t){t||(e.isPrimary=!1,e._i.enqueueRetryable((function(){return e.di(!1)})))}))})).next((function(){return e.yi(t)})).next((function(n){return e.isPrimary&&!n?e.wi(t).next((function(){return!1})):!!n&&e.Si(t).next((function(){return!0}))}))})).catch((function(t){if(aT(t))return fS("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return fS("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e._i.enqueueRetryable((function(){return e.di(t)})),e.isPrimary=t}))}},{key:"pi",value:function(e){var t=this;return vO(e).get("owner").next((function(e){return eT.resolve(t.bi(e))}))}},{key:"Di",value:function(e){return mO(e).delete(this.clientId)}},{key:"Ci",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i,a=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vi(this.Ii,18e5)){e.next=6;break}return this.Ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=KT(e,"clientMetadata");return t.G().next((function(e){var n=a.Fi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return eT.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ai){n=T(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ai.removeItem(this.Mi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ri().then((function(){return e.Ci()})).then((function(){return e.fi()}))}))}},{key:"bi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"yi",value:function(e){var t=this;return this.ui?eT.resolve(!0):vO(e).get("owner").next((function(n){if(null!==n&&t.vi(n.leaseTimestampMs,5e3)&&!t.xi(n.ownerId)){if(t.bi(n)&&t.networkEnabled)return!0;if(!t.bi(n)){if(!n.allowTabSynchronization)throw new kS(gS.FAILED_PRECONDITION,dO);return!1}}return!(!t.networkEnabled||!t.inForeground)||mO(e).G().next((function(e){return void 0===t.Fi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&fS("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Za(Xa().mark((function e(){var t=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new qT(e,hT.ae);return t.wi(n).next((function(){return t.Di(n)}))}));case 7:this.Ei.close(),this.Li();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fi",value:function(e,t){var n=this;return e.filter((function(e){return n.vi(e.updateTimeMs,t)&&!n.xi(e.clientId)}))}},{key:"ki",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mO(t).G().next((function(t){return e.Fi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Qr}},{key:"getMutationQueue",value:function(e,t){return SR.Pt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new mR(e,this.serializer.ht.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return GP.Pt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;fS("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?BT:14===e?zT:13===e?VT:12===e?jT:11===e?FT:void vS()}(this.ci);return this.Ei.runTransaction(e,a,o,(function(a){return i=new qT(a,r.qr?r.qr.next():hT.ae),"readwrite-primary"===t?r.pi(i).next((function(e){return!!e||r.yi(i)})).next((function(t){if(!t)throw hS("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r._i.enqueueRetryable((function(){return r.di(!1)})),new kS(gS.FAILED_PRECONDITION,$S);return n(i)})).next((function(e){return r.Si(i).next((function(){return e}))})):r.qi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"qi",value:function(e){var t=this;return vO(e).get("owner").next((function(e){if(null!==e&&t.vi(e.leaseTimestampMs,5e3)&&!t.xi(e.ownerId)&&!t.bi(e)&&!(t.ui||t.allowTabSynchronization&&e.allowTabSynchronization))throw new kS(gS.FAILED_PRECONDITION,dO)}))}},{key:"Si",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vO(e).put("owner",t)}},{key:"wi",value:function(e){var t=this,n=vO(e);return n.get("owner").next((function(e){return t.bi(e)?(fS("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):eT.resolve()}))}},{key:"vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(hS("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Vi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.hi=function(){e._i.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ri()}))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}},{key:"mi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.li=function(){t.Oi();var e=/(?:Version|Mobile)\/1[456]/;!Ra()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t._i.enterRestrictedMode(!0),t._i.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.li))}},{key:"Bi",value:function(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}},{key:"xi",value:function(e){var t;try{var n=null!==(null===(t=this.Ai)||void 0===t?void 0:t.getItem(this.Mi(e)));return fS("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return hS("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Oi",value:function(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){hS("Failed to set zombie client id.",e)}}},{key:"Li",value:function(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch(e){}}},{key:"Mi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return nT.C()}}]),e}();function vO(e){return KT(e,"owner")}function mO(e){return KT(e,"clientMetadata")}function yO(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gO=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}return y(e,null,[{key:"$i",value:function(t,n){var r,i=KN(),a=KN(),o=T(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),kO=function(){function e(){d(this,e),this._documentReadCount=0}return y(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),bO=function(){function e(){d(this,e),this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=2}return y(e,[{key:"initialize",value:function(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Hi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new kO;return i.Yi(e,t,n).next((function(r){if(a.result=r,i.Wi)return i.Zi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Zi",value:function(e,t,n,r){return n.documentReadCount<this.Gi?(lS()<=io.DEBUG&&fS("QueryEngine","SDK will not create cache indexes for query:",CN(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),eT.resolve()):(lS()<=io.DEBUG&&fS("QueryEngine","Query:",CN(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(lS()<=io.DEBUG&&fS("QueryEngine","The SDK decides to create cache indexes for query:",CN(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_N(t))):eT.resolve())}},{key:"Hi",value:function(e,t){var n=this;if(yN(t))return eT.resolve(null);var r=_N(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=IN(t,null,"F"),r=_N(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=KN.apply(void 0,h(i));return n.ji.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Xi(t,i);return n.es(t,o,a,r.readTime)?n.Hi(e,IN(t,null,"F")):n.ts(e,o,t,r)}))}))})))}))}},{key:"Ji",value:function(e,t,n,r){var i=this;return yN(t)||r.isEqual(LS.min())?eT.resolve(null):this.ji.getDocuments(e,n).next((function(a){var o=i.Xi(t,a);return i.es(t,o,n,r)?eT.resolve(null):(lS()<=io.DEBUG&&fS("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),CN(t)),i.ts(e,o,t,HS(r,-1)).next((function(e){return e})))}))}},{key:"Xi",value:function(e,t){var n=new XT(PN(e));return t.forEach((function(t,r){NN(e,r)&&(n=n.add(r))})),n}},{key:"es",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Yi",value:function(e,t,n){return lS()<=io.DEBUG&&fS("QueryEngine","Using full collection scan to execute query:",CN(t)),this.ji.getDocumentsMatchingQuery(e,t,QS.min(),n)}},{key:"ts",value:function(e,t,n,r){return this.ji.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),wO=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.ns=n,this.serializer=i,this.rs=new QT(PS),this.ss=new ON((function(e){return sN(e)}),cN),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}return y(e,[{key:"us",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZR(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.rs)}))}}]),e}();function _O(e,t,n,r){return new wO(e,t,n,r)}function xO(e,t){return EO.apply(this,arguments)}function EO(){return EO=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.us(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=KN(),s=T(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=T(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=T(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=T(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{cs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),EO.apply(this,arguments)}function IO(e,t){var n=yS(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n._s.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=eT.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);mS(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=KN(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function SO(e){var t=yS(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Kr.getLastRemoteSnapshotVersion(e)}))}function TO(e,t){var n=yS(e),r=t.snapshotVersion,i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(nC.EMPTY_BYTE_STRING,LS.min()).withLastLimboFreeSnapshotVersion(LS.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Kr.updateTargetData(e,c))}}));var u=LN(),s=KN();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(CO(e,a,t.documentUpdates).next((function(e){u=e.ls,s=e.hs}))),!r.isEqual(LS.min())){var c=n.Kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return eT.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.rs=i,e}))}function CO(e,t,n){var r=KN(),i=KN();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=LN();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(LS.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):fS("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ls:r,hs:i}}))}function NO(e,t){var n=yS(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function AO(e,t){var n=yS(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Kr.getTargetData(e,t).next((function(i){return i?(r=i,eT.resolve(r)):n.Kr.allocateTargetId(e).next((function(i){return r=new NP(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.rs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(e.targetId,e),n.ss.set(t,e.targetId)),e}))}function PO(e,t,n){return RO.apply(this,arguments)}function RO(){return RO=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yS(t),a=i.rs.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),aT(e.t1)){e.next=12;break}throw e.t1;case 12:fS("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.rs=i.rs.remove(n),i.ss.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),RO.apply(this,arguments)}function OO(e,t,n){var r=yS(e),i=LS.min(),a=KN();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=yS(e),i=r.ss.get(n);return void 0!==i?eT.resolve(r.rs.get(i)):r.Kr.getTargetData(t,n)}(r,e,_N(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ns.getDocumentsMatchingQuery(e,t,n?i:LS.min(),n?a:KN())})).next((function(e){return MO(r,AN(t),e),{documents:e,Ps:a}}))}))}function DO(e,t){var n=yS(e),r=yS(n.Kr),i=n.rs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function LO(e,t){var n=yS(e),r=n.os.get(t)||LS.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n._s.getAllFromCollectionGroup(e,t,HS(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return MO(n,t,e),e}))}function MO(e,t,n){var r=e.os.get(t)||LS.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.os.set(t,r)}function UO(e,t,n,r){return FO.apply(this,arguments)}function FO(){return FO=Za(Xa().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=yS(t),o=KN(),u=LN(),s=T(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Is(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ds(l)).setReadTime(n.Ts(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a._s.newChangeBuffer({trackRemovals:!0}),e.next=7,AO(a,function(e){return _N(mN(US.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return CO(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Kr.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Kr.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.ls,t.hs)})).next((function(){return t.ls}))}))})));case 9:case"end":return e.stop()}}),e)}))),FO.apply(this,arguments)}function jO(e,t){return VO.apply(this,arguments)}function VO(){return VO=Za(Xa().mark((function e(t,n){var r,i,a,o=arguments;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:KN(),e.next=3,AO(t,_N(FP(n.bundledQuery)));case 3:return i=e.sent,a=yS(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=rP(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ur.saveNamedQuery(e,n);var o=i.withResumeToken(nC.EMPTY_BYTE_STRING,t);return a.rs=a.rs.insert(o.targetId,o),a.Kr.updateTargetData(e,o).next((function(){return a.Kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ur.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),VO.apply(this,arguments)}function zO(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function BO(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function qO(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var KO=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new kS(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(hS("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),GO=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kS(i.error.code,i.error.message))),a?new e(t,i.state,r):(hS("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),HO=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=HN(),o=0;i&&o<r.activeTargetIds.length;++o)i=vT(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(hS("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),WO=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(hS("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),QO=function(){function e(){d(this,e),this.activeTargetIds=HN()}return y(e,[{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"As",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),YO=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new QT(PS),this.started=!1,this.ws=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ss=zO(this.persistenceKey,this.fs),this.bs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new QO),this.Ds=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Cs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.vs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Fs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ms=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}return y(e,[{key:"start",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ki();case 2:t=e.sent,n=T(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.fs){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(zO(this.persistenceKey,i)))&&(o=HO.Es(i,a))&&(this.ys=this.ys.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.xs(),(u=this.storage.getItem(this.Fs))&&(s=this.Os(u))&&this.Ns(s),c=T(this.ws);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ps(f)}catch(d){c.e(d)}finally{c.f()}this.ws=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.bs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Bs(this.ys)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ys.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ls(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ls(e,t,n),this.ks(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(qO(this.persistenceKey,e));if(n){var r=GO.Es(e,n);r&&(t=r.state)}}return this.qs.Rs(e),this.xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.qs.Vs(e),this.xs()}},{key:"isLocalQueryTarget",value:function(e){return this.qs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(qO(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.ks(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ks(e)}},{key:"notifyBundleLoaded",value:function(e){this.$s(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return fS("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){fS("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){fS("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ps",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(fS("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void hS("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(Za(Xa().mark((function e(){var r,i,a,o,u,s,c;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ds.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Us(n.key),e.abrupt("return",t.Ws(r,null));case 6:if(!(i=t.Gs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ws(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Cs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.zs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.js(a));case 16:e.next=41;break;case 18:if(!t.vs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Hs(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Js(o));case 23:e.next=41;break;case 25:if(n.key!==t.Fs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Os(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ns(u));case 30:e.next=41;break;case 32:if(n.key!==t.bs){e.next=37;break}s=function(e){var t=hT.ae;if(null!=e)try{var n=JSON.parse(e);mS("number"==typeof n),t=n}catch(e){hS("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==hT.ae&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Ms){e.next=41;break}return c=t.Ys(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Zs(e)})));case 41:e.next=44;break;case 43:t.ws.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"qs",get:function(){return this.ys.get(this.fs)}},{key:"xs",value:function(){this.setItem(this.Ss,this.qs.As())}},{key:"Ls",value:function(e,t,n){var r=new KO(this.currentUser,e,t,n),i=BO(this.persistenceKey,this.currentUser,e);this.setItem(i,r.As())}},{key:"ks",value:function(e){var t=BO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ks",value:function(e){var t={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(t))}},{key:"Qs",value:function(e,t,n){var r=qO(this.persistenceKey,e),i=new GO(e,t,n);this.setItem(r,i.As())}},{key:"$s",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Ms,t)}},{key:"Us",value:function(e){var t=this.Ds.exec(e);return t?t[1]:null}},{key:"Gs",value:function(e,t){var n=this.Us(e);return HO.Es(n,t)}},{key:"zs",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return KO.Es(new uS(i),r,t)}},{key:"Hs",value:function(e,t){var n=this.vs.exec(e),r=Number(n[1]);return GO.Es(r,t)}},{key:"Os",value:function(e){return WO.Es(e)}},{key:"Ys",value:function(e){return JSON.parse(e)}},{key:"js",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Xs(t.batchId,t.state,t.error));case 2:fS("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Js",value:function(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}},{key:"Ws",value:function(e,t){var n=this,r=t?this.ys.insert(e,t):this.ys.remove(e),i=this.Bs(this.ys),a=this.Bs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.no(o,u).then((function(){n.ys=r}))}},{key:"Ns",value:function(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Bs",value:function(e){var t=HN();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),$O=function(){function e(){d(this,e),this.ro=new QO,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.ro.Rs(e),this.io[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.io[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ro.Vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.io[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ro.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ro=new QO,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),XO=function(){function e(){d(this,e)}return y(e,[{key:"so",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),JO=function(){function e(){var t=this;d(this,e),this.oo=function(){return t._o()},this.ao=function(){return t.uo()},this.co=[],this.lo()}return y(e,[{key:"so",value:function(e){this.co.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}},{key:"lo",value:function(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}},{key:"_o",value:function(){fS("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=T(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"uo",value:function(){fS("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=T(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ZO=null;function eD(){return null===ZO?ZO=268435456+Math.round(2147483648*Math.random()):ZO++,"0x"+ZO.toString(16)}var tD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},nD=function(){function e(t){d(this,e),this.ho=t.ho,this.Po=t.Po}return y(e,[{key:"Io",value:function(e){this.To=e}},{key:"Eo",value:function(e){this.Ao=e}},{key:"onMessage",value:function(e){this.Ro=e}},{key:"close",value:function(){this.Po()}},{key:"send",value:function(e){this.ho(e)}},{key:"Vo",value:function(){this.To()}},{key:"mo",value:function(e){this.Ao(e)}},{key:"fo",value:function(e){this.Ro(e)}}]),e}(),rD="WebChannelConnection",iD=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return y(n,[{key:"vo",value:function(e,t,n,r){var i=eD();return new Promise((function(a,o){var u=new rS;u.setWithCredentials(!0),u.listenOnce(ZI.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case JI.NO_ERROR:var t=u.getResponseJson();fS(rD,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case JI.TIMEOUT:fS(rD,"RPC '".concat(e,"' ").concat(i," timed out")),o(new kS(gS.DEADLINE_EXCEEDED,"Request time out"));break;case JI.HTTP_ERROR:var n=u.getStatus();if(fS(rD,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(gS).indexOf(t)>=0?t:gS.UNKNOWN}(s.status);o(new kS(c,s.message))}else o(new kS(gS.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new kS(gS.UNAVAILABLE,"Connection failed."));break;default:vS()}}finally{fS(rD,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);fS(rD,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Mo",value:function(e,t,n){var r=eD(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=$I(),o=XI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");fS(rD,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new nD({ho:function(t){h?fS(rD,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(fS(rD,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),fS(rD,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Po:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,nS.EventType.OPEN,(function(){h||fS(rD,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,nS.EventType.CLOSE,(function(){h||(h=!0,fS(rD,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.mo())})),p(l,nS.EventType.ERROR,(function(t){h||(h=!0,dS(rD,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.mo(new kS(gS.UNAVAILABLE,"The operation could not be completed")))})),p(l,nS.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];mS(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){fS(rD,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=xA[e];if(void 0!==t)return RA(t)}(u),c=o.message;void 0===s&&(s=gS.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.mo(new kS(s,c)),l.close()}else fS(rD,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.fo(i)}})),p(o,eS.STAT_EVENT,(function(t){t.stat===tS.PROXY?fS(rD,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===tS.NOPROXY&&fS(rD,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Vo()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return y(e,[{key:"So",get:function(){return!1}},{key:"bo",value:function(e,t,n,r,i){var a=eD(),o=this.Do(e,t);fS("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,r,i),this.vo(e,o,u,n).then((function(t){return fS("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw dS("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Fo",value:function(e,t,n,r,i,a){return this.bo(e,t,n,r,i)}},{key:"Co",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sS,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Do",value:function(e,t){var n=tD[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}}]),e}());function aD(){return"undefined"!=typeof window?window:null}function oD(){return"undefined"!=typeof document?document:null}function uD(e){return new JA(e,!0)}var sD=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Bo=0}},{key:"qo",value:function(){this.Bo=this.No}},{key:"Qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&fS("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,(function(){return t.ko=Date.now(),e()})),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}},{key:"$o",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Ko",value:function(){return(Math.random()-.5)*this.Bo}}]),e}(),cD=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this._i=t,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new sD(t,n)}return y(e,[{key:"Jo",value:function(){return 1===this.state||5===this.state||this.Yo()}},{key:"Yo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Zo()}},{key:"stop",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xo",value:function(){this.state=0,this.Ho.reset()}},{key:"e_",value:function(){var e=this;this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(function(){return e.t_()})))}},{key:"n_",value:function(e){this.r_(),this.stream.send(e)}},{key:"t_",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Yo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"i_",value:function(){this.jo&&(this.jo.cancel(),this.jo=null)}},{key:"close",value:function(){var e=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():n&&n.code===gS.RESOURCE_EXHAUSTED?(hS(n.toString()),hS("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===gS.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"s_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=u(t,2),i=r[0],a=r[1];e.Go===n&&e.__(i,a)}),(function(n){t((function(){var t=new kS(gS.UNKNOWN,"Fetching auth token failed: "+n.message);return e.a_(t)}))}))}},{key:"__",value:function(e,t){var n=this,r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io((function(){r((function(){return n.state=2,n.jo=n._i.enqueueAfterDelay(n.Wo,1e4,(function(){return n.Yo()&&(n.state=3),Promise.resolve()})),n.listener.Io()}))})),this.stream.Eo((function(e){r((function(){return n.a_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Zo",value:function(){var e=this;this.state=5,this.Ho.Qo(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"a_",value:function(e){return fS("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"o_",value:function(e){var t=this;return function(n){t._i.enqueueAndForget((function(){return t.Go===e?n():(fS("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),lD=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return y(n,[{key:"u_",value:function(e,t){return this.connection.Mo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ho.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:vS()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(mS(void 0===t||"string"==typeof t),nC.fromBase64String(t||"")):(mS(void 0===t||t instanceof Uint8Array),nC.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?gS.UNKNOWN:RA(e.code);return new kS(t,e.message||"")}(o);n=new KA(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=uP(e,s.document.name),l=rP(s.document.updateTime),f=s.document.createTime?rP(s.document.createTime):LS.min(),h=new OC({mapValue:{fields:s.document.fields}}),d=LC.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new BA(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=uP(e,m.document),g=m.readTime?rP(m.readTime):LS.min(),k=LC.newNoDocument(y,g),b=m.removedTargetIds||[];n=new BA([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=uP(e,w.document),x=w.removedTargetIds||[];n=new BA([],x,_,null)}else{if(!("filter"in t))return vS();t.filter;var E=t.filter;E.targetId;var I=E.count,S=void 0===I?0:I,T=E.unchangedNames,C=new AA(S,T),N=E.targetId;n=new qA(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return LS.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?LS.min():t.readTime?rP(t.readTime):LS.min()}(e);return this.listener.c_(t,n)}},{key:"l_",value:function(e){var t={};t.database=lP(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=lN(r)?{documents:yP(e,r)}:{query:gP(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=tP(e,t.resumeToken);var i=ZA(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(LS.min())>0){n.readTime=eP(e,t.snapshotVersion.toTimestamp());var a=ZA(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vS()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.n_(t)}},{key:"h_",value:function(e){var t={};t.database=lP(this.serializer),t.removeTarget=e,this.n_(t)}}]),n}(cD),fD=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.P_=!1,s}return y(n,[{key:"I_",get:function(){return this.P_}},{key:"start",value:function(){this.P_=!1,this.lastStreamToken=void 0,Kf(b(n.prototype),"start",this).call(this)}},{key:"s_",value:function(){this.P_&&this.d_([])}},{key:"u_",value:function(e,t){return this.connection.Mo("Write",e,t)}},{key:"onMessage",value:function(e){if(mS(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();var t=function(e,t){return e&&e.length>0?(mS(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?rP(e.updateTime):rP(t);return n.isEqual(LS.min())&&(n=rP(t)),new cA(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=rP(e.commitTime);return this.listener.T_(n,t)}return mS(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}},{key:"A_",value:function(){var e={};e.database=lP(this.serializer),this.n_(e)}},{key:"d_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return vP(t.serializer,e)}))};this.n_(n)}}]),n}(cD),hD=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.R_=!1,o}return y(n,[{key:"V_",value:function(){if(this.R_)throw new kS(gS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"bo",value:function(e,t,n){var r=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=u(i,2),o=a[0],s=a[1];return r.connection.bo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===gS.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new kS(gS.UNKNOWN,e.toString())}))}},{key:"Fo",value:function(e,t,n,r){var i=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=u(a,2),s=o[0],c=o[1];return i.connection.Fo(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===gS.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new kS(gS.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.R_=!0}}]),n}(y((function e(){d(this,e)})));var dD=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}return y(e,[{key:"y_",value:function(){var e=this;0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.g_=null,e.S_("Backend didn't respond within 10 seconds."),e.w_("Offline"),Promise.resolve()})))}},{key:"b_",value:function(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.w_("Offline")))}},{key:"set",value:function(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}},{key:"w_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"S_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.p_?(hS(t),this.p_=!1):fS("OnlineStateTracker",t)}},{key:"D_",value:function(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}]),e}(),pD=y((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=a,this.x_.so((function(e){r.enqueueAndForget(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ID(o),!e.t0){e.next=5;break}return fS("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yS(t)).F_.add(4),e.next=4,yD(n);case 4:return n.O_.set("Unknown"),n.F_.delete(4),e.next=8,vD(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.O_=new dD(r,i)}));function vD(e){return mD.apply(this,arguments)}function mD(){return(mD=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ID(t)){e.next=18;break}n=T(t.M_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function yD(e){return gD.apply(this,arguments)}function gD(){return(gD=Za(Xa().mark((function e(t){var n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T(t.M_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function kD(e,t){var n=yS(e);n.v_.has(t.targetId)||(n.v_.set(t.targetId,t),ED(n)?xD(n):eL(n).Yo()&&wD(n,t))}function bD(e,t){var n=yS(e),r=eL(n);n.v_.delete(t),r.Yo()&&_D(n,t),0===n.v_.size&&(r.Yo()?r.e_():ID(n)&&n.O_.set("Unknown"))}function wD(e,t){if(e.N_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(LS.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}eL(e).l_(t)}function _D(e,t){e.N_.Le(t),eL(e).h_(t)}function xD(e){e.N_=new HA({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.v_.get(t)||null},st:function(){return e.datastore.serializer.databaseId}}),eL(e).start(),e.O_.y_()}function ED(e){return ID(e)&&!eL(e).Jo()&&e.v_.size>0}function ID(e){return 0===yS(e).F_.size}function SD(e){e.N_=void 0}function TD(e){return CD.apply(this,arguments)}function CD(){return(CD=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.v_.forEach((function(e,n){wD(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ND(e,t){return AD.apply(this,arguments)}function AD(){return(AD=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:SD(t),ED(t)?(t.O_.b_(n),xD(t)):t.O_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PD(e,t,n){return RD.apply(this,arguments)}function RD(){return RD=Za(Xa().mark((function e(t,n,r){var i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.O_.set("Online"),!(n instanceof KA&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=T(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.v_.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.v_.delete(o),t.N_.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),fS("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,OD(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof BA?t.N_.Ge(n):n instanceof qA?t.N_.Xe(n):t.N_.He(n),r.isEqual(LS.min())){e.next=29;break}return e.prev=14,e.next=17,SO(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.N_._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.v_.get(r);i&&e.v_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.v_.get(t);if(r){e.v_.set(t,r.withResumeToken(nC.EMPTY_BYTE_STRING,r.snapshotVersion)),_D(e,t);var i=new NP(r.target,t,n,r.sequenceNumber);wD(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),fS("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,OD(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),RD.apply(this,arguments)}function OD(e,t,n){return DD.apply(this,arguments)}function DD(){return(DD=Za(Xa().mark((function e(t,n,r){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(aT(n)){e.next=2;break}throw n;case 2:return t.F_.add(1),e.next=5,yD(t);case 5:t.O_.set("Offline"),r||(r=function(){return SO(t.localStore)}),t.asyncQueue.enqueueRetryable(Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fS("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.F_.delete(1),e.next=6,vD(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LD(e,t){return t().catch((function(n){return OD(e,n,t)}))}function MD(e){return UD.apply(this,arguments)}function UD(){return UD=Za(Xa().mark((function e(t){var n,r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yS(t),r=tL(n),i=n.C_.length>0?n.C_[n.C_.length-1].batchId:-1;case 2:if(!FD(n)){e.next=19;break}return e.prev=3,e.next=6,NO(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.C_.length&&r.e_(),e.abrupt("break",19);case 10:i=a.batchId,jD(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,OD(n,e.t0);case 17:e.next=2;break;case 19:VD(n)&&zD(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),UD.apply(this,arguments)}function FD(e){return ID(e)&&e.C_.length<10}function jD(e,t){e.C_.push(t);var n=tL(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function VD(e){return ID(e)&&!tL(e).Jo()&&e.C_.length>0}function zD(e){tL(e).start()}function BD(e){return qD.apply(this,arguments)}function qD(){return(qD=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tL(t).A_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KD(e){return GD.apply(this,arguments)}function GD(){return(GD=Za(Xa().mark((function e(t){var n,r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=tL(t),r=T(t.C_);try{for(r.s();!(i=r.n()).done;)a=i.value,n.d_(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HD(e,t,n){return WD.apply(this,arguments)}function WD(){return WD=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.C_.shift(),a=CA.from(i,n,r),e.next=3,LD(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,MD(t);case 5:case"end":return e.stop()}}),e)}))),WD.apply(this,arguments)}function QD(e,t){return YD.apply(this,arguments)}function YD(){return YD=Za(Xa().mark((function e(t,n){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&tL(t).I_,!e.t0){e.next=4;break}return e.next=4,function(){var e=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return PA(e)&&e!==gS.ABORTED}(n.code)){e.next=7;break}return r=t.C_.shift(),tL(t).Xo(),e.next=5,LD(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,MD(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:VD(t)&&zD(t);case 5:case"end":return e.stop()}}),e)}))),YD.apply(this,arguments)}function $D(e,t){return XD.apply(this,arguments)}function XD(){return XD=Za(Xa().mark((function e(t,n){var r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=yS(t)).asyncQueue.verifyOperationInProgress(),fS("RemoteStore","RemoteStore received new credentials"),i=ID(r),r.F_.add(3),e.next=6,yD(r);case 6:return i&&r.O_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.F_.delete(3),e.next=12,vD(r);case 12:case"end":return e.stop()}}),e)}))),XD.apply(this,arguments)}function JD(e,t){return ZD.apply(this,arguments)}function ZD(){return(ZD=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yS(t),!n){e.next=7;break}return r.F_.delete(2),e.next=5,vD(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.F_.add(2),e.next=12,yD(r);case 12:r.O_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eL(e){return e.B_||(e.B_=function(e,t,n){var r=yS(e);return r.V_(),new lD(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:TD.bind(null,e),Eo:ND.bind(null,e),c_:PD.bind(null,e)}),e.M_.push(function(){var t=Za(Xa().mark((function t(n){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.B_.Xo(),ED(e)?xD(e):e.O_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.B_.stop();case 6:SD(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}function tL(e){return e.L_||(e.L_=function(e,t,n){var r=yS(e);return r.V_(),new fD(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:BD.bind(null,e),Eo:QD.bind(null,e),E_:KD.bind(null,e),T_:HD.bind(null,e)}),e.M_.push(function(){var t=Za(Xa().mark((function t(n){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Xo(),t.next=4,MD(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.C_.length>0&&(fS("RemoteStore","Stopping write stream with ".concat(e.C_.length," pending writes")),e.C_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_}var nL=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bS,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kS(gS.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function rL(e,t){if(hS("AsyncQueue","".concat(t,": ").concat(e)),aT(e))return new kS(gS.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var iL=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||VS.comparator(e.key,n.key)}:function(e,t){return VS.comparator(e.key,t.key)},this.keyedMap=UN(),this.sortedSet=new QT(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),aL=function(){function e(){d(this,e),this.k_=new QT(VS.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.k_.get(t);n?0!==e.type&&3===n.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==n.type?this.k_=this.k_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.k_=this.k_.remove(t):1===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):vS():this.k_=this.k_.insert(t,e)}},{key:"q_",value:function(){var e=[];return this.k_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),oL=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&SN(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,iL.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),uL=y((function e(){d(this,e),this.Q_=void 0,this.listeners=[]})),sL=y((function e(){d(this,e),this.queries=new ON((function(e){return TN(e)}),SN),this.onlineState="Unknown",this.K_=new Set}));function cL(e,t){return lL.apply(this,arguments)}function lL(){return lL=Za(Xa().mark((function e(t,n){var r,i,a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yS(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new uL),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=rL(e.t0,"Initialization of query '".concat(CN(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.U_(r.onlineState),o.Q_&&n.W_(o.Q_)&&vL(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),lL.apply(this,arguments)}function fL(e,t){return hL.apply(this,arguments)}function hL(){return hL=Za(Xa().mark((function e(t,n){var r,i,a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yS(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),hL.apply(this,arguments)}function dL(e,t){var n,r=yS(e),i=!1,a=T(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=T(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.W_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&vL(r)}function pL(e,t,n){var r=yS(e),i=r.queries.get(t);if(i){var a,o=T(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function vL(e){e.K_.forEach((function(e){e.next()}))}var mL=function(){function e(t,n,r){d(this,e),this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"W_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=T(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new oL(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.z_?this.H_(e)&&(this.G_.next(e),a=!0):this.J_(e,this.onlineState)&&(this.Y_(e),a=!0),this.j_=e,a}},{key:"onError",value:function(e){this.G_.error(e)}},{key:"U_",value:function(e){this.onlineState=e;var t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}},{key:"J_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"H_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Y_",value:function(e){e=oL.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}]),e}(),yL=function(){function e(t,n){d(this,e),this.X_=t,this.byteLength=n}return y(e,[{key:"ea",value:function(){return"metadata"in this.X_}}]),e}(),gL=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"Is",value:function(e){return uP(this.serializer,e)}},{key:"ds",value:function(e){return e.metadata.exists?dP(this.serializer,e.document,!1):LC.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return rP(e)}}]),e}(),kL=function(){function e(t,n,r){d(this,e),this.ta=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=bL(t)}return y(e,[{key:"na",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;var n=US.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ra",value:function(e){var t,n=new Map,r=new gL(this.serializer),i=T(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Is(a.metadata.name),s=T(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||KN()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UO(this.localStore,new gL(this.serializer),this.documents,this.ta.id);case 2:t=e.sent,n=this.ra(this.documents),r=T(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,jO(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function bL(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var wL=y((function e(t){d(this,e),this.key=t})),_L=y((function e(t){d(this,e),this.key=t})),xL=function(){function e(t,n){d(this,e),this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=KN(),this.mutatedKeys=KN(),this.ua=PN(t),this.ca=new iL(this.ua)}return y(e,[{key:"la",get:function(){return this.oa}},{key:"ha",value:function(e,t){var n=this,r=t?t.Pa:new aL,i=t?t.ca:this.ca,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=NN(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ia(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ua(f,s)>0||c&&n.ua(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,es:u,mutatedKeys:a}}},{key:"Ia",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;var a=e.Pa.q_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vS()}};return n(e)-n(t)}(e.type,t.type)||r.ua(e.doc,t.doc)})),this.da(n);var o=t?this.Ta():[],u=0===this.aa.size&&this.current?1:0,s=u!==this._a;return this._a=u,0!==a.length||s?{snapshot:new oL(this.query,e.ca,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"U_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new aL,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}},{key:"Aa",value:function(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}},{key:"da",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.oa=t.oa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.oa=t.oa.delete(e)})),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this.aa;this.aa=KN(),this.ca.forEach((function(t){e.Aa(t.key)&&(e.aa=e.aa.add(t.key))}));var n=[];return t.forEach((function(t){e.aa.has(t)||n.push(new _L(t))})),this.aa.forEach((function(e){t.has(e)||n.push(new wL(e))})),n}},{key:"Ra",value:function(e){this.oa=e.Ps,this.aa=KN();var t=this.ha(e.documents);return this.applyChanges(t,!0)}},{key:"Va",value:function(){return oL.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}]),e}(),EL=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),IL=y((function e(t){d(this,e),this.key=t,this.ma=!1})),SL=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new ON((function(e){return TN(e)}),SN),this.pa=new Map,this.ya=new Set,this.wa=new QT(VS.comparator),this.Sa=new Map,this.ba=new nO,this.Da={},this.Ca=new Map,this.va=PR.Ln(),this.onlineState="Unknown",this.Fa=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}]),e}();function TL(e,t){return CL.apply(this,arguments)}function CL(){return CL=Za(Xa().mark((function e(t,n){var r,i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=bM(t),!(o=r.ga.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Va(),e.next=15;break;case 6:return e.next=8,AO(r.localStore,_N(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,NL(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&kD(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),CL.apply(this,arguments)}function NL(e,t,n,r,i){return AL.apply(this,arguments)}function AL(){return AL=Za(Xa().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ma=function(e,n,r){return function(){var e=Za(Xa().mark((function e(t,n,r,i){var a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.ha(r),e.t0=a.es,!e.t0){e.next=6;break}return e.next=5,OO(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ha(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",($L(t,n.targetId,u.Ea),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,OO(t.localStore,n,!0);case 3:return o=e.sent,u=new xL(n,o.Ps),s=u.ha(o.documents),c=zA.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),$L(t,r,l.Ea),f=new EL(n,r,u),e.abrupt("return",(t.ga.set(n,f),t.pa.has(r)?t.pa.get(r).push(n):t.pa.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),AL.apply(this,arguments)}function PL(e,t){return RL.apply(this,arguments)}function RL(){return RL=Za(Xa().mark((function e(t,n){var r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yS(t),i=r.ga.get(n),!((a=r.pa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.pa.set(i.targetId,a.filter((function(e){return!SN(e,n)}))),void r.ga.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,PO(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),bD(r.remoteStore,i.targetId),QL(r,i.targetId)})).catch(JS);case 9:e.next=14;break;case 11:return QL(r,i.targetId),e.next=14,PO(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),RL.apply(this,arguments)}function OL(e,t,n){return DL.apply(this,arguments)}function DL(){return DL=Za(Xa().mark((function e(t,n,r){var i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wM(t),e.prev=1,e.next=4,function(e,t){var n,r,i=yS(e),a=DS.now(),o=t.reduce((function(e,t){return e.add(t.key)}),KN());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=LN(),s=KN();return i._s.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=T(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=mA(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new kA(c.key,l,DC(l.value.mapValue),lA.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:FN(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new QT(PS)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,ZL(i,a.changes);case 9:return e.next=11,MD(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=rL(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),DL.apply(this,arguments)}function LL(e,t){return ML.apply(this,arguments)}function ML(){return ML=Za(Xa().mark((function e(t,n){var r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),e.prev=1,e.next=4,TO(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Sa.get(t);n&&(mS(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ma=!0:e.modifiedDocuments.size>0?mS(n.ma):e.removedDocuments.size>0&&(mS(n.ma),n.ma=!1))})),e.next=8,ZL(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,JS(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ML.apply(this,arguments)}function UL(e,t,n){var r=yS(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach((function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=yS(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=T(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&vL(n)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function FL(e,t,n){return jL.apply(this,arguments)}function jL(){return jL=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s,c;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=yS(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Sa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new QT(VS.comparator)).insert(o,LC.newNoDocument(o,LS.min())),s=KN().add(o),c=new VA(LS.min(),new Map,new QT(PS),u,s),e.next=9,LL(i,c);case 9:i.wa=i.wa.remove(o),i.Sa.delete(n),JL(i),e.next=16;break;case 14:return e.next=16,PO(i.localStore,n,!1).then((function(){return QL(i,n,r)})).catch(JS);case 16:case"end":return e.stop()}}),e)}))),jL.apply(this,arguments)}function VL(e,t){return zL.apply(this,arguments)}function zL(){return zL=Za(Xa().mark((function e(t,n){var r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),i=n.batch.batchId,e.prev=1,e.next=4,IO(r.localStore,n);case 4:return a=e.sent,WL(r,i,null),HL(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ZL(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,JS(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),zL.apply(this,arguments)}function BL(e,t,n){return qL.apply(this,arguments)}function qL(){return qL=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yS(t),e.prev=1,e.next=4,function(e,t){var n=yS(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return mS(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,WL(i,n,r),HL(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ZL(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,JS(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),qL.apply(this,arguments)}function KL(e,t){return GL.apply(this,arguments)}function GL(){return GL=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ID((r=yS(t)).remoteStore)||fS("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=yS(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ca.get(i)||[]).push(n),r.Ca.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=rL(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),GL.apply(this,arguments)}function HL(e,t){(e.Ca.get(t)||[]).forEach((function(e){e.resolve()})),e.Ca.delete(t)}function WL(e,t,n){var r=yS(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function QL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=T(e.pa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ga.delete(a),n&&e.fa.xa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.pa.delete(t),e.isPrimaryClient&&e.ba.mr(t).forEach((function(t){e.ba.containsKey(t)||YL(e,t)}))}function YL(e,t){e.ya.delete(t.path.canonicalString());var n=e.wa.get(t);null!==n&&(bD(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),JL(e))}function $L(e,t,n){var r,i=T(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof wL?(e.ba.addReference(a.key,t),XL(e,a)):a instanceof _L?(fS("SyncEngine","Document no longer in limbo: "+a.key),e.ba.removeReference(a.key,t),e.ba.containsKey(a.key)||YL(e,a.key)):vS()}}catch(o){i.e(o)}finally{i.f()}}function XL(e,t){var n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(fS("SyncEngine","New document in limbo: "+n),e.ya.add(r),JL(e))}function JL(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){var t=e.ya.values().next().value;e.ya.delete(t);var n=new VS(US.fromString(t)),r=e.va.next();e.Sa.set(r,new IL(n)),e.wa=e.wa.insert(n,r),kD(e.remoteStore,new NP(_N(mN(n.path)),r,"TargetPurposeLimboResolution",hT.ae))}}function ZL(e,t,n){return eM.apply(this,arguments)}function eM(){return eM=Za(Xa().mark((function e(t,n,r){var i,a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yS(t),a=[],o=[],u=[],e.t0=i.ga.isEmpty(),e.t0){e.next=9;break}return i.ga.forEach((function(e,t){u.push(i.Ma(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=gO.$i(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fa.c_(a),e.next=9,function(){var e=Za(Xa().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return eT.forEach(n,(function(t){return eT.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return eT.forEach(t.Ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),aT(e.t0)){e.next=10;break}throw e.t0;case 10:fS("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=T(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.rs.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.rs=r.rs.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),eM.apply(this,arguments)}function tM(e,t){return nM.apply(this,arguments)}function nM(){return(nM=Za(Xa().mark((function e(t,n){var r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=yS(t)).currentUser.isEqual(n)){e.next=11;break}return fS("SyncEngine","User change. New user:",n.toKey()),e.next=5,xO(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ca.forEach((function(e){e.forEach((function(e){e.reject(new kS(gS.CANCELLED,t))}))})),e.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,ZL(r,i.cs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rM(e,t){var n=yS(e),r=n.Sa.get(t);if(r&&r.ma)return KN().add(r.key);var i=KN(),a=n.pa.get(t);if(!a)return i;var o,u=T(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ga.get(s);i=i.unionWith(c.view.la)}}catch(l){u.e(l)}finally{u.f()}return i}function iM(e,t){return aM.apply(this,arguments)}function aM(){return aM=Za(Xa().mark((function e(t,n){var r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),e.next=3,OO(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ra(i),e.abrupt("return",(r.isPrimaryClient&&$L(r,n.targetId,a.Ea),a));case 6:case"end":return e.stop()}}),e)}))),aM.apply(this,arguments)}function oM(e,t){return uM.apply(this,arguments)}function uM(){return(uM=Za(Xa().mark((function e(t,n){var r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),e.abrupt("return",LO(r.localStore,n).then((function(e){return ZL(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sM(e,t,n,r){return cM.apply(this,arguments)}function cM(){return cM=Za(Xa().mark((function e(t,n,r,i){var a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=yS(t),e.next=3,function(e,t){var n=yS(e),r=yS(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Fn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):eT.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,MD(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(WL(a,n,i||null),HL(a,n),function(e,t){yS(yS(e).mutationQueue).xn(t)}(a.localStore,n)):vS();case 11:return e.next=13,ZL(a,o);case 13:e.next=16;break;case 15:fS("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),cM.apply(this,arguments)}function lM(e,t){return fM.apply(this,arguments)}function fM(){return(fM=Za(Xa().mark((function e(t,n){var r,i,a,o,u,s,c,l;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bM(r=yS(t)),wM(r),!0!==n||!0===r.Fa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,hM(r,i.toArray());case 5:return a=e.sent,r.Fa=!0,e.next=9,JD(r.remoteStore,!0);case 9:o=T(a);try{for(o.s();!(u=o.n()).done;)s=u.value,kD(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Fa){e.next=25;break}return c=[],l=Promise.resolve(),r.pa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return QL(r,t),PO(r.localStore,t,!0)})),bD(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,hM(r,c);case 21:return function(e){var t=yS(e);t.Sa.forEach((function(e,n){bD(t.remoteStore,n)})),t.ba.gr(),t.Sa=new Map,t.wa=new QT(VS.comparator)}(r),r.Fa=!1,e.next=25,JD(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hM(e,t,n){return dM.apply(this,arguments)}function dM(){return dM=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=yS(t),a=[],o=[],u=T(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.pa.get(c))||0===f.length){e.next=34;break}return e.next=11,AO(i.localStore,_N(f[0]));case 11:l=e.sent,h=T(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ga.get(p),e.next=20,iM(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,DO(i.localStore,c);case 36:return y=e.sent,e.next=39,AO(i.localStore,y);case 39:return l=e.sent,e.next=42,NL(i,pM(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fa.c_(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),dM.apply(this,arguments)}function pM(e){return vN(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function vM(e){return function(e){return yS(yS(e).persistence).ki()}(yS(e).localStore)}function mM(e,t,n,r){return yM.apply(this,arguments)}function yM(){return yM=Za(Xa().mark((function e(t,n,r,i){var a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=yS(t)).Fa){e.next=3;break}return e.abrupt("return",void fS("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.pa.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,LO(a.localStore,AN(o[0]));case 10:return u=e.sent,s=VA.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,nC.EMPTY_BYTE_STRING),e.next=14,ZL(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,PO(a.localStore,n,!0);case 17:return QL(a,n,i),e.abrupt("break",20);case 19:vS();case 20:case"end":return e.stop()}}),e)}))),yM.apply(this,arguments)}function gM(e,t,n){return kM.apply(this,arguments)}function kM(){return kM=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=bM(t)).Fa){e.next=45;break}a=T(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.pa.has(u)){e.next=10;break}return fS("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,DO(i.localStore,u);case 12:return s=e.sent,e.next=15,AO(i.localStore,s);case 15:return c=e.sent,e.next=18,NL(i,pM(s),c.targetId,!1,c.resumeToken);case 18:kD(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=T(r),e.prev=30,h=Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.pa.has(t),!e.t0){e.next=5;break}return e.next=5,PO(i.localStore,t,!1).then((function(){bD(i.remoteStore,t),QL(i,t)})).catch(JS);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),kM.apply(this,arguments)}function bM(e){var t=yS(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=LL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=FL.bind(null,t),t.fa.c_=dL.bind(null,t.eventManager),t.fa.xa=pL.bind(null,t.eventManager),t}function wM(e){var t=yS(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=VL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=BL.bind(null,t),t}function _M(e,t,n){var r=yS(e);(function(){var e=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=yS(e),r=rP(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ur.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(bL(i)),a=new kL(i,t.localStore,n.serializer),e.next=15,n.Oa();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.na(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Oa();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,ZL(t,s.sa,void 0);case 31:return e.next=33,function(e,t){var n=yS(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ur.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.ia));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(dS("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var xM=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=uD(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return _O(this.persistence,new bO,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new sO(lO.Jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new $O}},{key:"terminate",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),EM=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Na=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=Za(Xa().mark((function e(t){var r=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kf(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Na.initialize(this,t);case 4:return e.next=6,wM(this.Na.syncEngine);case 6:return e.next=8,MD(this.Na.remoteStore);case 8:return e.next=10,this.persistence.gi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return _O(this.persistence,new bO,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new FR(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new fT(t,this.persistence);return new lT(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=yO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xR.withCacheSize(this.cacheSizeBytes):xR.DEFAULT;return new pO(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,aD(),oD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new $O}}]),n}(xM),IM=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Na=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=Za(Xa().mark((function e(t){var r,i=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kf(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Na.syncEngine,e.t0=this.sharedClientState instanceof YO,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Xs:sM.bind(null,r),eo:mM.bind(null,r),no:gM.bind(null,r),ki:vM.bind(null,r),Zs:oM.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.gi(function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lM(i.Na.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=aD();if(!YO.C(t))throw new kS(gS.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new YO(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(EM),SM=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=Za(Xa().mark((function e(t,n){var r=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return UL(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tM.bind(null,this.syncEngine),e.next=12,JD(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new sL}},{key:"createDatastore",value:function(e){var t=uD(e.databaseInfo.databaseId),n=function(e){return new iD(e)}(e.databaseInfo);return function(e,t,n,r){return new hD(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new pD(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return UL(t.syncEngine,e,0)}),JO.C()?new JO:new XO)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new SL(e,t,n,r,i,a);return o&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yS(t),fS("RemoteStore","RemoteStore shutting down."),n.F_.add(5),e.next=5,yD(n);case 5:n.x_.shutdown(),n.O_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function TM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Za(Xa().mark((function r(){var i;return Xa().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var CM=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Ba(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ba(this.observer.error,e):hS("Uncaught Error in snapshot listener:",e.toString())}},{key:"La",value:function(){this.muted=!0}},{key:"Ba",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),NM=function(){function e(t,n){var r=this;d(this,e),this.ka=t,this.serializer=n,this.metadata=new bS,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((function(e){e&&e.ea()?r.metadata.resolve(e.X_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.ka.cancel()}},{key:"getMetadata",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qa",value:function(){var e=Za(Xa().mark((function e(){var t,n,r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.qa.decode(t),r=Number(n),isNaN(r)&&this.$a("length string (".concat(n,") is not valid number")),e.next=9,this.Ua(r);case 9:return i=e.sent,e.abrupt("return",new yL(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ka",value:function(){var e=Za(Xa().mark((function e(){var t,n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Wa()<0)){e.next=7;break}return e.next=3,this.Ga();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Wa())<0&&this.$a("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ga();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.$a("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.qa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$a",value:function(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ga",value:function(){var e=Za(Xa().mark((function e(){var t,n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),AM=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=Za(Xa().mark((function e(t){var n,r=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new kS(gS.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Za(Xa().mark((function e(t,n){var r,i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),i=lP(r.serializer)+"/documents",a={documents:n.map((function(e){return oP(r.serializer,e)}))},e.next=5,r.Fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=pP(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());mS(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new IA(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Za(Xa().mark((function e(){var t,n=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=VS.fromPath(t);n.mutations.push(new SA(r,n.precondition(r)))})),e.next=7,function(){var e=Za(Xa().mark((function e(t,n){var r,i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yS(t),i=lP(r.serializer)+"/documents",a={writes:n.map((function(e){return vP(r.serializer,e)}))},e.next=3,r.bo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vS();t=LS.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new kS(gS.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(LS.min())?lA.exists(!1):lA.updateTime(t):lA.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(LS.min()))throw new kS(gS.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lA.updateTime(t)}return lA.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),PM=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.Ho=new sD(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.za-=1,this.ja()}},{key:"ja",value:function(){var e=this;this.Ho.Qo(Za(Xa().mark((function t(){var n,r;return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new AM(e.datastore),(r=e.Ha(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ja(t)}))}))})).catch((function(t){e.Ja(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ha",value:function(e){try{var t=this.updateFunction(e);return!dT(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ja",value:function(e){var t=this;this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((function(){return t.ja(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ya",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!PA(t)}return!1}}]),e}(),RM=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=uS.UNAUTHENTICATED,this.clientId=AS.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fS("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return fS("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Za(Xa().mark((function e(){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new kS(gS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new bS;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Za(Xa().mark((function n(){var r;return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=rL(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function OM(e,t){return DM.apply(this,arguments)}function DM(){return DM=Za(Xa().mark((function e(t,n){var r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),fS("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,xO(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),DM.apply(this,arguments)}function LM(e,t){return MM.apply(this,arguments)}function MM(){return MM=Za(Xa().mark((function e(t,n){var r,i;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,FM(t);case 3:return r=e.sent,fS("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return $D(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return $D(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),MM.apply(this,arguments)}function UM(e){return"FirebaseError"===e.name?e.code===gS.FAILED_PRECONDITION||e.code===gS.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function FM(e){return jM.apply(this,arguments)}function jM(){return(jM=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return fS("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,OM(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),UM(n=e.t0)){e.next=13;break}throw n;case 13:return dS("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,OM(t,new xM);case 16:e.next=21;break;case 18:return fS("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,OM(t,new xM);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function VM(e){return zM.apply(this,arguments)}function zM(){return(zM=Za(Xa().mark((function e(t){return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return fS("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,LM(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return fS("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,LM(t,new SM);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BM(e){return FM(e).then((function(e){return e.persistence}))}function qM(e){return FM(e).then((function(e){return e.localStore}))}function KM(e){return VM(e).then((function(e){return e.remoteStore}))}function GM(e){return VM(e).then((function(e){return e.syncEngine}))}function HM(e){return VM(e).then((function(e){return e.datastore}))}function WM(e){return QM.apply(this,arguments)}function QM(){return(QM=Za(Xa().mark((function e(t){var n,r;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VM(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=TL.bind(null,n.syncEngine),r.onUnlisten=PL.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bS;return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function i(){return Xa().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new CM({next:function(a){t.enqueueAndForget((function(){return fL(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new kS(gS.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new kS(gS.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new mL(mN(n.path),a,{includeMetadataChanges:!0,Z_:!0});return cL(e,o)},i.next=3,WM(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bS;return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function i(){return Xa().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new CM({next:function(n){t.enqueueAndForget((function(){return fL(e,o)})),n.fromCache&&"server"===r.source?i.reject(new kS(gS.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new mL(n,a,{includeMetadataChanges:!0,Z_:!0});return cL(e,o)},i.next=3,WM(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function XM(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var JM=new Map;function ZM(e,t,n){if(!n)throw new kS(gS.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function eU(e,t,n,r){if(!0===t&&!0===r)throw new kS(gS.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function tU(e){if(!VS.isDocumentKey(e))throw new kS(gS.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function nU(e){if(VS.isDocumentKey(e))throw new kS(gS.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function rU(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":vS()}function iU(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kS(gS.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=rU(e);throw new kS(gS.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function aU(e,t){if(t<=0)throw new kS(gS.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var oU=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new kS(gS.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kS(gS.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}eU("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XM(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new kS(gS.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new kS(gS.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new kS(gS.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),uU=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oU({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new kS(gS.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new kS(gS.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oU(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _S;switch(e.type){case"firstParty":return new SS(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new kS(gS.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=JM.get(e);t&&(fS("ComponentProvider","Removing Datastore"),JM.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function sU(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=iU(e,uU))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&dS("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=uS.MOCK_USER;else{u=Aa(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new kS(gS.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new uS(c)}e._authCredentials=new xS(new wS(u,s))}}var cU=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),lU=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new fU(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),fU=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,mN(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new lU(this.firestore,null,new VS(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cU);function hU(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$a(e),ZM("collection","path",t),e instanceof uU){var a=US.fromString.apply(US,[t].concat(r));return nU(a),new fU(e,null,a)}if(!(e instanceof lU||e instanceof fU))throw new kS(gS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(US.fromString.apply(US,[t].concat(r)));return nU(o),new fU(e.firestore,null,o)}function dU(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$a(e),1===arguments.length&&(t=AS.V()),ZM("doc","path",t),e instanceof uU){var a=US.fromString.apply(US,[t].concat(r));return tU(a),new lU(e,null,new VS(a))}if(!(e instanceof lU||e instanceof fU))throw new kS(gS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(US.fromString.apply(US,[t].concat(r)));return tU(o),new lU(e.firestore,e instanceof fU?e.converter:null,new VS(o))}function pU(e,t){return e=$a(e),t=$a(t),(e instanceof lU||e instanceof fU)&&(t instanceof lU||t instanceof fU)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function vU(e,t){return e=$a(e),t=$a(t),e instanceof cU&&t instanceof cU&&e.firestore===t.firestore&&SN(e._query,t._query)&&e.converter===t.converter}var mU=function(){function e(){var t=this;d(this,e),this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new sD(this,"async_queue_retry"),this.ou=function(){var e=oD();e&&fS("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ho.$o()};var n=oD();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ou)}return y(e,[{key:"isShuttingDown",get:function(){return this.eu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this._u(),this.au(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.eu){this.eu=!0,this.iu=e||!1;var t=oD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}},{key:"enqueue",value:function(e){var t=this;if(this._u(),this.eu)return new Promise((function(){}));var n=new bS;return this.au((function(){return t.eu&&t.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Xa.push(e),t.uu()}))}},{key:"uu",value:function(){var e=Za(Xa().mark((function e(){var t=this;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Xa.length){e.next=14;break}return e.prev=1,e.next=4,this.Xa[0]();case 4:this.Xa.shift(),this.Ho.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),aT(e.t0)){e.next=12;break}throw e.t0;case 12:fS("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Xa.length>0&&this.Ho.Qo((function(){return t.uu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"au",value:function(e){var t=this,n=this.Za.then((function(){return t.ru=!0,e().catch((function(e){t.nu=e,t.ru=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw hS("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.ru=!1,e}))}));return this.Za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this._u(),this.su.indexOf(e)>-1&&(t=0);var i=nL.createAndSchedule(this,e,t,n,(function(e){return r.cu(e)}));return this.tu.push(i),i}},{key:"_u",value:function(){this.nu&&vS()}},{key:"verifyOperationInProgress",value:function(){}},{key:"lu",value:function(){var e=Za(Xa().mark((function e(){var t;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Za,e.next=3,t;case 3:if(t!==this.Za){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t,n=T(this.tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.lu().then((function(){t.tu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=T(t.tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lu()}))}},{key:"Iu",value:function(e){this.su.push(e)}},{key:"cu",value:function(e){var t=this.tu.indexOf(e);this.tu.splice(t,1)}}]),e}();function yU(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var gU=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new bS,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),kU=function(e){k(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new mU,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||wU(this),this._firestoreClient.terminate()}}]),n}(uU);function bU(e){return e._firestoreClient||wU(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wU(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new lC(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,XM(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new RM(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _U(e,t,n){var r=new bS;return e.asyncQueue.enqueue(Za(Xa().mark((function i(){var a;return Xa().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,OM(e,n);case 3:return i.next=5,LM(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),UM(a=i.t0)){i.next=13;break}throw a;case 13:dS("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function xU(e){return function(e){var t=new bS;return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function n(){return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=KL,n.next=3,GM(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(bU(e=iU(e,kU)))}function EU(e){return function(e){return e.asyncQueue.enqueue(Za(Xa().mark((function t(){var n,r;return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,BM(e);case 2:return n=t.sent,t.next=5,KM(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=yS(e);return t.F_.delete(0),vD(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(bU(e=iU(e,kU)))}function IU(e){return function(e){return e.asyncQueue.enqueue(Za(Xa().mark((function t(){var n,r;return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,BM(e);case 2:return n=t.sent,t.next=5,KM(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yS(t)).F_.add(0),e.next=4,yD(n);case 4:n.O_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(bU(e=iU(e,kU)))}function SU(e,t){var n=bU(e=iU(e,kU)),r=new gU;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new NM(e,t)}(function(e,t){if(e instanceof Uint8Array)return TM(e,t);if(e instanceof ArrayBuffer)return TM(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?DA().encode(e):e),t)}(n,uD(t));e.asyncQueue.enqueueAndForget(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_M,t.next=3,GM(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function TU(e,t){return function(e,t){return e.asyncQueue.enqueue(Za(Xa().mark((function n(){return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=yS(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ur.getNamedQuery(e,t)}))},n.next=3,qM(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(bU(e=iU(e,kU)),t).then((function(t){return t?new cU(e,null,t.query):null}))}function CU(e){if(e._initialized||e._terminated)throw new kS(gS.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var NU=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(nC.fromBase64String(t))}catch(t){throw new kS(gS.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(nC.fromUint8Array(t))}}]),e}(),AU=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new kS(gS.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jS(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var PU=y((function e(t){d(this,e),this._methodName=t})),RU=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new kS(gS.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new kS(gS.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return PS(this._lat,e._lat)||PS(this._long,e._long)}}]),e}(),OU=/^__.*__$/,DU=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new kA(e,this.data,this.fieldMask,t,this.fieldTransforms):new gA(e,this.data,t,this.fieldTransforms)}}]),e}(),LU=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new kA(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function MU(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vS()}}var UU=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Au",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.Vu(e),r}},{key:"mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.du(),r}},{key:"fu",value:function(e){return this.Eu({path:void 0,Ru:!0})}},{key:"gu",value:function(e){return rF(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"du",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}},{key:"Vu",value:function(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(MU(this.Tu)&&OU.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}]),e}(),FU=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||uD(t)}return y(e,[{key:"wu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new UU({Tu:e,methodName:t,yu:n,path:jS.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function jU(e){var t=e._freezeSettings(),n=uD(e._databaseId);return new FU(e._databaseId,!!t.ignoreUndefinedProperties,n)}function VU(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wu(a.merge||a.mergeFields?2:0,t,n,i);ZU("Data must be an object, but it was:",o,r);var u,s,c=XU(r,o);if(a.merge)u=new eC(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=T(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=eF(t,l.value,n);if(!o.contains(d))throw new kS(gS.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));iF(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new eC(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new DU(new OC(c),u,s)}var zU=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.gu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(PU);function BU(e,t,n){return new UU({Tu:3,yu:t.settings.yu,methodName:e._methodName,Ru:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var qU=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new sA(e.path,new eA)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(PU),KU=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Su=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=BU(this,e,!0),n=this.Su.map((function(e){return $U(e,t)})),r=new tA(n);return new sA(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PU),GU=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Su=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=BU(this,e,!0),n=this.Su.map((function(e){return $U(e,t)})),r=new rA(n);return new sA(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PU),HU=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).bu=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new aA(e.serializer,YN(e.serializer,this.bu));return new sA(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(PU);function WU(e,t,n,r){var i=e.wu(1,t,n);ZU("Data must be an object, but it was:",i,r);var a=[],o=OC.empty();HT(r,(function(e,r){var u=nF(t,e,n);r=$a(r);var s=i.mu(u);if(r instanceof zU)a.push(u);else{var c=$U(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new eC(a);return new LU(o,u,i.fieldTransforms)}function QU(e,t,n,r,i,a){var o=e.wu(1,t,n),u=[eF(t,r,n)],s=[i];if(a.length%2!=0)throw new kS(gS.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(eF(t,a[c])),s.push(a[c+1]);for(var l=[],f=OC.empty(),h=u.length-1;h>=0;--h)if(!iF(l,u[h])){var d=u[h],p=s[h];p=$a(p);var v=o.mu(d);if(p instanceof zU)l.push(d);else{var m=$U(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new eC(l);return new LU(f,y,o.fieldTransforms)}function YU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return $U(n,e.wu(r?4:3,t))}function $U(e,t){if(JU(e=$a(e)))return ZU("Unsupported field value:",t,e),XU(e,t);if(e instanceof PU)return function(e,t){if(!MU(t.Tu))throw t.gu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&4!==t.Tu)throw t.gu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=T(e);try{for(a.s();!(n=a.n()).done;){var o=$U(n.value,t.fu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=$a(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return YN(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=DS.fromDate(e);return{timestampValue:eP(t.serializer,n)}}if(e instanceof DS){var r=new DS(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:eP(t.serializer,r)}}if(e instanceof RU)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof NU)return{bytesValue:tP(t.serializer,e._byteString)};if(e instanceof lU){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.gu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:iP(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.gu("Unsupported field value: ".concat(rU(e)))}(e,t)}function XU(e,t){var n={};return WT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):HT(e,(function(e,r){var i=$U(r,t.Au(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function JU(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof DS||e instanceof RU||e instanceof NU||e instanceof lU||e instanceof PU)}function ZU(e,t,n){if(!JU(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=rU(n);throw"an object"===r?t.gu(e+" a custom object"):t.gu(e+" "+r)}}function eF(e,t,n){if((t=$a(t))instanceof AU)return t._internalPath;if("string"==typeof t)return nF(e,t);throw rF("Field path arguments must be of type string or ",e,!1,void 0,n)}var tF=new RegExp("[~\\*/\\[\\]]");function nF(e,t,n){if(t.search(tF)>=0)throw rF("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(AU,h(t.split(".")))._internalPath}catch(et){throw rF("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function rF(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new kS(gS.INVALID_ARGUMENT,u+e+s)}function iF(e,t){return e.some((function(e){return e.isEqual(t)}))}var aF=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new lU(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new oF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(uF("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),oF=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return Kf(b(n.prototype),"data",this).call(this)}}]),n}(aF);function uF(e,t){return"string"==typeof t?nF(e,t):t instanceof AU?t._internalPath:t._delegate._internalPath}function sF(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new kS(gS.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cF=y((function e(){d(this,e)})),lF=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(cF);function fF(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof cF&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof dF})).length,n=e.filter((function(e){return e instanceof hF})).length;if(t>1||t>0&&n>0)throw new kS(gS.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=T(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var hF=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return IF(e._query,t),new cU(e.firestore,e.converter,EN(e._query,t))}},{key:"_parse",value:function(e){var t=jU(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new kS(gS.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){EF(o,a);var s,c=[],l=T(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(xF(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=xF(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||EF(o,a),u=YU(n,t,o,"in"===a||"not-in"===a);return BC.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lF);var dF=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:qC.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=T(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;IF(r,a),r=EN(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new cU(e.firestore,e.converter,EN(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(cF);var pF=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new kS(gS.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new kS(gS.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new jC(t,n);return function(e,t){if(null===gN(e)){var n=kN(e);null!==n&&SF(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new cU(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new pN(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(lF);var vF=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new cU(e.firestore,e.converter,IN(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lF);var mF=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=_F(e,this.type,this._docOrFields,this._inclusive);return new cU(e.firestore,e.converter,function(e,t){return new pN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lF);function yF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mF._create("startAt",t,!0)}function gF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mF._create("startAfter",t,!1)}var kF=function(e){k(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=_F(e,this.type,this._docOrFields,this._inclusive);return new cU(e.firestore,e.converter,function(e,t){return new pN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(lF);function bF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kF._create("endBefore",t,!1)}function wF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kF._create("endAt",t,!0)}function _F(e,t,n,r){if(n[0]=$a(n[0]),n[0]instanceof aF)return function(e,t,n,r,i){if(!r)throw new kS(gS.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=T(wN(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(wC(t,r.key));else{var c=r.data.field(s.field);if(uC(c))throw new kS(gS.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new kS(gS.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new MC(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=jU(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new kS(gS.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new kS(gS.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!bN(e)&&-1!==c.indexOf("/"))throw new kS(gS.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(US.fromString(c));if(!VS.isDocumentKey(l))throw new kS(gS.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new VS(l);u.push(wC(t,f))}else{var h=YU(n,r,c);u.push(h)}}return new MC(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function xF(e,t,n){if("string"==typeof(n=$a(n))){if(""===n)throw new kS(gS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bN(t)&&-1!==n.indexOf("/"))throw new kS(gS.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(US.fromString(n));if(!VS.isDocumentKey(r))throw new kS(gS.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wC(e,new VS(r))}if(n instanceof lU)return wC(e,n._key);throw new kS(gS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(rU(n),"."))}function EF(e,t){if(!Array.isArray(e)||0===e.length)throw new kS(gS.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function IF(e,t){if(t.isInequality()){var n=kN(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new kS(gS.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=gN(e);null!==i&&SF(e,r,i)}var a=function(e,t){var n,r=T(e);try{for(r.s();!(n=r.n()).done;){var i,a=T(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new kS(gS.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new kS(gS.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function SF(e,t,n){if(!n.isEqual(t))throw new kS(gS.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var TF=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pC(e)){case 0:return null;case 1:return e.booleanValue;case 2:return aC(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oC(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vS()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return HT(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new RU(aC(e.latitude),aC(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=sC(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cC(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=iC(e);return new DS(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=US.fromString(e);mS(CP(n));var r=new fC(n.get(1),n.get(3)),i=new VS(n.popFirst(5));return r.isEqual(t)||hS("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function CF(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var NF=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new NU(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lU(this.firestore,null,t)}}]),n}(TF);var AF=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),PF=function(e){k(n,e);var t=x(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return Kf(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new RF(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(uF("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(aF),RF=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kf(b(n.prototype),"data",this).call(this,e)}}]),n}(PF),OF=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new AF(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new RF(n._firestore,n._userDataWriter,r.key,r,new AF(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kS(gS.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new RF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new AF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new RF(e._firestore,e._userDataWriter,t.doc.key,t.doc,new AF(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:DF(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function DF(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vS()}}function LF(e,t){return e instanceof PF&&t instanceof PF?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof OF&&t instanceof OF&&e._firestore===t._firestore&&vU(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var MF=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new NU(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new lU(this.firestore,null,t)}}]),n}(TF);function UF(e){e=iU(e,lU);var t=iU(e.firestore,kU),n=bU(t),r=new MF(t);return function(e,t){var n=new bS;return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function r(){return Xa().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Za(Xa().mark((function e(t,n,r){var i,a;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=yS(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new kS(gS.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=rL(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,qM(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new PF(t,r,e._key,n,new AF(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function FF(e){e=iU(e,cU);var t=iU(e.firestore,kU),n=bU(t),r=new MF(t);return sF(e._query),$M(n,e._query).then((function(n){return new OF(t,r,e,n)}))}function jF(e){e=iU(e,cU);var t=iU(e.firestore,kU),n=bU(t),r=new MF(t);return function(e,t){var n=new bS;return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function r(){return Xa().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Za(Xa().mark((function e(t,n,r){var i,a,o,u,s;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,OO(t,n,!0);case 3:i=e.sent,a=new xL(n,i.Ps),o=a.ha(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=rL(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,qM(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new OF(t,r,e,n)}))}function VF(e){e=iU(e,cU);var t=iU(e.firestore,kU),n=bU(t),r=new MF(t);return $M(n,e._query,{source:"server"}).then((function(n){return new OF(t,r,e,n)}))}function zF(e,t,n){e=iU(e,lU);var r=iU(e.firestore,kU),i=CF(e.converter,t,n);return GF(r,[VU(jU(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,lA.none())])}function BF(e,t,n){e=iU(e,lU);for(var r=iU(e.firestore,kU),i=jU(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return GF(r,[("string"==typeof(t=$a(t))||t instanceof AU?QU(i,"updateDoc",e._key,t,n,o):WU(i,"updateDoc",e._key,t)).toMutation(e._key,lA.exists(!0))])}function qF(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=$a(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||yU(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(yU(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof lU)l=iU(e.firestore,kU),f=mN(e._key.path),c={next:function(t){n[s]&&n[s](HF(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=iU(e,cU);l=iU(p.firestore,kU),f=p._query;var v=new MF(l);c={next:function(e){n[s]&&n[s](new OF(l,v,p,e))},error:n[s+1],complete:n[s+2]},sF(e._query)}return function(e,t,n,r){var i=new CM(r),a=new mL(t,i,n);return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cL,t.next=3,WM(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.La(),e.asyncQueue.enqueueAndForget(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fL,t.next=3,WM(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(bU(l),f,h,c)}function KF(e,t){return function(e,t){var n=new CM(t);return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yS(e).K_.add(t),t.next()},t.next=3,WM(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.La(),e.asyncQueue.enqueueAndForget(Za(Xa().mark((function t(){return Xa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yS(e).K_.delete(t)},t.next=3,WM(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(bU(e=iU(e,kU)),yU(t)?t:{next:t})}function GF(e,t){return function(e,t){var n=new bS;return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function r(){return Xa().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=OL,r.next=3,GM(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(bU(e),t)}function HF(e,t,n){var r=n.docs.get(t._key),i=new MF(e);return new PF(e,i,t._key,r,new AF(n.hasPendingWrites,n.fromCache),t.converter)}var WF={maxAttempts:5},QF=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jU(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=YF(e,this._firestore),i=CF(r.converter,t,n),a=VU(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,lA.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=YF(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$a(t))||t instanceof AU?QU(this._dataReader,"WriteBatch.update",i._key,t,n,o):WU(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,lA.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=YF(e,this._firestore);return this._mutations=this._mutations.concat(new IA(t._key,lA.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new kS(gS.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function YF(e,t){if((e=$a(e)).firestore!==t)throw new kS(gS.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var $F=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=YF(e,this._firestore),i=new MF(this._firestore);return Kf(b(n.prototype),"get",this).call(this,e).then((function(e){return new PF(t._firestore,i,r._key,e._document,new AF(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=jU(t)}return y(e,[{key:"get",value:function(e){var t=this,n=YF(e,this._firestore),r=new NF(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return vS();var i=e[0];if(i.isFoundDocument())return new aF(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new aF(t._firestore,r,n._key,null,n.converter);throw vS()}))}},{key:"set",value:function(e,t,n){var r=YF(e,this._firestore),i=CF(r.converter,t,n),a=VU(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=YF(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$a(t))||t instanceof AU?QU(this._dataReader,"Transaction.update",i._key,t,n,o):WU(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=YF(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function XF(e,t,n){e=iU(e,kU);var r=Object.assign(Object.assign({},WF),n);return function(e){if(e.maxAttempts<1)throw new kS(gS.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new bS;return e.asyncQueue.enqueueAndForget(Za(Xa().mark((function i(){var a;return Xa().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,HM(e);case 2:a=i.sent,new PM(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(bU(e),(function(n){return t(new $F(e,n))}),r)}function JF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new KU("arrayUnion",t)}function ZF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new GU("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){sS=e}(Xo),Ko(new eo("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new kU(new ES(e.getProvider("auth-internal")),new CS(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new kS(gS.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fC(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ru(oS,"4.1.3",e),ru(oS,"4.1.3","esm2017")}();function ej(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new kS("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function tj(){if("undefined"===typeof Uint8Array)throw new kS("unimplemented","Uint8Arrays are not available in this environment.")}function nj(){if("undefined"==typeof atob)throw new kS("unimplemented","Blobs are unavailable in Firestore in this environment.")}var rj=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return nj(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return tj(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return nj(),new e(NU.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return tj(),new e(NU.fromUint8Array(t))}}]),e}();function ij(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=T(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var aj=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){CU(e=iU(e,kU));var n=bU(e);if(n._uninitializedComponentsProvider)throw new kS(gS.FAILED_PRECONDITION,"SDK cache is already specified.");dS("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new SM;return _U(n,i,new EM(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){CU(e=iU(e,kU));var t=bU(e);if(t._uninitializedComponentsProvider)throw new kS(gS.FAILED_PRECONDITION,"SDK cache is already specified.");dS("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new SM;return _U(t,r,new IM(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new kS(gS.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new bS;return e._queue.enqueueAndForgetEvenWhileRestricted(Za(Xa().mark((function n(){return Xa().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Za(Xa().mark((function e(t){var n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nT.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,nT.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(yO(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),oj=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof fC||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||dS("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};sU(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return EU(this._delegate)}},{key:"disableNetwork",value:function(){return IU(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&eU("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return xU(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return KF(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new kS("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new bj(this,hU(this._delegate,e))}catch(t){throw hj(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new fj(this,dU(this._delegate,e))}catch(t){throw hj(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new yj(this,function(e,t){if(e=iU(e,uU),ZM("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new kS(gS.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cU(e,null,function(e){return new pN(US.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw hj(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return XF(this._delegate,(function(n){return e(new sj(t,n))}))}},{key:"batch",value:function(){var e=this;return bU(this._delegate),new cj(new QF(this._delegate,(function(t){return GF(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return SU(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return TU(this._delegate,e).then((function(e){return e?new yj(t,e):null}))}}]),e}(),uj=function(e){k(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new rj(new NU(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return fj.forKey(t,this.firestore,null)}}]),n}(TF);var sj=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new uj(t)}return y(e,[{key:"get",value:function(e){var t=this,n=wj(e);return this._delegate.get(n).then((function(e){return new vj(t._firestore,new PF(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=wj(e);return n?(ej("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=wj(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=wj(e);return this._delegate.delete(t),this}}]),e}(),cj=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=wj(e);return n?(ej("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=wj(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=wj(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),lj=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new RF(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mj(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new uj(t),n),i.set(n,a)),a}}]),e}();lj.INSTANCES=new WeakMap;var fj=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new uj(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new bj(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new bj(this.firestore,hU(this._delegate,e))}catch(t){throw hj(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=$a(e))instanceof lU&&pU(this._delegate,e)}},{key:"set",value:function(e,t){t=ej("DocumentReference.set",t);try{return t?zF(this._delegate,e,t):zF(this._delegate,e)}catch(n){throw hj(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?BF(this._delegate,e):BF.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw hj(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return GF(iU((e=this._delegate).firestore,kU),[new IA(e._key,lA.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=dj(n),a=pj(n,(function(t){return new vj(e.firestore,new PF(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return qF(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?UF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=iU(e,lU);var t=iU(e.firestore,kU);return YM(bU(t),e._key,{source:"server"}).then((function(n){return HF(t,e,n)}))}(this._delegate):function(e){e=iU(e,lU);var t=iU(e.firestore,kU);return YM(bU(t),e._key).then((function(n){return HF(t,e,n)}))}(this._delegate)).then((function(e){return new vj(t.firestore,new PF(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(lj.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new kS("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new lU(n._delegate,r,new VS(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new lU(n._delegate,r,t))}}]),e}();function hj(e,t,n){return e.message=e.message.replace(t,n),e}function dj(e){var t,n=T(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!ij(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function pj(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=ij(e[0])?e[0]:ij(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vj=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new fj(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return LF(this._delegate,e._delegate)}}]),e}(),mj=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||vS(),t}}]),n}(vj),yj=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new uj(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,fF(this._delegate,function(e,t,n){var r=t,i=uF("where",e);return hF._create(i,r,n)}(t,n,r)))}catch(i){throw hj(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,fF(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=uF("orderBy",e);return pF._create(n,t)}(t,n)))}catch(r){throw hj(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,fF(this._delegate,(aU("limit",n=t),vF._create("limit",n,"F"))))}catch(n){throw hj(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,fF(this._delegate,(aU("limitToLast",n=t),vF._create("limitToLast",n,"L"))))}catch(n){throw hj(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,fF(this._delegate,yF.apply(void 0,arguments)))}catch(t){throw hj(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,fF(this._delegate,gF.apply(void 0,arguments)))}catch(t){throw hj(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,fF(this._delegate,bF.apply(void 0,arguments)))}catch(t){throw hj(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,fF(this._delegate,wF.apply(void 0,arguments)))}catch(t){throw hj(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return vU(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?jF(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?VF(this._delegate):FF(this._delegate)).then((function(e){return new kj(t.firestore,new OF(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=dj(n),a=pj(n,(function(t){return new kj(e.firestore,new OF(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return qF(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(lj.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),gj=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new mj(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),kj=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new yj(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new mj(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new gj(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new mj(n._firestore,r))}))}},{key:"isEqual",value:function(e){return LF(this._delegate,e._delegate)}}]),e}(),bj=function(e){k(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new fj(this.firestore,e):null}},{key:"doc",value:function(e){try{return new fj(this.firestore,void 0===e?dU(this._delegate):dU(this._delegate,e))}catch(t){throw hj(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=iU(e.firestore,kU),r=dU(e),i=CF(e.converter,t);return GF(n,[VU(jU(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,lA.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new fj(t.firestore,e)}))}},{key:"isEqual",value:function(e){return pU(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(lj.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(yj);function wj(e){return iU(e,lU)}var _j=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(AU,n)}return y(e,[{key:"isEqual",value:function(e){return(e=$a(e))instanceof AU&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(jS.keyField().canonicalString())}}]),e}(),xj=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new qU("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new zU("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=JF.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ZF.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new HU("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Ej={Firestore:oj,GeoPoint:RU,Timestamp:DS,Blob:rj,Transaction:sj,WriteBatch:cj,DocumentReference:fj,DocumentSnapshot:vj,Query:yj,QueryDocumentSnapshot:mj,QuerySnapshot:kj,CollectionReference:bj,FieldPath:_j,FieldValue:xj,setLogLevel:function(e){var t;t=e,cS.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new eo("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Ej)))}(e,(function(e,t){return new oj(e,t,new aj)})),e.registerVersion("@firebase/firestore-compat","0.3.17")}(Nu);var Ij=function(e){var t,n=e.post;return(0,_k.jsxs)(jw,{as:$e,to:"/posts/".concat(n.id),children:[(0,_k.jsx)(jw.Image,{src:n.imageUrl||"https://react.semantic-ui.com/images/wireframe/image.png"}),(0,_k.jsxs)(jw.Content,{children:[(0,_k.jsxs)(jw.Meta,{children:[n.author.photoURL?(0,_k.jsx)(mf,{src:n.author.photoURL,avatar:!0}):(0,_k.jsx)(rc,{name:"user circle"})," ",n.topic," . ",n.author.displayName||"\u4f7f\u7528\u8005"]}),(0,_k.jsx)(jw.Header,{children:n.title}),(0,_k.jsx)(jw.Description,{children:n.content}),(0,_k.jsxs)(jw.Extra,{children:["\u7559\u8a00 ",n.commentsCount||0," . \u8b9a ",(null===(t=n.likedBy)||void 0===t?void 0:t.length)||0]})]})]})},Sj=!("undefined"===typeof window||!window.document||!window.document.createElement);var Tj=void 0;function Cj(){return void 0===Tj&&(Tj=function(){if(!Sj)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t)}catch(r){}return e}()),Tj}function Nj(e){e.handlers===e.nextHandlers&&(e.nextHandlers=e.handlers.slice())}function Aj(e){this.target=e,this.events={}}Aj.prototype.getEventHandlers=function(e,t){var n,r=String(e)+" "+String((n=t)?!0===n?100:(n.capture<<0)+(n.passive<<1)+(n.once<<2):0);return this.events[r]||(this.events[r]={handlers:[],handleEvent:void 0},this.events[r].nextHandlers=this.events[r].handlers),this.events[r]},Aj.prototype.handleEvent=function(e,t,n){var r=this.getEventHandlers(e,t);r.handlers=r.nextHandlers,r.handlers.forEach((function(e){e&&e(n)}))},Aj.prototype.add=function(e,t,n){var r=this,i=this.getEventHandlers(e,n);Nj(i),0===i.nextHandlers.length&&(i.handleEvent=this.handleEvent.bind(this,e,n),this.target.addEventListener(e,i.handleEvent,n)),i.nextHandlers.push(t);var a=!0;return function(){if(a){a=!1,Nj(i);var o=i.nextHandlers.indexOf(t);i.nextHandlers.splice(o,1),0===i.nextHandlers.length&&(r.target&&r.target.removeEventListener(e,i.handleEvent,n),i.handleEvent=void 0)}}};var Pj="__consolidated_events_handlers__";function Rj(e,t,n,r){e[Pj]||(e[Pj]=new Aj(e));var i=function(e){if(e)return Cj()?e:!!e.capture}(r);return e[Pj].add(t,n,i)}var Oj=n(441);function Dj(e,t){var n,r=(n=e,!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):"px"===n.slice(-2)?parseFloat(n.slice(0,-2)):void 0);if("number"===typeof r)return r;var i=function(e){if("%"===e.slice(-1))return parseFloat(e.slice(0,-1))/100}(e);return"number"===typeof i?i*t:void 0}var Lj="above",Mj="inside",Uj="below",Fj="invisible";function jj(e){return"string"===typeof e.type}var Vj;var zj=[];function Bj(e){zj.push(e),Vj||(Vj=setTimeout((function(){var e;for(Vj=null;e=zj.shift();)e()}),0));var t=!0;return function(){if(t){t=!1;var n=zj.indexOf(e);-1!==n&&(zj.splice(n,1),!zj.length&&Vj&&(clearTimeout(Vj),Vj=null))}}}var qj="undefined"!==typeof window,Kj={debug:!1,scrollableAncestor:void 0,children:void 0,topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},Gj=function(e){function t(t){var n;return(n=e.call(this,t)||this).refElement=function(e){n._ref=e},n}Pu(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this;qj&&(this.cancelOnNextTick=Bj((function(){e.cancelOnNextTick=null;var t=e.props,n=t.children;t.debug;!function(e,t){if(e&&!jj(e)&&!t)throw new Error("<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.\n\nSee https://goo.gl/LrBNgw for more info.")}(n,e._ref),e._handleScroll=e._handleScroll.bind(e),e.scrollableAncestor=e._findScrollableAncestor(),e.scrollEventListenerUnsubscribe=Rj(e.scrollableAncestor,"scroll",e._handleScroll,{passive:!0}),e.resizeEventListenerUnsubscribe=Rj(window,"resize",e._handleScroll,{passive:!0}),e._handleScroll(null)})))},r.componentDidUpdate=function(){var e=this;qj&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=Bj((function(){e.cancelOnNextTick=null,e._handleScroll(null)}))))},r.componentWillUnmount=function(){qj&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())},r._findScrollableAncestor=function(){var e=this.props,t=e.horizontal,r=e.scrollableAncestor;if(r)return function(e){return"window"===e?n.g.window:e}(r);for(var i=this._ref;i.parentNode;){if((i=i.parentNode)===document.body)return window;var a=window.getComputedStyle(i),o=(t?a.getPropertyValue("overflow-x"):a.getPropertyValue("overflow-y"))||a.getPropertyValue("overflow");if("auto"===o||"scroll"===o||"overlay"===o)return i}return window},r._handleScroll=function(e){if(this._ref){var t=this._getBounds(),n=function(e){return e.viewportBottom-e.viewportTop===0?Fj:e.viewportTop<=e.waypointTop&&e.waypointTop<=e.viewportBottom||e.viewportTop<=e.waypointBottom&&e.waypointBottom<=e.viewportBottom||e.waypointTop<=e.viewportTop&&e.viewportBottom<=e.waypointBottom?Mj:e.viewportBottom<e.waypointTop?Uj:e.waypointTop<e.viewportTop?Lj:Fj}(t),r=this._previousPosition,i=this.props,a=(i.debug,i.onPositionChange),o=i.onEnter,u=i.onLeave,s=i.fireOnRapidScroll;if(this._previousPosition=n,r!==n){var c={currentPosition:n,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom};a.call(this,c),n===Mj?o.call(this,c):r===Mj&&u.call(this,c),s&&(r===Uj&&n===Lj||r===Lj&&n===Uj)&&(o.call(this,{currentPosition:Mj,previousPosition:r,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}),u.call(this,{currentPosition:n,previousPosition:Mj,event:e,waypointTop:t.waypointTop,waypointBottom:t.waypointBottom,viewportTop:t.viewportTop,viewportBottom:t.viewportBottom}))}}},r._getBounds=function(){var e,t,n=this.props,r=n.horizontal,i=(n.debug,this._ref.getBoundingClientRect()),a=i.left,o=i.top,u=i.right,s=i.bottom,c=r?a:o,l=r?u:s;this.scrollableAncestor===window?(e=r?window.innerWidth:window.innerHeight,t=0):(e=r?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,t=r?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var f=this.props,h=f.bottomOffset;return{waypointTop:c,waypointBottom:l,viewportTop:t+Dj(f.topOffset,e),viewportBottom:t+e-Dj(h,e)}},r.render=function(){var e=this,t=this.props.children;if(!t)return c.createElement("span",{ref:this.refElement,style:{fontSize:0}});if(jj(t)||(0,Oj.isForwardRef)(t)){return c.cloneElement(t,{ref:function(n){e.refElement(n),t.ref&&("function"===typeof t.ref?t.ref(n):t.ref.current=n)}})}return c.cloneElement(t,{innerRef:this.refElement})},t}(c.PureComponent);Gj.above=Lj,Gj.below=Uj,Gj.inside=Mj,Gj.invisible=Fj,Gj.defaultProps=Kj,Gj.displayName="Waypoint";var Hj=function(){var e=ke(),t=new URLSearchParams(e.search).get("topic"),n=u((0,c.useState)([]),2),r=n[0],i=n[1],a=(0,c.useRef)();return(0,c.useEffect)((function(){t?Au.firestore().collection("posts").where("topic","==",t).orderBy("createdAt","desc").limit(2).get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return po(po({},e.data()),{},{id:t})}));a.current=e.docs[e.docs.length-1],i(t)})):Au.firestore().collection("posts").orderBy("createdAt","desc").limit(5).get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return po(po({},e.data()),{},{id:t})}));a.current=e.docs[e.docs.length-1],i(t)}))}),[t]),(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsx)(jw.Group,{children:r.map((function(e){return(0,_k.jsx)(Ij,{post:e},e.id)}))}),(0,_k.jsx)(Gj,{onEnter:function(){a.current&&(t?Au.firestore().collection("posts").where("topic","==",t).orderBy("createdAt","desc").startAfter(a.current).limit(2).get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return po(po({},e.data()),{},{id:t})}));a.current=e.docs[e.docs.length-1],i([].concat(h(r),h(t)))})):Au.firestore().collection("posts").orderBy("createdAt","desc").startAfter(a.current).limit(2).get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return po(po({},e.data()),{},{id:t})}));a.current=e.docs[e.docs.length-1],i([].concat(h(r),h(t)))})))}})]})};function Wj(e){var t=e.children,n=e.className,r=e.content,i=tt("sub header",n),a=ft(Wj,e),o=ht(Wj,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Wj.handledProps=["as","children","className","content"],Wj.propTypes={},Wj.create=sa(Wj,(function(e){return{content:e}}));var Qj=Wj;function Yj(e){var t=e.children,n=e.className,r=e.content,i=tt("content",n),a=ft(Yj,e),o=ht(Yj,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Yj.handledProps=["as","children","className","content"],Yj.propTypes={};var $j=Yj;function Xj(e){var t=e.attached,n=e.block,r=e.children,i=e.className,a=e.color,o=e.content,u=e.disabled,s=e.dividing,l=e.floated,f=e.icon,h=e.image,d=e.inverted,p=e.size,v=e.sub,m=e.subheader,y=e.textAlign,g=tt("ui",a,p,it(n,"block"),it(u,"disabled"),it(s,"dividing"),at(l,"floated"),it(!0===f,"icon"),it(!0===h,"image"),it(d,"inverted"),it(v,"sub"),ot(t,"attached"),st(y),"header",i),k=ft(Xj,e),b=ht(Xj,e);if(!Mi(r))return c.createElement(b,Ze({},k,{className:g}),r);var w=rc.create(f,{autoGenerateKey:!1}),_=mf.create(h,{autoGenerateKey:!1}),x=Qj.create(m,{autoGenerateKey:!1});return w||_?c.createElement(b,Ze({},k,{className:g}),w||_,(o||x)&&c.createElement($j,null,o,x)):c.createElement(b,Ze({},k,{className:g}),o,x)}Xj.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],Xj.propTypes={},Xj.Content=$j,Xj.Subheader=Qj;var Jj,Zj=Xj,eV="firebasestorage.googleapis.com",tV="storageBucket",nV=function(e){k(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,rV(e),"Firebase Storage: ".concat(r," (").concat(rV(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(_(i),n.prototype),i}return y(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return rV(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ua);function rV(e){return"storage/"+e}function iV(){return new nV(Jj.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function aV(){return new nV(Jj.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oV(){return new nV(Jj.CANCELED,"User canceled the upload/download.")}function uV(){return new nV(Jj.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sV(e){return new nV(Jj.INVALID_ARGUMENT,e)}function cV(){return new nV(Jj.APP_DELETED,"The Firebase app was deleted.")}function lV(e){return new nV(Jj.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fV(e,t){return new nV(Jj.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function hV(e){throw new nV(Jj.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Jj||(Jj={}));var dV,pV=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new nV(Jj.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===eV?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new nV(Jj.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),vV=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function mV(e){return"string"===typeof e||e instanceof String}function yV(e){return gV()&&e instanceof Blob}function gV(){return"undefined"!==typeof Blob&&!Ra()}function kV(e,t,n,r){if(r<t)throw sV("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw sV("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function bV(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function wV(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function _V(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(dV||(dV={}));var xV=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=iV();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?cV():oV());else i(aV())}};this.canceled_?t(0,new EV(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new EV(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===dV.NO_ERROR,a=r.getStatus();if(!n||_V(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===dV.ABORT;t(!1,new EV(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new EV(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),EV=y((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function IV(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function SV(){for(var e=IV(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(gV())return new Blob(n);throw new nV(Jj.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function TV(e){if("undefined"===typeof atob)throw t="base-64",new nV(Jj.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var CV={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},NV=y((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function AV(e,t){switch(e){case CV.RAW:return new NV(PV(t));case CV.BASE64:case CV.BASE64URL:return new NV(RV(e,t));case CV.DATA_URL:return new NV(function(e){var t=new OV(e);return t.base64?RV(CV.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw fV(CV.DATA_URL,"Malformed data URL.")}return PV(t)}(t.rest)}(t),new OV(t).contentType)}throw iV()}function PV(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function RV(e,t){switch(e){case CV.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw fV(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case CV.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw fV(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=TV(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw fV(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var OV=y((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw fV(CV.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var DV=function(){function e(t,n){d(this,e);var r=0,i="";yV(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(yV(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(gV()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(SV.apply(null,i))}var a=n.map((function(e){return mV(e)?AV(CV.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function LV(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function MV(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function UV(e,t){return t}var FV=y((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||UV})),jV=null;function VV(){if(jV)return jV;var e=[];e.push(new FV("bucket")),e.push(new FV("generation")),e.push(new FV("metageneration")),e.push(new FV("name","fullPath",!0));var t=new FV("name");t.xform=function(e,t){return function(e){return!mV(e)||e.length<2?e:MV(e)}(t)},e.push(t);var n=new FV("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new FV("timeCreated")),e.push(new FV("updated")),e.push(new FV("md5Hash",null,!0)),e.push(new FV("cacheControl",null,!0)),e.push(new FV("contentDisposition",null,!0)),e.push(new FV("contentEncoding",null,!0)),e.push(new FV("contentLanguage",null,!0)),e.push(new FV("contentType",null,!0)),e.push(new FV("metadata","customMetadata",!0)),jV=e}function zV(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new pV(n,r);return t._makeStorageReference(i)}})}(r,e),r}function BV(e,t,n){var r=LV(t);return null===r?null:zV(e,r,n)}function qV(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var KV="prefixes",GV="items";function HV(e,t,n){var r=LV(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[KV]){var i,a=T(n[KV]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new pV(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[GV]){var s,c=T(n[GV]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new pV(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var WV=y((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function QV(e){if(!e)throw iV()}function YV(e,t){return function(n,r){var i=BV(e,r,t);return QV(null!==i),i}}function $V(e,t){return function(n,r){var i=BV(e,r,t);return QV(null!==i),function(e,t,n,r){var i=LV(t);if(null===i)return null;if(!mV(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return bV("/b/"+o(i)+"/o/"+o(a),n,r)+wV({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function XV(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new nV(Jj.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new nV(Jj.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new nV(Jj.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new nV(Jj.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function JV(e){var t=XV(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new nV(Jj.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function ZV(e,t,n){var r=bV(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new WV(r,"GET",YV(e,n),i);return a.errorHandler=JV(t),a}function ez(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=bV(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new WV(o,"GET",function(e,t){return function(n,r){var i=HV(e,t,r);return QV(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=XV(t),s}function tz(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function nz(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=tz(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qV(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=DV.getBlob(c,r,l);if(null===f)throw uV();var h={name:s.fullPath},d=bV(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new WV(d,"POST",YV(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=XV(t),v}var rz=y((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function iz(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){QV(!1)}return QV(!!n&&-1!==(t||["active"]).indexOf(n)),n}var az=262144;function oz(e,t,n,r,i,a,o,u){var s=new rz(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new nV(Jj.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw uV();var v=t.maxUploadRetryTime,m=new WV(n,"POST",(function(e,n){var i,o=iz(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?YV(t,a)(e,n):null,new rz(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=XV(e),m}var uz={STATE_CHANGED:"state_changed"},sz={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cz(e){switch(e){case"running":case"pausing":case"canceling":return sz.RUNNING;case"paused":return sz.PAUSED;case"success":return sz.SUCCESS;case"canceled":return sz.CANCELED;default:return sz.ERROR}}var lz=y((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function fz(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var hz=null,dz=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dV.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=dV.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=dV.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw hV("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw hV("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw hV("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw hV("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw hV("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),pz=function(e){k(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(dz);function vz(){return hz?hz():new pz}var mz=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=VV(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(Jj.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(_V(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=aV()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(Jj.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return y(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=u(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=tz(t,r,i),u={name:o.fullPath},s=bV(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=qV(o,n),f=e.maxUploadRetryTime,h=new WV(s,"POST",(function(e){var t;iz(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){QV(!1)}return QV(mV(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=XV(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,vz,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new WV(n,"POST",(function(e){var t=iz(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){QV(!1)}n||QV(!1);var i=Number(n);return QV(!isNaN(i)),new rz(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=XV(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,vz,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=az*this._chunkMultiplier,n=new rz(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=oz(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,vz,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(az*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=ZV(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,vz,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=nz(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,vz,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=oV(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=cz(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new lz(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(cz(this._state)){case sz.SUCCESS:fz(this._resolve.bind(null,this.snapshot))();break;case sz.CANCELED:case sz.ERROR:fz(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(cz(this._state)){case sz.RUNNING:case sz.PAUSED:e.next&&fz(e.next.bind(e,this.snapshot))();break;case sz.SUCCESS:e.complete&&fz(e.complete.bind(e))();break;default:e.error&&fz(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),yz=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof pV?n:pV.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new pV(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return MV(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new pV(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw lV(e)}}]),e}();function gz(e,t,n){return kz.apply(this,arguments)}function kz(){return(kz=Za(Xa().mark((function e(t,n,r){var i,a,o,u;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,bz(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,h(u.prefixes)),(a=n.items).push.apply(a,h(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,gz(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bz(e,t){null!=t&&"number"===typeof t.maxResults&&kV("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=ez(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,vz)}function wz(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=bV(t.fullServerUrl(),e.host,e._protocol),a=qV(n,r),o=e.maxOperationRetryTime,u=new WV(i,"PATCH",YV(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=JV(t),u}(e.storage,e._location,t,VV());return e.storage.makeRequestWithTokens(n,vz)}function _z(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=bV(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new WV(r,"GET",$V(e,n),i);return a.errorHandler=JV(t),a}(e.storage,e._location,VV());return e.storage.makeRequestWithTokens(t,vz).then((function(e){if(null===e)throw new nV(Jj.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function xz(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=bV(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new WV(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=JV(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,vz)}function Ez(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new pV(e._location.bucket,n);return new yz(e.storage,r)}function Iz(e,t){if(e instanceof Cz){var n=e;if(null==n._bucket)throw new nV(Jj.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tV+"' property when initializing the app?");var r=new yz(n,n._bucket);return null!=t?Iz(r,t):r}return void 0!==t?Ez(e,t):e}function Sz(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Cz)return new yz(e,t);throw sV("To use ref(service, url), the first argument must be a Storage instance.")}return Iz(e,t)}function Tz(e,t){var n=null===t||void 0===t?void 0:t[tV];return null==n?null:pV.makeFromBucketSpec(n,e)}var Cz=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=eV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?pV.makeFromBucketSpec(i,this._host):Tz(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=pV.makeFromBucketSpec(this._url,e):this._bucket=Tz(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){kV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){kV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Za(Xa().mark((function e(){var t,n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Za(Xa().mark((function e(){var t,n;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new yz(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new vV(cV());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=wV(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new xV(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Za(Xa().mark((function e(t,n){var r,i,a,o;return Xa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=u(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Nz="@firebase/storage",Az="0.11.2",Pz="storage";function Rz(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new mz(e,new DV(t),n)}(e=$a(e),t,n)}function Oz(e){return function(e){e._throwIfRoot("getMetadata");var t=ZV(e.storage,e._location,VV());return e.storage.makeRequestWithTokens(t,vz)}(e=$a(e))}function Dz(e){return function(e){var t={prefixes:[],items:[]};return gz(e,t).then((function(){return t}))}(e=$a(e))}function Lz(e,t){return Sz(e=$a(e),t)}function Mz(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Aa(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Uz(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Cz(r,i,a,n,Xo)}Ko(new eo(Pz,Uz,"PUBLIC").setMultipleInstances(!0)),ru(Nz,Az,""),ru(Nz,Az,"esm2017");var Fz=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return y(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),jz=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return y(e,[{key:"snapshot",get:function(){return new Fz(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Fz(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Fz(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Fz(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Vz=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return y(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new zz(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new zz(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),zz=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return y(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Ez(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new jz(Rz(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CV.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=AV(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new jz(new mz(this._delegate,new DV(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Dz(this._delegate).then((function(t){return new Vz(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return bz(e=$a(e),t)}(this._delegate,e||void 0).then((function(e){return new Vz(e,t.storage)}))}},{key:"getMetadata",value:function(){return Oz(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return wz(e=$a(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return _z($a(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),xz($a(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw lV(e)}}]),e}(),Bz=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return y(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(qz(e))throw sV("ref() expected a child path but got a URL, use refFromURL instead.");return new zz(Lz(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!qz(e))throw sV("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pV.makeFromUrl(e,this._delegate.host)}catch(t){throw sV("refFromUrl() expected a valid full URL but got an invalid one.")}return new zz(Lz(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Mz(this._delegate,e,t,n)}}]),e}();function qz(e){return/^[A-Za-z]+:\/\//.test(e)}function Kz(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Bz(r,i)}!function(e){var t={TaskState:sz,TaskEvent:uz,StringFormat:CV,Storage:Bz,Reference:zz};e.INTERNAL.registerComponent(new eo("storage-compat",Kz,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Nu);var Gz=function(){var e=we(),t=u((0,c.useState)(""),2),n=t[0],r=t[1],i=u((0,c.useState)(""),2),a=i[0],o=i[1],s=u((0,c.useState)([]),2),l=s[0],f=s[1],h=u((0,c.useState)(""),2),d=h[0],p=h[1],v=u((0,c.useState)(null),2),m=v[0],y=v[1],g=u((0,c.useState)(!1),2),k=g[0],b=g[1];(0,c.useEffect)((function(){Au.firestore().collection("topics").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));f(t)}))}),[]);var w=l.map((function(e){return{text:e.name,value:e.name}})),_=m?URL.createObjectURL(m):"https://react.semantic-ui.com/images/wireframe/image.png";return(0,_k.jsxs)(Fi,{children:[(0,_k.jsx)(Zj,{children:"\u767c\u8868\u6587\u7ae0"}),(0,_k.jsxs)(hw,{onSubmit:function(){b(!0);var t=Au.firestore().collection("posts").doc();if(m){var r=Au.storage().ref("post-images/"+t.id),i={contentType:m.type};r.put(m,i).then((function(){r.getDownloadURL().then((function(r){t.set({title:n,content:a,topic:d,createdAt:Au.firestore.Timestamp.now(),author:{displayName:Au.auth().currentUser.displayName||"",photoURL:Au.auth().currentUser.photoURL||"",uid:Au.auth().currentUser.uid,email:Au.auth().currentUser.email},imageUrl:r}).then((function(){b(!1),e("/posts")})).catch((function(e){return console.error("Error writing post data:",e)}))}))})).catch((function(e){return console.error("Error uploading image:",e)}))}else t.set({title:n,content:a,topic:d,createdAt:Au.firestore.Timestamp.now(),author:{displayName:Au.auth().currentUser.displayName||"",photoURL:Au.auth().currentUser.photoURL||"",uid:Au.auth().currentUser.uid,email:Au.auth().currentUser.email}}).then((function(){b(!1),e("/posts")}))},children:[(0,_k.jsx)(mf,{src:_,size:"small",floated:"left"}),(0,_k.jsx)(Nf,{basic:!0,as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3\u6587\u7ae0\u5716\u7247"}),(0,_k.jsx)(hw.Input,{type:"file",id:"post-image",style:{display:"none"},onChange:function(e){return y(e.target.files[0])}}),(0,_k.jsx)(hw.Input,{placeholder:"\u8f38\u5165\u6587\u7ae0\u6a19\u984c",value:n,onChange:function(e){return r(e.target.value)}}),(0,_k.jsx)(hw.TextArea,{placeholder:"\u8f38\u5165\u6587\u7ae0\u5167\u5bb9",value:a,onChange:function(e){return o(e.target.value)}}),(0,_k.jsx)(hw.Dropdown,{placeholder:"\u9078\u64c7\u6587\u7ae0\u4e3b\u984c",options:w,selection:!0,value:d,onChange:function(e,t){var n=t.value;return p(n)}}),(0,_k.jsx)(hw.Button,{loading:k,children:"\u9001\u51fa"})]})]})};function Hz(e){var t=e.children,n=e.className,r=e.compact,i=e.content,a=e.horizontal,o=e.piled,u=e.raised,s=e.size,l=e.stacked,f=tt("ui",s,it(r,"compact"),it(a,"horizontal"),it(o,"piled"),it(u,"raised"),it(l,"stacked"),"segments",n),h=ft(Hz,e),d=ht(Hz,e);return c.createElement(d,Ze({},h,{className:f}),Mi(t)?i:t)}Hz.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],Hz.propTypes={};var Wz=Hz;function Qz(e){var t=e.children,n=e.className,r=e.content,i=tt("inline",n),a=ft(Qz,e),o=ht(Qz,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}Qz.handledProps=["as","children","className","content"],Qz.propTypes={};var Yz=Qz;function $z(e){var t=e.attached,n=e.basic,r=e.children,i=e.circular,a=e.className,o=e.clearing,u=e.color,s=e.compact,l=e.content,f=e.disabled,h=e.floated,d=e.inverted,p=e.loading,v=e.placeholder,m=e.padded,y=e.piled,g=e.raised,k=e.secondary,b=e.size,w=e.stacked,_=e.tertiary,x=e.textAlign,E=e.vertical,I=tt("ui",u,b,it(n,"basic"),it(i,"circular"),it(o,"clearing"),it(s,"compact"),it(f,"disabled"),it(d,"inverted"),it(p,"loading"),it(v,"placeholder"),it(y,"piled"),it(g,"raised"),it(k,"secondary"),it(w,"stacked"),it(_,"tertiary"),it(E,"vertical"),ot(t,"attached"),ot(m,"padded"),st(x),at(h,"floated"),"segment",a),S=ft($z,e),T=ht($z,e);return c.createElement(T,Ze({},S,{className:I}),Mi(r)?l:r)}$z.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],$z.Group=Wz,$z.Inline=Yz,$z.propTypes={};var Xz=$z;function Jz(e){var t=e.active,n=e.className,r=e.children,i=e.content,a=tt(it(t,"active"),n),o=ft(Jz,e),u=ht(Jz,e);return c.createElement(u,Ze({},o,{className:a}),Mi(r)?i:r)}Jz.handledProps=["active","as","children","className","content"],Jz.defaultProps={as:"a"},Jz.propTypes={};var Zz=Jz;function eB(e){var t=e.className,n=e.children,r=e.content,i=tt("actions",t),a=ft(eB,e),o=ht(eB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(n)?r:n)}eB.handledProps=["as","children","className","content"],eB.propTypes={};var tB=eB;function nB(e){var t=e.className,n=e.children,r=e.content,i=tt("author",t),a=ft(nB,e),o=ht(nB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(n)?r:n)}nB.handledProps=["as","children","className","content"],nB.propTypes={};var rB=nB;function iB(e){var t=e.className,n=e.src,r=tt("avatar",t),i=ft(iB,e),a=Ql(i,{htmlProps:Wl}),o=a[0],u=a[1],s=ht(iB,e);return c.createElement(s,Ze({},u,{className:r}),ca(n,{autoGenerateKey:!1,defaultProps:o}))}iB.handledProps=["as","className","src"],iB.propTypes={};var aB=iB;function oB(e){var t=e.className,n=e.children,r=e.content,i=tt(t,"content"),a=ft(oB,e),o=ht(oB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(n)?r:n)}oB.handledProps=["as","children","className","content"],oB.propTypes={};var uB=oB;function sB(e){var t=e.className,n=e.children,r=e.collapsed,i=e.content,a=e.minimal,o=e.size,u=e.threaded,s=tt("ui",o,it(r,"collapsed"),it(a,"minimal"),it(u,"threaded"),"comments",t),l=ft(sB,e),f=ht(sB,e);return c.createElement(f,Ze({},l,{className:s}),Mi(n)?i:n)}sB.handledProps=["as","children","className","collapsed","content","minimal","size","threaded"],sB.propTypes={};var cB=sB;function lB(e){var t=e.className,n=e.children,r=e.content,i=tt("metadata",t),a=ft(lB,e),o=ht(lB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(n)?r:n)}lB.handledProps=["as","children","className","content"],lB.propTypes={};var fB=lB;function hB(e){var t=e.className,n=e.children,r=e.content,i=tt(t,"text"),a=ft(hB,e),o=ht(hB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(n)?r:n)}hB.handledProps=["as","children","className","content"],hB.propTypes={};var dB=hB;function pB(e){var t=e.className,n=e.children,r=e.collapsed,i=e.content,a=tt(it(r,"collapsed"),"comment",t),o=ft(pB,e),u=ht(pB,e);return c.createElement(u,Ze({},o,{className:a}),Mi(n)?i:n)}pB.handledProps=["as","children","className","collapsed","content"],pB.propTypes={},pB.Author=rB,pB.Action=Zz,pB.Actions=tB,pB.Avatar=aB,pB.Content=uB,pB.Group=cB,pB.Metadata=fB,pB.Text=dB;var vB=pB;var mB=function(){var e,t,n,r,i=function(){var e=c.useContext(me).matches,t=e[e.length-1];return t?t.params:{}}().postId,a=u((0,c.useState)({author:{}}),2),o=a[0],s=a[1],l=u((0,c.useState)(""),2),f=l[0],h=l[1],d=u((0,c.useState)(!1),2),p=d[0],v=d[1],m=u((0,c.useState)([]),2),y=m[0],g=m[1];function k(e,t){var n=Au.auth().currentUser.uid;Au.firestore().collection("posts").doc(i).update(ka({},t,e?Au.firestore.FieldValue.arrayRemove(n):Au.firestore.FieldValue.arrayUnion(n)))}(0,c.useEffect)((function(){Au.firestore().collection("posts").doc(i).onSnapshot((function(e){var t=e.data();s(t)}))}),[]),(0,c.useEffect)((function(){Au.firestore().collection("posts").doc(i).collection("comments").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));console.log(t),g(t)}))}),[]);var b=null===(e=o.collectedBy)||void 0===e?void 0:e.includes(Au.auth().currentUser.uid),w=null===(t=o.likedBy)||void 0===t?void 0:t.includes(Au.auth().currentUser.uid);return(0,_k.jsxs)(_k.Fragment,{children:[o.author.photoURL?(0,_k.jsx)(mf,{src:o.author.photoURL,avatar:!0}):(0,_k.jsx)(rc,{name:"user circle"})," ",o.author.displayName||"\u4f7f\u7528\u8005",(0,_k.jsxs)(Zj,{children:[o.title,(0,_k.jsxs)(Zj.Subheader,{children:[o.topic," . ",null===(n=o.createdAt)||void 0===n?void 0:n.toDate().toLocaleDateString()]})]}),(0,_k.jsx)(mf,{src:o.imageUrl}),(0,_k.jsx)(Xz,{basic:!0,vertical:!0,children:o.content}),(0,_k.jsxs)(Xz,{basic:!0,vertical:!0,children:["\u7559\u8a00 ",o.commentsCount||0," . \u8b9a ",(null===(r=o.likedBy)||void 0===r?void 0:r.length)||0," .",(0,_k.jsx)(rc,{name:"thumbs up ".concat(w?"":" outline "),color:w?"blue":"grey",link:!0,onClick:function(){return k(w,"likedBy")}})," .",(0,_k.jsx)(rc,{name:"bookmark".concat(b?"":" outline "),color:b?"blue":"grey",link:!0,onClick:function(){return k(b,"collectedBy")}})]}),(0,_k.jsxs)(vB.Group,{children:[(0,_k.jsxs)(hw,{reply:!0,children:[(0,_k.jsx)(hw.TextArea,{value:f,onChange:function(e){return h(e.target.value)}}),(0,_k.jsx)(hw.Button,{onClick:function(){v(!0);var e=Au.firestore(),t=e.batch(),n=e.collection("posts").doc(i);t.update(n,{commentsCount:Au.firestore.FieldValue.increment(1)});var r=n.collection("comments").doc();t.set(r,{content:f,createdAt:Au.firestore.Timestamp.now(),author:{uid:Au.auth().currentUser.uid,displayName:Au.auth().currentUser.displayName||"",photoURL:Au.auth().currentUser.photoURL||""}});var a=e.collection("mail").doc();t.set(a,{to:o.author.email,message:{subject:"\u65b0\u8a0a\u606f : ".concat(Au.auth().currentUser.displayName," \u525b\u525b\u56de\u5fa9\u4e86\u4f60\u7684\u6587\u7ae0"),html:'<a href="'.concat(window.location.origin,"/posts/").concat(i,'">\u524d\u5f80\u6587\u7ae0</a>')}}),t.commit().then((function(){h(""),v(!1)}))},loading:p,children:"\u7559\u8a00"})]}),(0,_k.jsxs)(Zj,{children:["\u5171 ",o.commentsCount||0," \u5247\u7559\u8a00"]}),y.map((function(e){return(0,_k.jsxs)(vB,{children:[(0,_k.jsx)(vB.Avatar,{src:e.author.photoURL}),(0,_k.jsxs)(vB.Content,{children:[(0,_k.jsx)(vB.Author,{as:"span",children:e.author.displayName||"\u4f7f\u7528\u8005"}),(0,_k.jsx)(vB.Metadata,{children:e.createdAt.toDate().toLocaleDateString()}),(0,_k.jsx)(vB.Text,{children:e.content})]})]})}))]})]})};var yB=function(){var e=u((0,c.useState)([]),2),t=e[0],n=e[1];return(0,c.useEffect)((function(){Au.firestore().collection("posts").where("author.uid","==",Au.auth().currentUser.uid).get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return po(po({},e.data()),{},{id:t})}));n(t)}))}),[]),(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsx)(Zj,{children:"\u6211\u7684\u6587\u7ae0"}),(0,_k.jsx)(jw.Group,{children:t.map((function(e){return(0,_k.jsx)(Ij,{post:e},e.id)}))})]})};var gB=function(){var e=u((0,c.useState)([]),2),t=e[0],n=e[1];return(0,c.useEffect)((function(){Au.firestore().collection("posts").where("collectedBy","array-contains",Au.auth().currentUser.uid).get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return po(po({},e.data()),{},{id:t})}));n(t)}))}),[]),(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsx)(Zj,{children:"\u6211\u7684\u6536\u85cf"}),(0,_k.jsx)(jw.Group,{children:t.map((function(e){return(0,_k.jsx)(Ij,{post:e},e.id)}))})]})},kB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleButtonOverrides=function(e){return{onClick:function(n,r){Qu(e,"onClick",n,r),Qu(t.props,"onActionClick",n,r)}}},t}return Pu(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.actions,i=n.children,a=n.className,o=n.content,u=tt("actions",a),s=ft(t,this.props),l=ht(t,this.props);return Mi(i)?Mi(o)?c.createElement(l,Ze({},s,{className:u}),Ou(r,(function(t){return Nf.create(t,{overrideProps:e.handleButtonOverrides})}))):c.createElement(l,Ze({},s,{className:u}),o):c.createElement(l,Ze({},s,{className:u}),i)},t}(c.Component);function bB(e){var t=e.children,n=e.className,r=e.content,i=e.image,a=e.scrolling,o=tt(n,it(i,"image"),it(a,"scrolling"),"content"),u=ft(bB,e),s=ht(bB,e);return c.createElement(s,Ze({},u,{className:o}),Mi(t)?r:t)}kB.handledProps=["actions","as","children","className","content","onActionClick"],kB.propTypes={},kB.create=sa(kB,(function(e){return{actions:e}})),bB.handledProps=["as","children","className","content","image","scrolling"],bB.propTypes={},bB.create=sa(bB,(function(e){return{content:e}}));var wB=bB;function _B(e){var t=e.children,n=e.className,r=e.content,i=tt("description",n),a=ft(_B,e),o=ht(_B,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}_B.handledProps=["as","children","className","content"],_B.propTypes={};var xB=_B,EB=Fl()?c.useLayoutEffect:c.useEffect,IB=/\s+/;var SB=new Map,TB=function(e,t){var n=function(e){var t=[];return e?(e.forEach((function(e){"string"===typeof e.current&&e.current.split(IB).forEach((function(e){t.push(e)}))})),t.filter((function(e,t,n){return e.length>0&&n.indexOf(e)===t}))):[]}(t),r=function(e,t){return[t.filter((function(t){return-1===e.indexOf(t)})),e.filter((function(e){return-1===t.indexOf(e)}))]}(SB.get(e)||[],n),i=r[0],a=r[1];e&&(i.forEach((function(t){return e.classList.add(t)})),a.forEach((function(t){return e.classList.remove(t)}))),SB.set(e,n)},CB=new function(){var e=this;this.add=function(t,n){if(e.nodes.has(t)){e.nodes.get(t).add(n)}else{var r=new Set;r.add(n),e.nodes.set(t,r)}},this.del=function(t,n){if(e.nodes.has(t)){var r=e.nodes.get(t);1!==r.size?r.delete(n):e.nodes.delete(t)}},this.emit=function(t,n){n(t,e.nodes.get(t))},this.nodes=new Map};function NB(e){var t=e.blurring,n=e.children,r=e.className,i=e.centered,a=e.content,o=e.inverted,u=e.mountNode,s=e.scrolling,l=c.useRef(),f=tt("ui",it(o,"inverted"),it(!i,"top aligned"),"page modals dimmer transition visible active",r),h=tt("dimmable dimmed",it(t,"blurring"),it(s,"scrolling")),d=ft(NB,e),p=ht(NB,e);return function(e,t){var n=c.useRef(),r=c.useRef(!1);EB((function(){if(n.current=t,r.current){var i=$l(e)?e.current:e;CB.emit(i,TB)}r.current=!0}),[t]),EB((function(){var t=$l(e)?e.current:e;return CB.add(t,n),CB.emit(t,TB),function(){CB.del(t,n),CB.emit(t,TB)}}),[e])}(u,h),c.useEffect((function(){l.current&&l.current.style&&l.current.style.setProperty("display","flex","important")}),[]),c.createElement(tf,{innerRef:l},c.createElement(p,Ze({},d,{className:f}),Mi(n)?a:n))}NB.handledProps=["as","blurring","centered","children","className","content","inverted","mountNode","scrolling"],NB.propTypes={},NB.create=sa(NB,(function(e){return{content:e}}));var AB=NB;function PB(e){var t=e.children,n=e.className,r=e.content,i=tt("header",n),a=ft(PB,e),o=ht(PB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}PB.handledProps=["as","children","className","content"],PB.propTypes={},PB.create=sa(PB,(function(e){return{content:e}}));var RB=PB,OB=function(e){function t(){for(var n,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).legacy=Fl()&&!window.ActiveXObject&&"ActiveXObject"in window,n.ref=(0,c.createRef)(),n.dimmerRef=(0,c.createRef)(),n.latestDocumentMouseDownEvent=null,n.getMountNode=function(){return Fl()?n.props.mountNode||document.body:null},n.handleActionsOverrides=function(e){return{onActionClick:function(t,r){Qu(e,"onActionClick",t,r),Qu(n.props,"onActionClick",t,n.props),n.handleClose(t)}}},n.handleClose=function(e){n.setState({open:!1}),Qu(n.props,"onClose",e,Ze({},n.props,{open:!1}))},n.handleDocumentMouseDown=function(e){n.latestDocumentMouseDownEvent=e},n.handleDocumentClick=function(e){var t=n.props.closeOnDimmerClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!t||rf(n.ref.current,r)||rf(n.ref.current,e)||(n.setState({open:!1}),Qu(n.props,"onClose",e,Ze({},n.props,{open:!1})))},n.handleIconOverrides=function(e){return{onClick:function(t){Qu(e,"onClick",t),n.handleClose(t)}}},n.handleOpen=function(e){Qu(n.props,"onOpen",e,Ze({},n.props,{open:!0})),n.setState({open:!0})},n.handlePortalMount=function(e){var t=n.props.eventPool;n.setState({scrolling:!1}),n.setPositionAndClassNames(),Ll.sub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),Ll.sub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),Qu(n.props,"onMount",e,n.props)},n.handlePortalUnmount=function(e){var t=n.props.eventPool;cancelAnimationFrame(n.animationRequestId),Ll.unsub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),Ll.unsub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),Qu(n.props,"onUnmount",e,n.props)},n.setPositionAndClassNames=function(){var e,t=n.props.centered,r={};if(n.ref.current){var i=n.ref.current.getBoundingClientRect(),a=function(e){var t=e.height+0,n=e.height+0,r=window.innerHeight;return r/2+-n/2+t+50<r}(i);e=!a;var o=n.legacy?function(e,t,n){var r=t&&e?-n.height/2:0;return{marginLeft:-n.width/2,marginTop:r}}(a,t,i):{};Rl()(n.state.legacyStyles,o)||(r.legacyStyles=o),n.state.scrolling!==e&&(r.scrolling=e)}fc(r)||n.setState(r),n.animationRequestId=requestAnimationFrame(n.setPositionAndClassNames)},n.renderContent=function(e){var r=n.props,i=r.actions,a=r.basic,o=r.children,u=r.className,s=r.closeIcon,l=r.content,f=r.header,h=r.size,d=r.style,p=n.state,v=p.legacyStyles,m=p.scrolling,y=tt("ui",h,it(a,"basic"),it(n.legacy,"legacy"),it(m,"scrolling"),"modal transition visible active",u),g=ht(t,n.props),k=!0===s?"close":s,b=rc.create(k,{overrideProps:n.handleIconOverrides});return c.createElement(tf,{innerRef:n.ref},c.createElement(g,Ze({},e,{className:y,style:Ze({},v,d)}),b,Mi(o)?c.createElement(c.Fragment,null,RB.create(f,{autoGenerateKey:!1}),wB.create(l,{autoGenerateKey:!1}),kB.create(i,{overrideProps:n.handleActionsOverrides})):o))},n}Pu(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.handlePortalUnmount()},n.render=function(){var e=this.props,n=e.centered,r=e.closeOnDocumentClick,i=e.dimmer,a=e.eventPool,o=e.trigger,u=this.state,s=u.open,l=u.scrolling,f=this.getMountNode();if(!Fl())return(0,c.isValidElement)(o)?o:null;var h=ft(t,this.props),d=sf.handledProps,p=Cl(h,(function(e,t,n){return Bl(d,n)||(e[n]=t),e}),{}),v=xb(h,d);return c.createElement(sf,Ze({closeOnDocumentClick:r},v,{trigger:o,eventPool:a,mountNode:f,open:s,onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount}),c.createElement(tf,{innerRef:this.dimmerRef},AB.create(na(i)?i:{},{autoGenerateKey:!1,defaultProps:{blurring:"blurring"===i,inverted:"inverted"===i},overrideProps:{children:this.renderContent(p),centered:n,mountNode:f,scrolling:l}})))},t}($u);OB.handledProps=["actions","as","basic","centered","children","className","closeIcon","closeOnDimmerClick","closeOnDocumentClick","content","defaultOpen","dimmer","eventPool","header","mountNode","onActionClick","onClose","onMount","onOpen","onUnmount","open","size","style","trigger"],OB.propTypes={},OB.defaultProps={centered:!0,dimmer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!1,eventPool:"Modal"},OB.autoControlledProps=["open"],OB.Actions=kB,OB.Content=wB,OB.Description=xB,OB.Dimmer=AB,OB.Header=RB;var DB=OB;function LB(e){var t=e.user,n=u((0,c.useState)(!1),2),r=n[0],i=n[1],a=u((0,c.useState)(""),2),o=a[0],s=a[1],l=u((0,c.useState)(!1),2),f=l[0],h=l[1];return(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsxs)(Zj,{size:"small",children:["\u6703\u54e1\u540d\u7a31",(0,_k.jsx)(Nf,{floated:"right",onClick:function(){return i(!0)},children:"\u4fee\u6539"})]}),(0,_k.jsx)(Xz,{vertical:!0,children:t.displayName}),(0,_k.jsxs)(DB,{open:r,size:"mini",children:[(0,_k.jsx)(DB.Header,{children:"\u4fee\u6539\u6703\u54e1\u540d\u7a31"}),(0,_k.jsx)(DB.Content,{children:(0,_k.jsx)(Pf,{placeholder:"\u8acb\u8f38\u5165\u65b0\u7684\u6703\u54e1\u540d\u7a31",value:o,onChange:function(e){return s(e.target.value)},fluid:!0})}),(0,_k.jsxs)(DB.Actions,{children:[(0,_k.jsx)(Nf,{onClick:function(){return i(!1)},children:"\u53d6\u6d88"}),(0,_k.jsx)(Nf,{onClick:function(){h(!0),t.updateProfile({displayName:o}).then((function(){h(!1),s(""),i(!1)}))},loading:f,children:"\u4fee\u6539"})]})]})]})}function MB(e){var t=e.user,n=u((0,c.useState)(!1),2),r=n[0],i=n[1],a=u((0,c.useState)(null),2),o=a[0],s=a[1],l=o?URL.createObjectURL(o):t.photoURL,f=u((0,c.useState)(!1),2),h=f[0],d=f[1];return(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsxs)(Zj,{size:"small",children:["\u6703\u54e1\u7167\u7247",(0,_k.jsx)(Nf,{floated:"right",onClick:function(){return i(!0)},children:"\u4fee\u6539"})]}),(0,_k.jsx)(Xz,{vertical:!0,children:(0,_k.jsx)(mf,{src:t.photoURL,avatar:!0})}),(0,_k.jsxs)(DB,{open:r,size:"mini",children:[(0,_k.jsx)(DB.Header,{children:"\u4fee\u6539\u6703\u54e1\u7167\u7247"}),(0,_k.jsxs)(DB.Content,{image:!0,children:[(0,_k.jsx)(mf,{src:l,avatar:!0}),(0,_k.jsxs)(DB.Description,{children:[(0,_k.jsx)(Nf,{as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3"}),"  ",(0,_k.jsx)(Pf,{type:"file",id:"post-image",style:{display:"none"},onChange:function(e){return s(e.target.files[0])}})]})]}),(0,_k.jsxs)(DB.Actions,{children:[(0,_k.jsx)(Nf,{onClick:function(){return i(!1)},children:"\u53d6\u6d88"}),(0,_k.jsx)(Nf,{onClick:function(){if(d(!0),o){var e=Au.storage().ref("user-photos/"+t.uid),n={contentType:o.type};e.put(o,n).then((function(){e.getDownloadURL().then((function(e){t.updateProfile({photoURL:e}).then((function(){d(!1),s(null),i(!1)}))}))}))}},loading:h,children:"\u4fee\u6539"})]})]})]})}function UB(e){var t=e.user,n=u((0,c.useState)(!1),2),r=n[0],i=n[1],a=u((0,c.useState)(""),2),o=a[0],s=a[1],l=u((0,c.useState)(""),2),f=l[0],h=l[1],d=u((0,c.useState)(!1),2),p=d[0],v=d[1];return(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsxs)(Zj,{size:"small",children:["\u6703\u54e1\u5bc6\u78bc",(0,_k.jsx)(Nf,{floated:"right",onClick:function(){return i(!0)},children:"\u4fee\u6539"})]}),(0,_k.jsx)(Xz,{vertical:!0,children:"*****"}),(0,_k.jsxs)(DB,{open:r,size:"mini",children:[(0,_k.jsx)(DB.Header,{children:"\u4fee\u6539\u6703\u54e1\u5bc6\u78bc"}),(0,_k.jsxs)(DB.Content,{children:[(0,_k.jsx)(Zj,{size:"small",children:"\u76ee\u524d\u5bc6\u78bc"}),(0,_k.jsx)(Pf,{placeholder:"\u8acb\u8f38\u5165\u820a\u5bc6\u78bc",value:o,onChange:function(e){return s(e.target.value)},fluid:!0}),(0,_k.jsx)(Zj,{size:"small",children:"\u65b0\u5bc6\u78bc"}),(0,_k.jsx)(Pf,{placeholder:"\u8acb\u8f38\u5165\u65b0\u5bc6\u78bc",value:f,onChange:function(e){return h(e.target.value)},fluid:!0})]}),(0,_k.jsxs)(DB.Actions,{children:[(0,_k.jsx)(Nf,{onClick:function(){return i(!1)},children:"\u53d6\u6d88"}),(0,_k.jsx)(Nf,{onClick:function(){v(!0);var e=Au.auth.EmailAuthProvider.credential(t.email,o);t.reauthenticateWithCredential(e).then((function(){t.updatePassword(f).then((function(){i(!1),s(""),h(""),v(!1)}))}))},loading:p,children:"\u4fee\u6539"})]})]})]})}var FB=function(e){var t=e.user;return(0,_k.jsxs)(_k.Fragment,{children:[(0,_k.jsx)(Zj,{children:"\u6703\u54e1\u8cc7\u6599"}),(0,_k.jsx)(LB,{user:t}),(0,_k.jsx)(MB,{user:t}),(0,_k.jsx)(UB,{user:t})]})};function jB(e){var t=e.children,n=e.className,r=e.content,i=tt(n,"description"),a=ft(jB,e),o=ht(jB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}jB.handledProps=["as","children","className","content"],jB.propTypes={},jB.create=sa(jB,(function(e){return{content:e}}));var VB=jB;function zB(e){var t=e.children,n=e.className,r=e.content,i=tt("header",n),a=ft(zB,e),o=ht(zB,e);return c.createElement(o,Ze({},a,{className:i}),Mi(t)?r:t)}zB.handledProps=["as","children","className","content"],zB.propTypes={},zB.create=sa(zB,(function(e){return{content:e}}));var BB=zB;function qB(e){var t=e.children,n=e.className,r=e.content,i=e.description,a=e.floated,o=e.header,u=e.verticalAlign,s=tt(at(a,"floated"),ct(u),"content",n),l=ft(qB,e),f=ht(qB,e);return Mi(t)?c.createElement(f,Ze({},l,{className:s}),BB.create(o),VB.create(i),r):c.createElement(f,Ze({},l,{className:s}),t)}qB.handledProps=["as","children","className","content","description","floated","header","verticalAlign"],qB.propTypes={},qB.create=sa(qB,(function(e){return{content:e}}));var KB=qB;function GB(e){var t=e.className,n=e.verticalAlign,r=tt(ct(n),t),i=ft(GB,e);return c.createElement(rc,Ze({},i,{className:r}))}GB.handledProps=["className","verticalAlign"],GB.propTypes={},GB.create=sa(GB,(function(e){return{name:e}}));var HB=GB,WB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Qu(t.props,"onClick",e,t.props)},t}return Pu(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,i=e.className,a=e.content,o=e.description,u=e.disabled,s=e.header,l=e.icon,f=e.image,h=e.value,d=ht(t,this.props),p=tt(it(n,"active"),it(u,"disabled"),it("li"!==d,"item"),i),v=ft(t,this.props),m="li"===d?{value:h}:{"data-value":h};if(!Mi(r))return c.createElement(d,Ze({},m,{role:"listitem",className:p,onClick:this.handleClick},v),r);var y=HB.create(l,{autoGenerateKey:!1}),g=mf.create(f,{autoGenerateKey:!1});if(!(0,c.isValidElement)(a)&&na(a))return c.createElement(d,Ze({},m,{role:"listitem",className:p,onClick:this.handleClick},v),y||g,KB.create(a,{autoGenerateKey:!1,defaultProps:{header:s,description:o}}));var k=BB.create(s,{autoGenerateKey:!1}),b=VB.create(o,{autoGenerateKey:!1});return y||g?c.createElement(d,Ze({},m,{role:"listitem",className:p,onClick:this.handleClick},v),y||g,(a||k||b)&&c.createElement(KB,null,k,b,a)):c.createElement(d,Ze({},m,{role:"listitem",className:p,onClick:this.handleClick},v),k,b,a)},t}(c.Component);WB.handledProps=["active","as","children","className","content","description","disabled","header","icon","image","onClick","value"],WB.propTypes={},WB.create=sa(WB,(function(e){return{content:e}}));var QB=WB;function YB(e){var t=e.children,n=e.className,r=e.content,i=ft(YB,e),a=ht(YB,e),o=tt(it("ul"!==a&&"ol"!==a,"list"),n);return c.createElement(a,Ze({},i,{className:o}),Mi(t)?r:t)}YB.handledProps=["as","children","className","content"],YB.propTypes={};var $B=YB,XB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){Qu(e,"onClick",n,r),Qu(t.props,"onItemClick",n,r)}}},t}return Pu(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.animated,i=n.bulleted,a=n.celled,o=n.children,u=n.className,s=n.content,l=n.divided,f=n.floated,h=n.horizontal,d=n.inverted,p=n.items,v=n.link,m=n.ordered,y=n.relaxed,g=n.selection,k=n.size,b=n.verticalAlign,w=tt("ui",k,it(r,"animated"),it(i,"bulleted"),it(a,"celled"),it(l,"divided"),it(h,"horizontal"),it(d,"inverted"),it(v,"link"),it(m,"ordered"),it(g,"selection"),ot(y,"relaxed"),at(f,"floated"),ct(b),"list",u),_=ft(t,this.props),x=ht(t,this.props);return Mi(o)?Mi(s)?c.createElement(x,Ze({role:"list",className:w},_),Ou(p,(function(t){return QB.create(t,{overrideProps:e.handleItemOverrides})}))):c.createElement(x,Ze({role:"list",className:w},_),s):c.createElement(x,Ze({role:"list",className:w},_),o)},t}(c.Component);XB.handledProps=["animated","as","bulleted","celled","children","className","content","divided","floated","horizontal","inverted","items","link","onItemClick","ordered","relaxed","selection","size","verticalAlign"],XB.propTypes={},XB.Content=KB,XB.Description=VB,XB.Header=BB,XB.Icon=HB,XB.Item=QB,XB.List=$B;var JB=XB;var ZB=function(){var e=ke(),t=new URLSearchParams(e.search).get("topic"),n=u((0,c.useState)([]),2),r=n[0],i=n[1];return(0,c.useEffect)((function(){Au.firestore().collection("topics").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));i(t)}))}),[]),(0,_k.jsx)(JB,{animated:!0,selection:!0,children:r.map((function(e){return(0,_k.jsx)(JB.Item,{as:$e,to:"/posts?topic=".concat(e.name),active:t===e.name,children:e.name},e.name)}))})};var eq=function(){var e=ke();return console.log(e),(0,_k.jsx)(JB,{animated:!0,selection:!0,children:[{name:"\u6211\u7684\u6587\u7ae0",path:"/my/posts"},{name:"\u6211\u7684\u6536\u85cf",path:"/my/collections"},{name:"\u6703\u54e1\u8cc7\u6599",path:"/my/settings"}].map((function(t){return(0,_k.jsx)(JB.Item,{as:$e,to:t.path,active:t.path===e.pathname,children:t.name},t.name)}))})};var tq=function(){return(0,_k.jsx)(Fi,{children:(0,_k.jsx)(ga,{children:(0,_k.jsxs)(ga.Row,{children:[(0,_k.jsx)(ga.Column,{width:3,children:(0,_k.jsx)(ZB,{})}),(0,_k.jsx)(ga.Column,{width:10,children:(0,_k.jsx)(Me,{})}),(0,_k.jsx)(ga.Column,{width:3})]})})})},nq=function(){var e=u((0,c.useState)(null),2),t=(e[0],e[1]);return(0,c.useEffect)((function(){Au.auth().onAuthStateChanged((function(e){t(e)}))}),[]),(0,_k.jsx)(Fi,{children:(0,_k.jsx)(ga,{children:(0,_k.jsxs)(ga.Row,{children:[(0,_k.jsx)(ga.Column,{width:3,children:(0,_k.jsx)(eq,{})}),(0,_k.jsx)(ga.Column,{width:10,children:(0,_k.jsx)(Me,{})}),(0,_k.jsx)(ga.Column,{width:3})]})})})},rq=function(){var e=u((0,c.useState)(),2),t=e[0],n=e[1];return(0,c.useEffect)((function(){Au.auth().onAuthStateChanged((function(e){n(e)}))}),[]),(0,_k.jsxs)(We,{children:[(0,_k.jsx)(xk,{user:t}),(0,_k.jsxs)(je,{children:[(0,_k.jsxs)(Ue,{exact:!0,path:"/posts",element:(0,_k.jsx)(tq,{}),children:[(0,_k.jsx)(Ue,{path:"/posts",element:(0,_k.jsx)(Hj,{}),exact:!0}),(0,_k.jsx)(Ue,{path:"/posts/:postId",element:null!==t?(0,_k.jsx)(mB,{}):(0,_k.jsx)(Le,{to:"/posts"}),exact:!0})]}),(0,_k.jsxs)(Ue,{path:"/my",element:null!==t?(0,_k.jsx)(nq,{}):(0,_k.jsx)(Le,{to:"/posts"}),children:[(0,_k.jsx)(Ue,{path:"/my/posts",element:(0,_k.jsx)(yB,{}),exact:!0}),(0,_k.jsx)(Ue,{path:"/my/collections",element:(0,_k.jsx)(gB,{}),exact:!0}),(0,_k.jsx)(Ue,{path:"/my/settings",element:(0,_k.jsx)(FB,{user:t}),exact:!0})]}),(0,_k.jsx)(Ue,{exact:!0,path:"/signin",element:null!==t?(0,_k.jsx)(Le,{to:"/posts"}):(0,_k.jsx)(_w,{})}),(0,_k.jsx)(Ue,{exact:!0,path:"/new-post",element:null!==t?(0,_k.jsx)(Gz,{}):(0,_k.jsx)(Le,{to:"/posts"})}),(0,_k.jsx)(Ue,{exact:!0,path:"posts/:postId",element:(0,_k.jsx)(mB,{})})]})]})};t.render((0,_k.jsx)(rq,{}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.61ef564f.js.map